webpackJsonp([25],{NkCZ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"",data:function(){return{value:"",tableData:[],fTableData:[],vTitle:"菜单新增",visiDialog:!1,visiDialogF:!1,formData:{permissionName:"",url:"",permissionParentID:"",permissionParentName:"",permissionLevel:"",seqNum:"",permissionPictureUrl:"",status:"1",description:""},rules:{permissionName:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],permissionLevel:[{required:!0,message:"请输入菜单级别",trigger:"blur"}],seqNum:[{required:!0,message:"请输入菜单顺序",trigger:"blur"}]},isEditor:!1,fMenu:{},id:"",menuData:[]}},created:function(){this.getAlllist(),this.getList()},mounted:function(){},inject:["globelDelet"],methods:{selectChange:function(t,e){var s=t;for(var a in this.id="",s)this.id+=s[a].id+",";this.id=this.id.substring(0,this.id.length-1)},add:function(){this.visiDialog=!0,this.isEditor=!1},delet:function(t){this.globelDelet("/AuthorityManagement/permissions/ids",t,this.getList)},allDelet:function(){this.globelDelet("/AuthorityManagement/permissions/ids",this.id,this.getList)},getFmenu:function(){var t=this;this.visiDialogF=!0,this.$http.get("AuthorityManagement/permissions/menus").then(function(e){t.fTableData=e.data.content.dataList})},selectChangeF:function(t,e){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(e),this.fMenu=e},selectAll:function(){this.$refs.multipleTable.clearSelection()},sureSelect:function(){this.formData.permissionParentID=this.fMenu.id,this.formData.permissionParentName=this.fMenu.name,this.visiDialogF=!1},cencelSelect:function(){this.fMenu={},this.visiDialogF=!1},submit:function(t){var e=this;this.$refs[t].validate(function(s){if(!s)return!1;if(e.isEditor){var a=new FormData;a.append("permissionName",e.formData.permissionName),a.append("url",e.formData.url),a.append("permissionParentID",e.formData.permissionParentID),a.append("permissionLevel",e.formData.permissionLevel),a.append("seqNum",e.formData.seqNum),a.append("permissionPictureUrl",e.formData.permissionPictureUrl),a.append("status",e.formData.status),a.append("description",e.formData.description),a.append("permissionType",1),a.append("permissionId",e.id),e.$http.put("AuthorityManagement/permissions",a).then(function(s){0==s.data.code&&(e.resetForm(t),e.visiDialog=!1,e.getList(),e.$message({message:s.data.message,type:"success",duration:1e3}))})}else{var i=new FormData;i.append("permissionName",e.formData.permissionName),i.append("url",e.formData.url),i.append("permissionParentID",e.formData.permissionParentID),i.append("permissionLevel",e.formData.permissionLevel),i.append("seqNum",e.formData.seqNum),i.append("permissionPictureUrl",e.formData.permissionPictureUrl),i.append("status",e.formData.status),i.append("description",e.formData.description),i.append("permissionType",1),e.$http.post("AuthorityManagement/permissions",i).then(function(s){0==s.data.code&&(e.resetForm(t),e.visiDialog=!1,e.getList(),e.$message({message:s.data.message,type:"success",duration:1e3}))})}})},cancel:function(t){this.visiDialog=!1,this.resetForm(t)},closess:function(t){t(),this.resetForm("ruleForm")},revise:function(t){var e=this;this.id=t.id,this.isEditor=!0,this.$http.get("AuthorityManagement/permissions/id",{params:{permissionId:this.id}}).then(function(t){e.visiDialog=!0;var s=t.data.content.info;for(var a in e.formData={permissionName:s.permissionName,url:s.url,permissionParentID:s.permissionParentID,permissionParentName:"",permissionLevel:s.permissionLevel,seqNum:s.seqNum,permissionPictureUrl:s.permissionPictureUrl,status:s.status+"",description:s.description},e.menuData)e.formData.permissionParentID==e.menuData[a].permissionId&&(e.formData.permissionParentName=e.menuData[a].permissionName)})},resetForm:function(t){this.$refs[t].resetFields(),this.formData={permissionName:"",url:"",permissionParentID:"",permissionParentName:"",permissionLevel:"",seqNum:"",permissionPictureUrl:"",status:"1",description:""}},getAlllist:function(){var t=this;this.$http.get("AuthorityManagement/permissions").then(function(e){t.menuData=e.data.content.dataList})},getList:function(){var t=this;this.$http.get("AuthorityManagement/permissions/menus").then(function(e){t.tableData=e.data.content.dataList})}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"trafficpage secondary-page-mode"},[s("div",{staticClass:"secondary-toolbar"},[s("span",[t._v("关键字 : ")]),t._v(" "),s("div",{staticClass:"layoutBox",staticStyle:{width:"220px"}},[s("el-input",{attrs:{placeholder:"请输入"}})],1),t._v("  \n         "),s("el-button",[s("i",{staticClass:"iconfont icon-sousuo"}),t._v("查询")]),t._v(" "),s("el-button",{on:{click:t.add}},[s("i",{staticClass:"iconfont icon-tianjia"}),t._v("新增")]),t._v(" "),s("el-button",{attrs:{type:"delet"}},[s("i",{staticClass:"iconfont icon-shanchu"}),t._v("批量删除")])],1),t._v(" "),s("div",{staticClass:"currency-mode-wrap"},[s("el-table",{attrs:{border:"",data:t.tableData,height:"calc(100% - 30px)","row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":t.selectChange}},[s("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"菜单名称"}}),t._v(" "),s("el-table-column",{attrs:{prop:"url",width:"400px",label:"菜单地址"}}),t._v(" "),s("el-table-column",{attrs:{prop:"seqNum",label:"菜单排序"}}),t._v(" "),s("el-table-column",{attrs:{prop:"stationname",label:"菜单描述"}}),t._v(" "),s("el-table-column",{attrs:{prop:"stationname",label:"是否启用"}}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[s("el-button",{attrs:{type:"secondBtn"},on:{click:function(s){return t.revise(e.row)}}},[t._v("编辑")]),t._v(" "),s("el-button",{attrs:{type:"secondBtn"},on:{click:function(s){return t.delet(e.row.id)}}},[t._v("删除")])],1)]}}])})],1)],1),t._v(" "),s("el-dialog",{attrs:{visible:t.visiDialog,width:"920px",title:t.vTitle,"before-close":t.closess},on:{"update:visible":function(e){t.visiDialog=e}}},[s("div",{staticClass:"dialogcontent"},[s("el-form",{ref:"ruleForm",attrs:{model:t.formData,rules:t.rules}},[s("table",{staticClass:"whTable"},[s("tr",[s("td",{attrs:{width:"16.5%"}},[s("span",{staticClass:"rCode"},[t._v("菜单名称")])]),t._v(" "),s("td",[s("el-form-item",{attrs:{prop:"permissionName"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formData.permissionName,callback:function(e){t.$set(t.formData,"permissionName",e)},expression:"formData.permissionName"}})],1)],1),t._v(" "),s("td",{attrs:{width:"16.5%"}},[s("span",[t._v("菜单地址")])]),t._v(" "),s("td",[s("div",{staticStyle:{"margin-bottom":"10px"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1)])]),t._v(" "),s("tr",[s("td",{attrs:{width:"16.5%"}},[s("span",[t._v("父级菜单")])]),t._v(" "),s("td",[s("div",{staticStyle:{"margin-bottom":"10px"}},[s("el-input",{attrs:{placeholder:"请输入"},on:{focus:t.getFmenu},model:{value:t.formData.permissionParentName,callback:function(e){t.$set(t.formData,"permissionParentName",e)},expression:"formData.permissionParentName"}})],1)]),t._v(" "),s("td",{attrs:{width:"16.5%"}},[s("span",{staticClass:"rCode"},[t._v("菜单级别")])]),t._v(" "),s("td",[s("el-form-item",{attrs:{prop:"permissionLevel"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formData.permissionLevel,callback:function(e){t.$set(t.formData,"permissionLevel",e)},expression:"formData.permissionLevel"}})],1)],1)]),t._v(" "),s("tr",[s("td",{attrs:{width:"16.5%"}},[s("span",{staticClass:"rCode"},[t._v("菜单顺序")])]),t._v(" "),s("td",[s("el-form-item",{attrs:{prop:"seqNum"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formData.seqNum,callback:function(e){t.$set(t.formData,"seqNum",e)},expression:"formData.seqNum"}})],1)],1),t._v(" "),s("td",{attrs:{width:"16.5%"}},[s("span",[t._v("菜单图标")])]),t._v(" "),s("td",[s("div",{staticStyle:{"margin-bottom":"10px"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formData.permissionPictureUrl,callback:function(e){t.$set(t.formData,"permissionPictureUrl",e)},expression:"formData.permissionPictureUrl"}})],1)])]),t._v(" "),s("tr",[s("td",{attrs:{width:"16.5%"}},[s("span",[t._v("是否启用")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"},attrs:{colspan:"3"}},[s("div",{staticStyle:{"margin-bottom":"10px"}},[s("el-radio",{attrs:{label:"1"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[t._v("是")]),t._v(" "),s("el-radio",{attrs:{label:"2"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[t._v("否")])],1)])]),t._v(" "),s("tr",[s("td",{attrs:{width:"16.5%"}},[s("span",[t._v("菜单描述")])]),t._v(" "),s("td",{attrs:{colspan:"3"}},[s("el-input",{attrs:{placeholder:"请输入",type:"textarea"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)])])])],1),t._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){return t.submit("ruleForm")}}},[t._v("提交")]),t._v(" "),s("el-button",{attrs:{type:"noticonsecondBtn"},on:{click:function(e){return t.cancel("ruleForm")}}},[t._v("取消")])],1)]),t._v(" "),s("el-dialog",{attrs:{visible:t.visiDialogF,width:"920px",title:"父级菜单","before-close":t.closess},on:{"update:visible":function(e){t.visiDialogF=e}}},[s("div",{staticClass:"dialogcontent"},[s("el-table",{ref:"multipleTable",attrs:{border:"",data:t.fTableData,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{select:t.selectChangeF,"select-all":t.selectAll}},[s("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"菜单名称"}}),t._v(" "),s("el-table-column",{attrs:{prop:"url",label:"菜单地址"}})],1)],1),t._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.sureSelect}},[t._v("确定")]),t._v(" "),s("el-button",{attrs:{type:"noticonsecondBtn"},on:{click:t.cencelSelect}},[t._v("返回")])],1)])],1)},staticRenderFns:[]};var r=s("VU/8")(a,i,!1,function(t){s("S9t/")},"data-v-f54b586a",null);e.default=r.exports},"S9t/":function(t,e){}});
//# sourceMappingURL=25.561d6223a7cf02de1e60.js.map