webpackJsonp([37],{WXUe:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"",data:function(){return{dateRange:[],factorModel:"",factorData:[],stationId:"",loading:!0,dataStatus:""}},created:function(){this.initTime()},mounted:function(){},methods:{initTime:function(){var t=(new Date).setDate((new Date).getDate()-3),e=new Date;this.dateRange=[new Date(t).format("yyyy-MM-dd hh:mm:ss"),e.format("yyyy-MM-dd hh:mm:ss")]},initEchart:function(t,e,a,n,o){var i={title:{text:e+"变化趋势分析图",x:"center"},grid:{left:"10%",right:"10%",top:"10%",bottom:"10%"},tooltip:{trigger:"axis"},legend:{data:a,y:"bottom"},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:n},yAxis:{type:"value",name:"监测值("+t+")"},series:[{name:e,type:"line",data:o,markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}}]},s=this.$echarts.init(document.getElementById("echartbox"));s.setOption(i),s.on("click",function(t){console.log(t)})},selectChange:function(t){},getFactor:function(){var t=this;this.$http.post("/SiteManagement/index/query").then(function(e){0==e.data.code&&(t.factorData=e.data.content.dataList,t.factorModel=t.factorData[0].projectCode,t.getEchartData())})},getEchartData:function(){var t=this;this.loading=!0,this.dataStatus="",this.$http.get("/StatisticsAndAlarm/dataCharts/singleDatasCharts",{params:{stationCode:this.stationId,factorCode:this.factorModel,startTime:this.dateRange[0],endTime:this.dateRange[1],type:"hour"}}).then(function(e){if(t.loading=!1,0==e.data.code){if(!e.data.content)return t.$echarts.init(document.getElementById("echartbox")).clear(),t.dataStatus="no",!1;t.dataStatus="";var a=e.data.content.info,n=a.legend,o=a.xAxis;if(a.series&&a.series.length>0){var i=a.series[0].name,s=a.series[0].data,r=a.series[0].unit;t.initEchart(r,i,n,o,s)}}})}},computed:{stationInfo:{get:function(){return this.$store.state.stationInfo}},detailTree:{get:function(){return this.$store.state.detailTree}}},watch:{stationInfo:function(t){t.length>0&&(this.stationId=t[0].nodeId,this.getFactor())},detailTree:function(t){this.$echarts.init(document.getElementById("echartbox")).clear()}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"singlePage secondary-page-mode"},[a("div",{staticClass:"secondary-toolbar"},[a("span",[t._v("时间选择 : ")]),t._v(" \n        "),a("div",{staticClass:"layoutBox",staticStyle:{width:"380px"}},[a("el-date-picker",{attrs:{type:"datetimerange",align:"left",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),t._v("  \n        "),a("span",[t._v("监测项目 : ")]),t._v(" \n        "),a("div",{staticClass:"layoutBox",staticStyle:{width:"120px"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.selectChange},model:{value:t.factorModel,callback:function(e){t.factorModel=e},expression:"factorModel"}},t._l(t.factorData,function(t){return a("el-option",{key:t.projectCode,attrs:{label:t.projectName,value:t.projectCode}})}),1)],1),t._v("  \n        "),a("el-button",{on:{click:t.getEchartData}},[a("i",{staticClass:"iconfont icon-sousuo"}),t._v("查询")])],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"currency-mode-wrap",staticStyle:{position:"relative"},attrs:{"element-loading-text":"加载中","element-loading-spinner":"loading-type-a","element-loading-background":"rgba(255, 255, 255, 1)"}},[a("div",{staticClass:"echartbox",attrs:{id:"echartbox"}}),t._v(" "),"no"==t.dataStatus?a("yf-Datastatus",{attrs:{dataStatus:t.dataStatus}}):t._e()],1)])},staticRenderFns:[]};var i=a("VU/8")(n,o,!1,function(t){a("weNX")},null,null);e.default=i.exports},weNX:function(t,e){}});
//# sourceMappingURL=37.40b3b66d604988f896c2.js.map