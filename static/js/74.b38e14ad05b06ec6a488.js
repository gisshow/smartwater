webpackJsonp([74],{BxVQ:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("dwSH"),s={name:"intervenExami",data:function(){return{dateRange:"",value:["w01019","w21003","w21011","w21001"],optionData:[{value:"w01019",label:"高锰酸盐"},{value:"w21003",label:"氨氮"},{value:"w21011",label:"总磷"},{value:"w21001",label:"总氮"}],currentPage:1,pageSize:1,pageList:[5,10,15],total:1,stateRadio:"1",tableData:[],chartList:[],stationName:"",stationId:""}},computed:{totalPageNumber:function(){var t;return 0===(t=Math.ceil(this.total/this.pageSize))?1:t},stationInfo:{get:function(){return this.$store.state.stationInfo}}},methods:{toggleTable:function(t){t.toggle?t.toggle=!1:t.toggle=!0},toggleTab:function(t){var a=this;"2"===t&&setTimeout(function(){a.createdChart()},500)},search:function(){this.getTableData(),this.searchChartData()},getTableData:function(){var t=this;this.$http.get("/Quality/testData/integratedInterventionData",{params:{startTime:this.dateRange,endTime:this.dateRange,indexCodes:this.value.join(","),stationCodes:this.stationId,ifCurrentSection:!0}}).then(function(a){0===a.data.code&&(t.tableData=a.data.content.dataList,t.tableData.forEach(function(a,e){t.$set(a,"toggle",!1)}))})},setChartId:function(t){return"zeroDrift"+t},createdChart:function(){this.$echarts.init(document.querySelector(".zeroDriftChart")).clear();for(var t=0;t<this.chartList.length;t++){var a=this.$echarts.init(document.getElementById("zeroDrift"+t)),e={xAxis:{type:"category",name:"时间",data:this.chartList[t].xAxis},legend:{data:[this.chartList[t].name],bottom:0},yAxis:{type:"value",name:"相对误差(%)"},visualMap:{top:10,right:-100,pieces:[{gte:this.chartList[t].lower,lte:this.chartList[t].upper,color:"#009966",label:"合格"},{gt:this.chartList[t].upper,color:"#d68787",label:"不合格"}],outOfRange:{color:"#d68787"}},grid:{top:50,left:80,bottom:50,right:70},series:[{data:this.chartList[t].yAxis,name:this.chartList[t].name,type:"line",symbol:"triangle",symbolSize:20,lineStyle:{normal:{color:"#008000",width:4,type:"dashed"}},itemStyle:{normal:{borderWidth:3,color:"#0ec15a"}},markLine:{lineStyle:{color:"red",type:"solid"},data:[{yAxis:this.chartList[t].upper,name:"最大误差"},{yAxis:this.chartList[t].lower,name:"最小误差"}]}}]};a.setOption(e)}},searchChartData:function(){var t=this;this.$http.get("/Quality/testData/integratedInterventionChartData",{params:{startTime:this.dateRange,endTime:this.dateRange,indexCodes:this.value.join(","),stationCodes:this.stationId}}).then(function(a){0===a.data.code&&(t.chartList=a.data.content.dataList)})},exportExcel:function(){var t=this.$refs.tableHead,a=this.stationName+"集成干预检查",e={headerProp:"indexName,indexUnit,automaticSamplingValue,artificiaSamplingValue,error,technicalCequirement,qualification",startTime:this.dateRange,endTime:this.dateRange,indexCodes:this.value.join(","),stationCodes:this.stationId,tableType:"INTEGRATED_INTERVENTION_DATA",ifCurrentSection:!0,pattern:"yyyy-MM-dd HH:mm:ss"};Object(i.a)(t,a,"","1","/Quality/exports/qualityControlExcel",e)}},mounted:function(){},created:function(){this.$store.commit("setShowlefttree",!0),this.dateRange=new Date},watch:{stationInfo:function(t){t.length>0&&(this.stationId=t[0].nodeId,this.stationName=t[0].nodeName,this.getTableData(),this.searchChartData())}}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"sampleComparison tapStyle secondary-page-mode"},[e("div",{staticClass:"secondary-toolbar"},[e("span",[t._v("时间选择 : ")]),t._v(" "),e("div",{staticClass:"layoutBox",staticStyle:{width:"110px"}},[e("el-date-picker",{attrs:{type:"month","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM"},model:{value:t.dateRange,callback:function(a){t.dateRange=a},expression:"dateRange"}})],1),t._v("  \n    "),e("span",[t._v("监测项目 : ")]),t._v(" "),e("div",{staticClass:"layoutBox",staticStyle:{width:"190px"}},[e("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.value,callback:function(a){t.value=a},expression:"value"}},t._l(t.optionData,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v("  \n    "),e("el-button",{on:{click:function(a){return t.search()}}},[e("i",{staticClass:"iconfont icon-sousuo"}),t._v("查询")]),t._v(" "),e("el-button",{attrs:{type:"delet"},on:{click:function(a){return t.exportExcel()}}},[e("i",{staticClass:"iconfont icon-daochu"}),t._v("导出")])],1),t._v(" "),e("div",{staticClass:"currency-mode-wrap scrollSpecial"},[e("div",{staticClass:"reminder-wrap"},[e("span",{staticClass:"reminder-title"},[t._v("温馨提示")]),t._v(" "),e("div",{staticClass:"reminder-content"},[e("div",{staticClass:"reminder-text"},[e("p",[t._v("所选时间段内共有“多点线性核查移”x次，共有合格项m次，不合格项y次。影响数据n条。点位1、点位2的上次周核查时间距今已有7天；站点3的上次周核查距今已有6天。")]),t._v(" "),e("div",[e("el-button",{attrs:{type:"noticonsecondBtn"}},[t._v(" 生成任务 ")])],1)])]),t._v(" "),e("div",{staticClass:"reminder-toolbar"},[t._m(0),t._v(" "),e("div",{staticClass:"state-radio-wrap"},[e("el-radio-group",{attrs:{size:"small"},on:{change:t.toggleTab},model:{value:t.stateRadio,callback:function(a){t.stateRadio=a},expression:"stateRadio"}},[e("el-radio-button",{attrs:{label:"1"}},[t._v("当前断面")]),t._v(" "),e("el-radio-button",{attrs:{label:"2"}},[t._v("图表")])],1)],1)])]),t._v(" "),e("div",{staticClass:"currency-body-toggle"},[e("div",{directives:[{name:"show",rawName:"v-show",value:"1"===t.stateRadio,expression:"stateRadio === '1'"}],staticStyle:{height:"100%"}},[e("div",{staticClass:"table-head"},[e("table",{ref:"tableHead"},[t._m(1),t._v(" "),t._m(2)])]),t._v(" "),e("el-scrollbar",{staticStyle:{height:"calc(100% - 62px)"}},[e("ul",{staticClass:"table-body"},t._l(t.tableData,function(a,i){return e("li",[e("div",{staticClass:"toggle-row",class:{active:a.toggle}},[e("i",{staticClass:"toggle-icon",class:{active:a.toggle},on:{click:function(e){return t.toggleTable(a)}}}),t._v(" "),e("span",[t._v("自动取样时间："+t._s(a.automaticSamplingTime))]),t._v(", \n                "),e("span",[t._v("人工采样时间："+t._s(a.artificiaSamplingTime))])]),t._v(" "),e("el-collapse-transition",[a.toggle?e("div",[e("table",t._l(a.list,function(a,i){return e("tr",[e("td",{attrs:{width:"3%"}},[t._v(t._s(i+1))]),t._v(" "),e("td",{attrs:{width:"14%"}},[t._v(t._s(a.indexName))]),t._v(" "),e("td",{attrs:{width:"10%"}},[t._v(t._s(a.indexUnit))]),t._v(" "),e("td",{attrs:{width:"15%"}},[t._v(t._s(a.automaticSamplingValue))]),t._v(" "),e("td",{attrs:{width:"15%"}},[t._v(t._s(a.artificiaSamplingValue))]),t._v(" "),e("td",{attrs:{width:"16%"}},[t._v(t._s(a.error))]),t._v(" "),e("td",{attrs:{width:"17%"}},[t._v(t._s(a.technicalCequirement))]),t._v(" "),e("td",{attrs:{width:"16%"}},["合格"===a.qualification?e("b",[t._v("合格")]):t._e(),t._v(" "),"不合格"===a.qualification?e("b",{staticStyle:{color:"red"}},[t._v("不合格")]):t._e()])])}),0)]):t._e()])],1)}),0)])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"2"===t.stateRadio,expression:"stateRadio === '2'"}],staticClass:"chart-wrap",staticStyle:{height:"100%"}},[e("el-scrollbar",{staticStyle:{height:"100%"}},["2"===t.stateRadio?e("div",t._l(t.chartList,function(a,i){return e("div",{key:"k"+i,staticClass:"zeroDriftChart",staticStyle:{height:"300px"},attrs:{id:t.setChartId(i)}})}),0):t._e()])],1)])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"state-legend"},[a("span",[a("i",{staticClass:"qualified-icon"}),this._v(" 合格")]),this._v(" "),a("span",[a("i",{staticClass:"unqualified-icon"}),this._v(" 不合格")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("tr",[e("th",{attrs:{width:"3%",rowspan:"2"}},[t._v("序号")]),t._v(" "),e("th",{attrs:{width:"14%",rowspan:"2"}},[t._v("监测项目")]),t._v(" "),e("th",{attrs:{width:"10%",rowspan:"2"}},[t._v("单位")]),t._v(" "),e("th",{attrs:{colspan:"2"}},[t._v("仪器测试值")]),t._v(" "),e("th",{attrs:{width:"16%",rowspan:"2"}},[t._v("误差率")]),t._v(" "),e("th",{attrs:{width:"17%",rowspan:"2"}},[t._v("技术要求")]),t._v(" "),e("th",{attrs:{width:"16%",rowspan:"2"}},[t._v("是否合格")]),t._v(" "),e("th",{staticStyle:{width:"0px",display:"none"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("tr",[a("td",{attrs:{width:"15%"}},[this._v("自动取样")]),this._v(" "),a("td",{attrs:{width:"15%"}},[this._v("人工采样")]),this._v(" "),a("th",{staticStyle:{width:"0px",display:"none"}})])}]};var r=e("VU/8")(s,n,!1,function(t){e("QPN8")},null,null);a.default=r.exports},QPN8:function(t,a){}});
//# sourceMappingURL=74.b38e14ad05b06ec6a488.js.map