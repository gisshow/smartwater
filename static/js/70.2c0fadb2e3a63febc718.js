webpackJsonp([70],{"3Pv8":function(e,a){},kbBt:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={name:"",data:function(){return{searchModel:"",visiDialog_add:!1,tableData:[],optionFarea:[],targetLevelData:[],formData:{code:"",name:"",fatherCode:"",levelId:"",remark:"",aimWaterLevel:"",sort:""},formRules:{name:[{required:!0,message:"请输入区域名称",trigger:"blur"}],code:[{required:!0,message:"请输入区域编码",trigger:"blur"}],sort:[{required:!0,message:"请输入排序号",trigger:"blur"}],levelId:[{required:!0,message:"请选择区域级别",trigger:"change"}],aimWaterLevel:[{required:!0,message:"请选择水质目标等级",trigger:"change"}]},areaLevData:[{name:"省级",value:"ffbb7faf62044604b7fae55a75303c22"},{name:"市级",value:"ffbb7faf62044604b7fae55a75303c23"},{name:"区级",value:"ffbb7faf62044604b7fae55a75303c30"}],loading:!0,currentPage:1,total:0,pageSize:10,pageList:[10,15,20],isEditor:!1,areaId:""}},created:function(){this.init()},mounted:function(){},inject:["globelDelet"],methods:{selectChange:function(e,a){var t=e;for(var r in this.areaId="",t)this.areaId+=t[r].areaId+",";this.areaId=this.areaId.substring(0,this.areaId.length-1)},delet:function(e){this.globelDelet("/SiteManagement/area/delete",e,this.getTableData)},allDelet:function(){this.globelDelet("/SiteManagement/area/delete",this.areaId,this.getTableData)},init:function(){var e=this;this.$http.get("/SiteManagement/station/queryTargetLevel").then(function(a){0==a.data.code&&(e.targetLevelData=a.data.content.dataList)}),this.getTableData()},getTableData:function(){var e=this;this.loading=!0,this.$http.get("/SiteManagement/area/areaTree",{params:{name:this.searchModel}}).then(function(a){0==a.data.code&&(e.tableData=a.data.content.dataList,e.loading=!1)})},addData:function(){this.visiDialog_add=!0,this.isEditor=!1},submitForm:function(e){var a=this;this.$refs[e].validate(function(t){if(!t)return!1;if(a.isEditor){var r={};r.name=a.formData.name,r.code=a.formData.code,r.fatherCode=a.formData.fatherCode,r.levelId=a.formData.levelId,r.aimWaterLevel=a.formData.aimWaterLevel,r.sort=a.formData.sort,r.remark=a.formData.remark,r.areaId=a.areaId,a.$http.post("/SiteManagement/area/addOrEdit",r).then(function(t){0==t.data.code&&(a.$message({message:t.data.message,type:"success",duration:1500}),a.visiDialog_add=!1,a.resetForm(e),a.getTableData())})}else{var o={};o.name=a.formData.name,o.code=a.formData.code,o.fatherCode=a.formData.fatherCode,o.levelId=a.formData.levelId,o.aimWaterLevel=a.formData.aimWaterLevel,o.sort=a.formData.sort,o.remark=a.formData.remark,a.$http.post("/SiteManagement/area/addOrEdit",o).then(function(t){0==t.data.code&&(a.$message({message:t.data.message,type:"success",duration:1500}),a.visiDialog_add=!1,a.resetForm(e),a.getTableData())})}})},resetForm:function(e){this.$refs[e].resetFields(),this.optionFarea=[],this.formData={code:"",name:"",fatherCode:"",levelId:"",remark:"",aimWaterLevel:"",sort:""}},areaLevChange:function(e){var a=this,t="";if("ffbb7faf62044604b7fae55a75303c22"==e)return this.optionFarea=[],!1;"ffbb7faf62044604b7fae55a75303c23"==e?t=1:"ffbb7faf62044604b7fae55a75303c30"==e&&(t=2),this.$http.post("/SiteManagement/area/query",this.paramsObj.GetPageData_P("area",this.currentPage,this.pageSize,[t],!1)).then(function(e){0==e.data.code&&(a.optionFarea=e.data.content.dataList)})},editorData:function(e){var a=this;console.log(e),this.visiDialog_add=!0,this.isEditor=!0,this.areaId=e.areaId;var t="";"ffbb7faf62044604b7fae55a75303c22"==e.areaLevel.areaLevelId?this.optionFarea=[]:"ffbb7faf62044604b7fae55a75303c23"==e.areaLevel.areaLevelId?(t=1,this.$http.post("/SiteManagement/area/query",this.paramsObj.GetPageData_P("area",this.currentPage,this.pageSize,[t],!1)).then(function(e){0==e.data.code&&(a.optionFarea=e.data.content.dataList)})):"ffbb7faf62044604b7fae55a75303c30"==e.areaLevel.areaLevelId&&(t=2,this.$http.post("/SiteManagement/area/query",this.paramsObj.GetPageData_P("area",this.currentPage,this.pageSize,[t],!1)).then(function(e){0==e.data.code&&(a.optionFarea=e.data.content.dataList)})),this.formData={code:e.areaCode,name:e.areaName,fatherCode:e.parentId,levelId:e.areaLevel.areaLevelId,remark:e.remark,aimWaterLevel:e.aimWaterLevel,sort:e.sort}},paginationSizeChange:function(e){this.pageSize=e,this.getTableData()},paginationChange:function(e){this.currentPage=e,this.getTableData()},cancelForm:function(e){this.visiDialog_add=!1,this.resetForm(e)},closess:function(e){e(),this.resetForm("form")}},computed:{totalPageNumber:function(){return Math.ceil(this.total/this.pageSize)}}},o={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"trafficpage secondary-page-mode"},[t("div",{staticClass:"secondary-toolbar"},[t("span",[e._v("关键字 : ")]),e._v(" "),t("div",{staticClass:"layoutBox",staticStyle:{width:"220px"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.searchModel,callback:function(a){e.searchModel=a},expression:"searchModel"}})],1),e._v("  \n         "),t("el-button",{on:{click:e.getTableData}},[t("i",{staticClass:"iconfont icon-sousuo"}),e._v("查询")]),e._v(" "),t("el-button",{on:{click:e.addData}},[t("i",{staticClass:"iconfont icon-tianjia1"}),e._v("新增")]),e._v(" "),t("el-button",{attrs:{type:"delet"},on:{click:e.allDelet}},[t("i",{staticClass:"iconfont icon-shanchu"}),e._v("批量删除")])],1),e._v(" "),t("div",{staticClass:"currency-mode-wrap"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.tableData,"element-loading-text":"加载中","element-loading-spinner":"loading-type-a","element-loading-background":"rgba(255, 255, 255, 1)",height:"100%","row-key":"areaId","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.selectChange}},[t("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),t("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),t("el-table-column",{attrs:{prop:"areaName",label:"区域名称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"areaCode",label:"区域编码"}}),e._v(" "),t("el-table-column",{attrs:{prop:"parentId",label:"区域父编码"}}),e._v(" "),t("el-table-column",{attrs:{prop:"status",label:"区域级别"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v("\n                            "+e._s(a.row.areaLevel.areaLevelName)+"\n                        ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"aimWaterLevel",label:"水质目标等级"}}),e._v(" "),t("el-table-column",{attrs:{prop:"sort",label:"排序"}}),e._v(" "),t("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[t("el-button",{attrs:{type:"secondBtn"},on:{click:function(t){return e.editorData(a.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{attrs:{type:"secondBtn"},on:{click:function(t){return e.delet(a.row.areaId)}}},[e._v("删除")])],1)]}}])})],1)],1),e._v(" "),t("el-dialog",{attrs:{visible:e.visiDialog_add,width:"920px",title:"区域新增","before-close":e.closess},on:{"update:visible":function(a){e.visiDialog_add=a}}},[t("div",{staticClass:"dialogcontent"},[t("div",{staticClass:"dialog-layout"},[t("el-form",{ref:"form",attrs:{model:e.formData,rules:e.formRules}},[t("table",{staticClass:"whTable"},[t("tr",[t("td",{attrs:{width:"16.5%"}},[t("span",{staticClass:"rCode"},[e._v("区域名称")])]),e._v(" "),t("td",[t("el-form-item",{attrs:{prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formData.name,callback:function(a){e.$set(e.formData,"name",a)},expression:"formData.name"}})],1)],1),e._v(" "),t("td",{attrs:{width:"16.5%"}},[t("span",{staticClass:"rCode"},[e._v("区域编码")])]),e._v(" "),t("td",[t("el-form-item",{attrs:{prop:"code"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formData.code,callback:function(a){e.$set(e.formData,"code",a)},expression:"formData.code"}})],1)],1)]),e._v(" "),t("tr",[t("td",{attrs:{width:"16.5%"}},[t("span",{staticClass:"rCode"},[e._v("区域级别")])]),e._v(" "),t("td",[t("el-form-item",{attrs:{prop:"levelId"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.areaLevChange},model:{value:e.formData.levelId,callback:function(a){e.$set(e.formData,"levelId",a)},expression:"formData.levelId"}},e._l(e.areaLevData,function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1)],1),e._v(" "),t("td",{attrs:{width:"16.5%"}},[t("span",[e._v("父级区域")])]),e._v(" "),t("td",[t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.fatherCode,callback:function(a){e.$set(e.formData,"fatherCode",a)},expression:"formData.fatherCode"}},e._l(e.optionFarea,function(e){return t("el-option",{key:e.areaCode,attrs:{label:e.areaName,value:e.areaCode}})}),1)],1)])]),e._v(" "),t("tr",[t("td",{attrs:{width:"16.5%"}},[t("span",{staticClass:"rCode"},[e._v("水质目标等级")])]),e._v(" "),t("td",[t("el-form-item",{attrs:{prop:"aimWaterLevel"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.aimWaterLevel,callback:function(a){e.$set(e.formData,"aimWaterLevel",a)},expression:"formData.aimWaterLevel"}},e._l(e.targetLevelData,function(e){return t("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}),1)],1)],1),e._v(" "),t("td",{attrs:{width:"16.5%"}},[t("span",{staticClass:"rCode"},[e._v("排序")])]),e._v(" "),t("td",[t("el-form-item",{attrs:{prop:"sort"}},[t("el-input",{attrs:{placeholder:"请输入",type:"number"},model:{value:e.formData.sort,callback:function(a){e.$set(e.formData,"sort",a)},expression:"formData.sort"}})],1)],1)]),e._v(" "),t("tr",[t("td",{attrs:{width:"16.5%"}},[t("span",[e._v("备注")])]),e._v(" "),t("td",{attrs:{colspan:"3"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formData.remark,callback:function(a){e.$set(e.formData,"remark",a)},expression:"formData.remark"}})],1)])])])],1)]),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"noticon"},on:{click:function(a){return e.submitForm("form")}}},[e._v("保 存")]),e._v(" "),t("el-button",{attrs:{type:"noticonsecondBtn"},on:{click:function(a){return e.cancelForm("form")}}},[e._v("关 闭")])],1)])],1)},staticRenderFns:[]};var l=t("VU/8")(r,o,!1,function(e){t("3Pv8")},"data-v-54f8f6cd",null);a.default=l.exports}});
//# sourceMappingURL=70.2c0fadb2e3a63febc718.js.map