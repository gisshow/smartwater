{"version":3,"sources":["webpack:///src/views/colligateApplication/multiStationPresentation.vue","webpack:///./src/views/colligateApplication/multiStationPresentation.vue?1113","webpack:///./src/views/colligateApplication/multiStationPresentation.vue"],"names":["dataTypeList","name","type","pickerOptions","shortcuts","text","onClick","picker","end","Date","start","setTime","getTime","$emit","multiStationPresentation","data","reportLoading","reportNoDataState","dataType","dataValue","tableData","headtitle","evaluationdis","headcolumn","headtimetype","htmlTitle","siteChecked","methods","setWidth","str","num","length","toWQLString","wql","exportPdf","statisType","this","startTime","endTime","Object","dateformat","date","convertDateFromString","setDate","getDate","setMonth","getMonth","setFullYear","getFullYear","structureType","window","open","id","toString","dataTypeToggle","index","getSiteCheckedNodes","nodes","openPage","historicalDataSearch","initTime","searchcolumn","_this2","paramsp","equipIds","areaIds","riverIds","$http","get","params","then","response","dataJson","code","content","dataList","catch","error","checksiteinit","self","timer","setInterval","clearInterval","dateString","replace","initTitle","node","statisTypeName","label","_this3","equipdIds","queryType","total","info","mounted","created","$store","commit","state","stationInfo","computed","station","watch","newvalue","colligateApplication_multiStationPresentation","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_l","item","key","class","active","attrs","size","plain","on","click","$event","_s","staticStyle","width","placeholder","model","value","callback","$$v","expression","position","_e","empty-text","border","fixed","prop","show-overflow-tooltip","align","projectName","property","projectCode","scopedSlots","_u","fn","scope","row","proj","waterQualityLevel","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/76.17301e4a33e648fdcfd1.js","sourcesContent":["<template>\r\n  <!--多站报告-->\r\n  <div class=\"single-station-report-page\">\r\n    <div class=\"secondary-page-mode\">\r\n      <div class=\"secondary-toolbar\">\r\n        <span>数据类型：</span>\r\n        <el-button-group>\r\n          <el-button\r\n            :class=\"{active:dataType === index}\"\r\n            size=\"small\" type=\"primary\" plain\r\n            :key = \"index\"\r\n            v-for=\"(item,index) in dataTypeList\"\r\n            @click=\"dataTypeToggle(index)\"\r\n          >{{ item.name }}</el-button>\r\n        </el-button-group>&emsp;\r\n        <span>时间段：</span>\r\n        <div class=\"layoutBox\" style=\"width:242px\">\r\n          <el-date-picker\r\n            v-model = \"dataValue\"\r\n            :type=\"headtimetype\"\r\n            placeholder=\"选择时间\">\r\n          </el-date-picker>\r\n        </div>&emsp;\r\n        <el-button @click=\"historicalDataSearch\"><i class=\"iconfont icon-sousuo\"></i>生成</el-button>\r\n        <el-button type='delet' @click=\"exportPdf\"><i class=\"iconfont icon-daochu\"></i>导出</el-button>\r\n      </div>\r\n      <div class=\"currency-mode-wrap\">\r\n\r\n        <el-scrollbar class=\"currency-mode-scroll\" >\r\n          <h4 class=\"report-form-title\">{{headtitle}}</h4>\r\n          <p class=\"report-notes-text\">{{evaluationdis}}\r\n          <div class=\"report-table-wrap\" style=\"position: relative;\">\r\n            <div v-if=\"reportLoading\" class=\"loading-wrap\"></div>\r\n            <div v-if=\"reportNoDataState\" class=\"no-data-wrap small no-data-table\">\r\n                <p>暂无数据</p>\r\n            </div>\r\n            <el-table\r\n              :data=\"tableData\"\r\n              empty-text=\" \"\r\n              border\r\n              style=\"width: 100%\">\r\n              <el-table-column\r\n                type=\"index\"\r\n                label=\"序号\"\r\n                fixed\r\n                width=\"50\">\r\n              </el-table-column>\r\n              <el-table-column\r\n                  prop=\"name\"\r\n                  fixed\r\n                  label=\"河道-站点名称\"\r\n                  :show-overflow-tooltip = 'true'\r\n                  width=\"230\">\r\n              </el-table-column>\r\n              <el-table-column label=\"单因子评价\" align=\"center\">\r\n                <el-table-column :key=\"index\" v-for=\"(item,index) in headcolumn\"\r\n                                 :label=\"item.projectName\"\r\n                                 :width=\"setWidth(item.projectName)\"\r\n                                 :property=\"item.projectCode\">\r\n                  <template slot-scope=\"scope\">\r\n                    <div class=\"data-table-cell\" v-for=\"(proj,key) in scope.row.projects\" :key=\"key\">\r\n                            <span\r\n                              v-if=\"proj.code==item.projectCode\"\r\n                            >{{ proj.value}}\r\n                            </span>\r\n                    </div>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                  prop=\"waterQualityLevel\"\r\n                  label=\"水质类别\">\r\n                  <template slot-scope=\"scope\">\r\n                    <span>\r\n                      {{toWQLString(scope.row.waterQualityLevel)}}\r\n                    </span>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                  prop=\"evaluation\"\r\n                  label=\"水质状况\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                  prop=\"primaryPollutant\"\r\n                  :show-overflow-tooltip = 'true'\r\n                  width=\"166\"\r\n                  label=\"主要污染物（超标倍数）\">\r\n                </el-table-column>\r\n              </el-table-column>\r\n            </el-table>\r\n          </div>\r\n        </el-scrollbar>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n   import {formatDate} from '../../assets/js/dateformat'\r\n  let dataTypeList = [{\r\n    name:'日报',\r\n    type:'hour'\r\n  },{\r\n    name:'月报',\r\n    type:'day'\r\n  },{\r\n    name:'年报',\r\n    type:'month'\r\n  }];\r\n  let pickerOptions = {\r\n    shortcuts: [{\r\n      text: '最近一周',\r\n      onClick(picker) {\r\n        const end = new Date();\r\n        const start = new Date();\r\n        start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\r\n        picker.$emit('pick', [start, end]);\r\n      }\r\n    }, {\r\n      text: '最近一个月',\r\n      onClick(picker) {\r\n        const end = new Date();\r\n        const start = new Date();\r\n        start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\r\n        picker.$emit('pick', [start, end]);\r\n      }\r\n    }, {\r\n      text: '最近三个月',\r\n      onClick(picker) {\r\n        const end = new Date();\r\n        const start = new Date();\r\n        start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\r\n        picker.$emit('pick', [start, end]);\r\n      }\r\n    }]\r\n  };\r\n  let headcolumn={\r\n    enabled:1,\r\n    metal:0,\r\n    projectCode:\"w01018\",\r\n    projectId:187,\r\n    projectName:\"COD\",\r\n    projectType:\"428F3127A91D467CA8F1EA2749CC087E\",\r\n    projectUnit:\"mg/L\",\r\n    scale:2\r\n  };\r\n  export default {\r\n    name: \"multiStationPresentation\",\r\n    data(){\r\n      return {\r\n        reportLoading: true,\r\n        reportNoDataState: false,\r\n        dataTypeList,//数据类型\r\n        dataType:0,//数据类型选中下标\r\n        pickerOptions,//时间快捷菜单数据\r\n        dataValue:'',//时间绑定数据\r\n        tableData:[],//表格数据\r\n        headtitle:'',\r\n        evaluationdis:'',\r\n        headcolumn:[],\r\n        headtimetype:'date',\r\n        htmlTitle: '页面导出PDF文件名',\r\n        siteChecked: null,\r\n      }\r\n    },\r\n    methods:{\r\n      setWidth(str){\r\n        if(str){\r\n          let num = str.length;\r\n          return (num*14+20)>104?(num*14+20):104;\r\n        }\r\n      },\r\n      toWQLString(wql){\r\n        if(wql=='1'){\r\n          return 'Ⅰ类';\r\n        }else if(wql=='2'){\r\n          return 'Ⅱ类';\r\n        }else if(wql=='3'){\r\n          return \"Ⅲ类\"\r\n        }else if(wql=='4'){\r\n          return \"Ⅳ类\";\r\n        }else if(wql=='5'){\r\n          return \"Ⅴ类\";\r\n        }else if(wql=='6'){\r\n          return \"劣Ⅴ类\";\r\n        }else {\r\n          return '';\r\n        }\r\n      },\r\n      exportPdf(){\r\n        var statisType=dataTypeList[this.dataType].type;\r\n        var startTime=\"\";\r\n        var endTime=\"\";\r\n        if(this.headtimetype=='date'){\r\n          startTime=formatDate(this.dataValue,'yyyy-MM-dd 00:00:00');\r\n          var date=this.convertDateFromString(startTime);     \r\n          date.setDate(date.getDate()+1);\r\n          endTime=formatDate(date,'yyyy-MM-dd 00:00:00');\r\n        }else if(this.headtimetype==\"month\"){\r\n          startTime=formatDate(this.dataValue,'yyyy-MM-01 00:00:00');\r\n          var date=this.convertDateFromString(startTime);     \r\n          date.setMonth(date.getMonth()+1);\r\n          endTime=formatDate(date,'yyyy-MM-01 00:00:00');\r\n        }else{\r\n          startTime=formatDate(this.dataValue,'yyyy-01-01 00:00:00');\r\n          var date=this.convertDateFromString(startTime);     \r\n          date.setFullYear(date.getFullYear()+1);\r\n          endTime=formatDate(date,'yyyy-01-01 00:00:00');\r\n        }\r\n        if(this.siteChecked.structureType=='area'){\r\n          window.open(\"/waterenvapi/report/autoStationMuiltiBaogaoExport?queryType=station&areaIds=\"+this.siteChecked.id.toString()+'&statisType='+statisType+'&startTime='+startTime+'&endTime='+endTime);  \r\n        }else if(this.siteChecked.structureType=='river'){\r\n          window.open(\"/waterenvapi/report/autoStationMuiltiBaogaoExport?queryType=station&riverIds=\"+this.siteChecked.id.toString()+'&statisType='+statisType+'&startTime='+startTime+'&endTime='+endTime);    \r\n        }else{\r\n          window.open(\"/waterenvapi/report/autoStationMuiltiBaogaoExport?queryType=station&equipdIds=\"+this.siteChecked.id.toString()+'&statisType='+statisType+'&startTime='+startTime+'&endTime='+endTime)\r\n        }\r\n      },\r\n      dataTypeToggle(index){\r\n        this.dataType = index;\r\n        if(index==0){\r\n          this.headtimetype='date';\r\n          \r\n        }else if(index==1){\r\n          this.headtimetype='month';\r\n          \r\n        }else if(index==2){\r\n          this.headtimetype='year';\r\n       \r\n        }\r\n      },\r\n      getSiteCheckedNodes(nodes){\r\n        this.siteChecked = nodes;\r\n        this.openPage = nodes.structureType;\r\n        this.historicalDataSearch();\r\n      },\r\n      initTime(){\r\n        this.dataValue=new Date();\r\n      },\r\n      searchcolumn(){\r\n        /* 基本信息请求 */\r\n        var paramsp={\r\n          equipIds: this.siteChecked.id?this.siteChecked.id.toString():'',\r\n        };\r\n        if(this.siteChecked.structureType=='area'){\r\n          paramsp={\r\n            areaIds: this.siteChecked.id.toString()\r\n          };\r\n        }else if(this.siteChecked.structureType=='river'){\r\n          paramsp={\r\n            riverIds: this.siteChecked.id.toString()\r\n          };\r\n        }\r\n        this.$http.get('/waterenvapi/basic/stationRefProjects',{\r\n          params:paramsp\r\n        }).then((response)=>{\r\n          let dataJson = response.data;\r\n          if(dataJson.code === 200){\r\n            this.headcolumn = dataJson.content.dataList;\r\n          }\r\n        }).catch((error)=>{\r\n\r\n        });\r\n      },\r\n      checksiteinit(){\r\n        var self = this;\r\n        var timer = setInterval(function(){\r\n          if(self.siteChecked){\r\n            self.historicalDataSearch();\r\n            clearInterval(timer);\r\n          }\r\n        },100);\r\n      },\r\n      convertDateFromString(dateString){\r\n        if (dateString) {\r\n          var date = new Date(dateString.replace(/-/,\"/\"))\r\n          return date;\r\n        }\r\n      },\r\n      initTitle(){\r\n        var startTime=\"\";\r\n        var endTime=\"\";\r\n        if(this.headtimetype=='date'){\r\n          startTime=formatDate(this.dataValue,'yyyy-MM-dd');\r\n          var date=this.convertDateFromString(startTime);     \r\n          date.setMonth(date.getDate()+1);\r\n          endTime=formatDate(date,'yyyy-MM-dd');\r\n        }else if(this.headtimetype==\"month\"){\r\n          startTime=formatDate(this.dataValue,'yyyy-MM');\r\n          var date=this.convertDateFromString(startTime);     \r\n          date.setMonth(date.getMonth()+1);\r\n          endTime=formatDate(date,'yyyy-MM');\r\n        }else{\r\n          startTime=formatDate(this.dataValue,'yyyy');\r\n          var date=this.convertDateFromString(startTime);     \r\n          date.setMonth(date.getFullYear()+1);\r\n          endTime=formatDate(date,'yyyy');\r\n        }\r\n        var node=this.siteChecked;\r\n        var statisTypeName=dataTypeList[this.dataType].name;\r\n        this.headtitle=node.label+startTime+statisTypeName+'表';\r\n        this.htmlTitle=node.label+startTime+statisTypeName+'表';\r\n\r\n      },\r\n      historicalDataSearch(){\r\n        let _this = this;\r\n        this.reportLoading = true;\r\n        this.reportNoDataState = false;\r\n        // if(this.siteChecked.length === 0){\r\n        //   setTimeout(function(){\r\n        //     _this.reportLoading = false;\r\n        //     _this.reportNoDataState = true;\r\n        //   },300);\r\n        //   return;\r\n        // }\r\n        this.searchcolumn();\r\n        this.initTitle();\r\n        var statisType=dataTypeList[this.dataType].type;\r\n        var startTime=\"\";\r\n        var endTime=\"\";\r\n        if(this.headtimetype=='date'){\r\n          startTime=formatDate(this.dataValue,'yyyy-MM-dd 00:00:00');\r\n          var date=this.convertDateFromString(startTime);     \r\n          date.setDate(date.getDate()+1);\r\n          endTime=formatDate(date,'yyyy-MM-dd 00:00:00');\r\n        }else if(this.headtimetype==\"month\"){\r\n          startTime=formatDate(this.dataValue,'yyyy-MM-01 00:00:00');\r\n          var date=this.convertDateFromString(startTime);     \r\n          date.setMonth(date.getMonth()+1);\r\n          endTime=formatDate(date,'yyyy-MM-01 00:00:00');\r\n        }else{\r\n          startTime=formatDate(this.dataValue,'yyyy-01-01 00:00:00');\r\n          var date=this.convertDateFromString(startTime);     \r\n          date.setFullYear(date.getFullYear()+1);\r\n          endTime=formatDate(date,'yyyy-01-01 00:00:00');\r\n        }\r\n        var paramsp={\r\n          equipdIds: this.siteChecked.id?this.siteChecked.id.toString():'',\r\n          statisType:statisType,\r\n          startTime:startTime,\r\n          endTime:endTime,\r\n          queryType:'station'\r\n        };\r\n        if(this.siteChecked.structureType=='area'){\r\n          paramsp={\r\n            areaIds: this.siteChecked.id?this.siteChecked.id.toString():'',\r\n            statisType:statisType,\r\n            startTime:startTime,\r\n            endTime:endTime,\r\n            queryType:'station'\r\n          };\r\n        }else if(this.siteChecked.structureType=='river'){\r\n          paramsp={\r\n            riverIds: this.siteChecked.id?this.siteChecked.id.toString():'',\r\n            statisType:statisType,\r\n            startTime:startTime,\r\n            endTime:endTime,\r\n            queryType:'station'\r\n          };\r\n        }\r\n        this.$http.get('/waterenvapi/report/autoStationMuiltiReport',{\r\n          params:paramsp\r\n        }).then((response)=>{\r\n          let dataJson = response.data;\r\n          if(dataJson.code === 200){\r\n            this.tableData = dataJson.content.dataList;\r\n            this.total=dataJson.content.total;\r\n            this.evaluationdis=dataJson.content.info;\r\n            if(dataJson.content.dataList.length === 0){\r\n              this.reportNoDataState = true;\r\n            }else{\r\n              this.reportNoDataState = false;\r\n            }\r\n          }\r\n          this.reportLoading = false;\r\n        }).catch((error)=>{\r\n          this.reportLoading = false;\r\n          this.reportNoDataState = true;\r\n        });\r\n      }\r\n    },\r\n    mounted(){\r\n      this.initTime();\r\n     this.historicalDataSearch()\r\n    },\r\n    created(){\r\n        this.$store.commit(\"setShowlefttree\", true);\r\n        this.siteChecked=this.$store.state.stationInfo;\r\n    },\r\n    computed:{\r\n        station(){\r\n          return this.$store.state.stationInfo\r\n        }\r\n     },\r\n    watch:{\r\n      //监听站点信息变化\r\n      station(newvalue){\r\n        this.siteChecked=newvalue;\r\n        this.historicalDataSearch()\r\n      }\r\n    },\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  .single-station-report-page{\r\n    height: 100%;\r\n    .currency-mode-wrap{\r\n      height: calc(100% - 56px);\r\n    }\r\n    .currency-mode-scroll{\r\n      height: 100%;\r\n    }\r\n    .report-form-title{\r\n      height: 28px;\r\n      line-height: 28px;\r\n      font-size: 16px;\r\n      text-align: center;\r\n      margin-top: 12px;\r\n    }\r\n    .report-form-subtitle{\r\n      text-align: center;\r\n      line-height: 24px;\r\n    }\r\n    .report-table-wrap{\r\n      padding: 10px 34px 0;\r\n      min-height: 120px;\r\n    }\r\n    .report-notes-text{\r\n      text-indent: 2em;\r\n      padding: 8px 34px;\r\n\r\n    }\r\n    .no-data-table.no-data-wrap p{\r\n      top: 82px;\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/colligateApplication/multiStationPresentation.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"single-station-report-page\"},[_c('div',{staticClass:\"secondary-page-mode\"},[_c('div',{staticClass:\"secondary-toolbar\"},[_c('span',[_vm._v(\"数据类型：\")]),_vm._v(\" \"),_c('el-button-group',_vm._l((_vm.dataTypeList),function(item,index){return _c('el-button',{key:index,class:{active:_vm.dataType === index},attrs:{\"size\":\"small\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.dataTypeToggle(index)}}},[_vm._v(_vm._s(item.name))])}),1),_vm._v(\" \\n      \"),_c('span',[_vm._v(\"时间段：\")]),_vm._v(\" \"),_c('div',{staticClass:\"layoutBox\",staticStyle:{\"width\":\"242px\"}},[_c('el-date-picker',{attrs:{\"type\":_vm.headtimetype,\"placeholder\":\"选择时间\"},model:{value:(_vm.dataValue),callback:function ($$v) {_vm.dataValue=$$v},expression:\"dataValue\"}})],1),_vm._v(\" \\n      \"),_c('el-button',{on:{\"click\":_vm.historicalDataSearch}},[_c('i',{staticClass:\"iconfont icon-sousuo\"}),_vm._v(\"生成\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"delet\"},on:{\"click\":_vm.exportPdf}},[_c('i',{staticClass:\"iconfont icon-daochu\"}),_vm._v(\"导出\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"currency-mode-wrap\"},[_c('el-scrollbar',{staticClass:\"currency-mode-scroll\"},[_c('h4',{staticClass:\"report-form-title\"},[_vm._v(_vm._s(_vm.headtitle))]),_vm._v(\" \"),_c('p',{staticClass:\"report-notes-text\"},[_vm._v(_vm._s(_vm.evaluationdis)+\"\\n        \")]),_c('div',{staticClass:\"report-table-wrap\",staticStyle:{\"position\":\"relative\"}},[(_vm.reportLoading)?_c('div',{staticClass:\"loading-wrap\"}):_vm._e(),_vm._v(\" \"),(_vm.reportNoDataState)?_c('div',{staticClass:\"no-data-wrap small no-data-table\"},[_c('p',[_vm._v(\"暂无数据\")])]):_vm._e(),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"empty-text\":\" \",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"fixed\":\"\",\"width\":\"50\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"fixed\":\"\",\"label\":\"河道-站点名称\",\"show-overflow-tooltip\":true,\"width\":\"230\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"单因子评价\",\"align\":\"center\"}},[_vm._l((_vm.headcolumn),function(item,index){return _c('el-table-column',{key:index,attrs:{\"label\":item.projectName,\"width\":_vm.setWidth(item.projectName),\"property\":item.projectCode},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((scope.row.projects),function(proj,key){return _c('div',{key:key,staticClass:\"data-table-cell\"},[(proj.code==item.projectCode)?_c('span',[_vm._v(_vm._s(proj.value)+\"\\n                          \")]):_vm._e()])})}}],null,true)})}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"waterQualityLevel\",\"label\":\"水质类别\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(\"\\n                    \"+_vm._s(_vm.toWQLString(scope.row.waterQualityLevel))+\"\\n                  \")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"evaluation\",\"label\":\"水质状况\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"primaryPollutant\",\"show-overflow-tooltip\":true,\"width\":\"166\",\"label\":\"主要污染物（超标倍数）\"}})],2)],1)],1)])],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4d24d920\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/colligateApplication/multiStationPresentation.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4d24d920\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./multiStationPresentation.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./multiStationPresentation.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./multiStationPresentation.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4d24d920\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./multiStationPresentation.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4d24d920\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/colligateApplication/multiStationPresentation.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}