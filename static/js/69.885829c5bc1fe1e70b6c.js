webpackJsonp([69],{LXz4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),l=a.n(i),n=a("dwSH"),o={name:"linearVerifi",data:function(){return{dateRange:"",stateRadio:"1",value:["w01019","w21003","w21011","w21001"],optionData:[{value:"w01019",label:"高锰酸盐"},{value:"w21003",label:"氨氮"},{value:"w21011",label:"总磷"},{value:"w21001",label:"总氮"}],stationId:"",stationName:"",areaCode:"",currentPage:1,pageSize:10,pageList:[10,20,35],totalRecords:1e3,tableData:[{testDate:"2019-02-15 14:04:10",monitoringItems:"高锰酸盐",unit:"mg/L",oneSpot:"0.4",twoSpot:"3.0",threeSpot:"5.2",fourSpot:"7.5",coefficient:"0.996"}],tableDataAll:[{province:"江西省",monitor:"长江流域",basin:"吴城赣江",testDate:"2019-02-15 14:04:10",monitoringItems:"高锰酸盐",unit:"mg/L",oneSpot:"0.4",twoSpot:"3.0",threeSpot:"5.2",fourSpot:"7.5",coefficient:"0.996"}],currentPageB:1,pageSizeB:10,pageListB:[10,20,35],totalRecordsB:1e3,fieldList:[],fieldListA:["time","indexName","indexUnit","firstPointValue","secondPointValue","thirdPointValue","fourthPointValue","fifthPointValue","sixthPointValue","relatedCoefficient"],fieldListB:["areaName","basinName","stationName","time","indexName","indexUnit","firstPointValue","secondPointValue","thirdPointValue","fourthPointValue","fifthPointValue","sixthPointValue","relatedCoefficient"]}},computed:{totalPage:function(){return Math.ceil(this.totalRecords/this.pageSize)},totalPageB:function(){return Math.ceil(this.totalRecordsB/this.pageSizeB)},stationInfo:{get:function(){return this.$store.state.stationInfo}}},methods:{paginationSizeChange:function(t){this.pageSize=t,this.getTableData()},paginationChange:function(t){this.currentPage=t,this.getTableData()},paginationSizeChangeB:function(t){this.pageSizeB=t,this.getTableDataAll()},paginationChangeB:function(t){this.currentPageB=t,this.getTableDataAll()},toggleTab:function(t){},searchData:function(){this.getTableData(),this.getTableDataAll()},getTableData:function(){var t=this;this.$http.get("/Quality/testData/multipointlinearityData",{params:{startTime:this.dateRange[0],endTime:this.dateRange[1],indexCodes:this.value.join(","),stationCodes:this.stationId,ifCurrentSection:!0,pageNumber:this.currentPage,pageSize:this.pageSize}}).then(function(e){0===e.data.code&&(t.tableData=e.data.content.dataList,t.totalRecords=e.data.content.totalRecords)})},getTableDataAll:function(){var t=this;this.$http.get("/Quality/testData/multipointlinearityData",{params:{startTime:this.dateRange[0],endTime:this.dateRange[1],indexCodes:this.value.join(","),stationCodes:this.areaCode,ifCurrentSection:!1,pageNumber:this.currentPage,pageSize:this.pageSize}}).then(function(e){0===e.data.code&&(t.tableDataAll=e.data.content.dataList,t.totalRecordsB=e.data.content.totalRecords)})},exportExcel:function(){var t=this.$refs,e=t.tableA,a=t.tableB,i=null,o=null,s=null;"1"===this.stateRadio?(this.fieldList=JSON.parse(l()(this.fieldListA)),o=!0,i=e,s=this.stationId):(this.fieldList=JSON.parse(l()(this.fieldListB)),s=this.areaCode,o=!1,i=a);var r=i.$el.querySelector(".el-table__header"),c=this.stationName+"多点线性核查",u={headerProp:this.fieldList.join(","),startTime:this.dateRange[0],endTime:this.dateRange[1],indexCodes:this.value.join(","),stationCodes:s,tableType:"MULTIPOINT_LINEARITY_DATA",ifCurrentSection:o,pattern:"yyyy-MM-dd"};console.log(222,u),Object(n.a)(r,c,"","1","/Quality/exports/qualityControlExcel",u)}},mounted:function(){},created:function(){var t=(new Date).setDate((new Date).getDate()-2),e=new Date;this.dateRange=[new Date(t).format("yyyy-MM-dd"),e.format("yyyy-MM-dd")]},watch:{stationInfo:function(t){t.length>0&&(this.stationId=t[0].nodeId,this.areaCode=t[0].areaCode,this.stationName=t[0].nodeName,this.getTableData(),this.getTableDataAll())}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"linearVerifi tapStyle secondary-page-mode"},[a("div",{staticClass:"secondary-toolbar"},[a("span",[t._v("时间选择 : ")]),t._v(" "),a("div",{staticClass:"layoutBox",staticStyle:{width:"242px"}},[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),t._v("  \n     "),a("span",[t._v("监测项目 : ")]),t._v(" "),a("div",{staticClass:"layoutBox",staticStyle:{width:"190px"}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.optionData,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v("  \n    "),a("el-button",{on:{click:t.searchData}},[a("i",{staticClass:"iconfont icon-sousuo"}),t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"delet"},on:{click:function(e){return t.exportExcel()}}},[a("i",{staticClass:"iconfont icon-daochu"}),t._v("导出")])],1),t._v(" "),a("div",{staticClass:"currency-mode-wrap"},[a("div",{staticClass:"reminder-wrap"},[a("span",{staticClass:"reminder-title"},[t._v("温馨提示")]),t._v(" "),a("div",{staticClass:"reminder-content"},[a("div",{staticClass:"reminder-text"},[a("p",[t._v("所选时间段内共有“多点线性核查移”x次，共有合格项m次，不合格项y次。影响数据n条。点位1、点位2的上次周核查时间距今已有7天；站点3的上次周核查距今已有6天。")]),t._v(" "),a("div",[a("el-button",{attrs:{type:"noticonsecondBtn"}},[t._v(" 生成任务 ")])],1)])]),t._v(" "),a("div",{staticClass:"reminder-toolbar"},[t._m(0),t._v(" "),a("div",{staticClass:"state-radio-wrap"},[a("el-radio-group",{attrs:{size:"small"},on:{change:t.toggleTab},model:{value:t.stateRadio,callback:function(e){t.stateRadio=e},expression:"stateRadio"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("当前断面")]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[t._v("所有断面")])],1)],1)])]),t._v(" "),a("div",{staticClass:"currency-body-toggle"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===t.stateRadio,expression:"stateRadio === '1'"}],staticStyle:{height:"100%"}},[a("div",{staticClass:"tablebox",staticStyle:{height:"calc(100% - 34px)"}},[a("el-table",{ref:"tableA",attrs:{data:t.tableData,border:"",height:"100%"}},[a("el-table-column",{attrs:{type:"index",width:"60",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",width:"160",label:"开始测试时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"indexName",label:"监测项目"}}),t._v(" "),a("el-table-column",{attrs:{prop:"indexUnit",label:"单位"}}),t._v(" "),a("el-table-column",{attrs:{prop:"firstPointValue",label:"第1点"}}),t._v(" "),a("el-table-column",{attrs:{prop:"secondPointValue",label:"第2点"}}),t._v(" "),a("el-table-column",{attrs:{prop:"thirdPointValue",label:"第3点"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fourthPointValue",label:"第4点"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fifthPointValue",label:"第5点"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sixthPointValue",label:"第6点"}}),t._v(" "),a("el-table-column",{attrs:{prop:"relatedCoefficient",label:"相关系数"}})],1)],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,background:"",small:!0,"popper-class":"select-common-option","page-sizes":t.pageList,layout:"total,sizes,slot,->,prev, pager, next, jumper",total:t.totalRecords},on:{"size-change":t.paginationSizeChange,"current-change":t.paginationChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}},[a("span",{staticClass:"el-pagination__current"},[t._v("当前第"+t._s(t.currentPage)+"/"+t._s(t.totalPage)+"页")])])],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"===t.stateRadio,expression:"stateRadio === '2'"}],staticClass:"chart-wrap",staticStyle:{height:"100%"}},[a("div",{staticClass:"tablebox",staticStyle:{height:"calc(100% - 34px)"}},[a("el-table",{ref:"tableB",staticStyle:{width:"100%"},attrs:{data:t.tableDataAll,border:"",height:"100%"}},[a("el-table-column",{attrs:{type:"index",width:"60",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"areaName",label:"省份"}}),t._v(" "),a("el-table-column",{attrs:{prop:"basinName",label:"流域"}}),t._v(" "),a("el-table-column",{attrs:{prop:"stationName",label:"断面名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",width:"160",label:"开始测试时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"indexName",label:"监测项目"}}),t._v(" "),a("el-table-column",{attrs:{prop:"indexUnit",label:"单位"}}),t._v(" "),a("el-table-column",{attrs:{prop:"firstPointValue",label:"第1点"}}),t._v(" "),a("el-table-column",{attrs:{prop:"secondPointValue",label:"第2点"}}),t._v(" "),a("el-table-column",{attrs:{prop:"thirdPointValue",label:"第3点"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fourthPointValue",label:"第4点"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fifthPointValue",label:"第5点"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sixthPointValue",label:"第6点"}}),t._v(" "),a("el-table-column",{attrs:{prop:"relatedCoefficient",label:"相关系数"}})],1)],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("el-pagination",{attrs:{"current-page":t.currentPageB,"page-size":t.pageSizeB,background:"",small:!0,"popper-class":"select-common-option","page-sizes":t.pageListB,layout:"total,sizes,slot,->,prev, pager, next, jumper",total:t.totalRecordsB},on:{"size-change":t.paginationSizeChangeB,"current-change":t.paginationChangeB,"update:currentPage":function(e){t.currentPageB=e},"update:current-page":function(e){t.currentPageB=e}}},[a("span",{staticClass:"el-pagination__current"},[t._v("当前第"+t._s(t.currentPageB)+"/"+t._s(t.totalPageB)+"页")])])],1)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-legend"},[e("span",[e("i",{staticClass:"qualified-icon"}),this._v(" 合格")]),this._v(" "),e("span",[e("i",{staticClass:"unqualified-icon"}),this._v(" 不合格")])])}]};var r=a("VU/8")(o,s,!1,function(t){a("fTpZ")},"data-v-5a5c6650",null);e.default=r.exports},fTpZ:function(t,e){}});
//# sourceMappingURL=69.885829c5bc1fe1e70b6c.js.map