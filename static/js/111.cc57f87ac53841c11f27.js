webpackJsonp([111],{"4D8L":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e("mvHQ"),n=e.n(o),l=e("dwSH"),i={name:"",data:function(){return{dateRange:[],value:"",optionData:[{value:1,label:"水温"},{value:2,label:"PH"},{value:3,label:"溶解氧"},{value:4,label:"电导率"},{value:5,label:"浊度"},{value:6,label:"高锰酸盐"},{value:7,label:"氨氮"},{value:8,label:"总磷"},{value:9,label:"总氮"},{value:10,label:"叶绿素α"},{value:11,label:"藻密度"}],tableData:[],tableHead:[],provinceData:[],provinceModel:"",basinData:[],basinModel:"",factorData:[],factorModel:["w01019","w21001"],stationTypeData:[],stationTypeModel:"",stationClassData:[],stationClassModel:"",operCompanyData:[],operCompanyModel:"",stationName:"",loading:!0,currentPage:1,pageSize:10,total:0,pageList:[10,20,30],fieldList:[]}},created:function(){this.init(),this.getTableData()},methods:{objectSpanMethod:function(t){t.row,t.column;var a=t.rowIndex,e=t.columnIndex;if(1===e||2===e||3===e||4===e)return a%2==0?{rowspan:2,colspan:1}:{rowspan:0,colspan:0}},getfactorName:function(t){var a="";for(var e in this.factorData)t==this.factorData[e].projectCode&&(a=this.factorData[e].projectName);return a},search:function(){this.getTableData()},init:function(){var t=this;this.$http.get("/SiteManagement/area/provinceInfo").then(function(a){0==a.data.code&&(t.provinceData=a.data.content.dataList)}),this.$http.post("/SiteManagement/basinn/query").then(function(a){0==a.data.code&&(t.basinData=a.data.content.dataList)}),this.$http.post("/SiteManagement/index/query").then(function(a){if(0==a.data.code){t.factorData=a.data.content.dataList;for(var e=0;e<t.factorData.length;e++)t.factorModel.push(t.factorData[e].projectCode)}}),this.$http.post("/SiteManagement/stationType/query").then(function(a){0==a.data.code&&(t.stationTypeData=a.data.content.dataList)}),this.$http.post("/SiteManagement/stationClassify/queryAll").then(function(a){0==a.data.code&&(t.stationClassData=a.data.content.dataList)}),this.$http.get("/SiteManagement/operCompany/queryAll").then(function(a){0==a.data.code&&(t.operCompanyData=a.data.content.dataList)});var a=(new Date).setDate((new Date).getDate()-3),e=new Date;this.dateRange=[new Date(a).format("yyyy-MM-dd hh:mm:ss"),e.format("yyyy-MM-dd hh:mm:ss")]},paginationSizeChange:function(t){this.pageSize=t,this.getTableData()},paginationChange:function(t){this.currentPage=t,this.getTableData()},getTableData:function(){var t=this;this.loading=!0,this.tableHead=JSON.parse(n()(this.factorModel)),this.$http.get("/StatisticsAndAlarm/dataReports/waterQualityReports",{params:{startTime:this.dateRange[0],endTime:this.dateRange[1],projectCode:this.factorModel.join(","),provinceId:this.provinceModel,basinnId:this.basinModel,stationClassifyId:this.stationClassModel,stationTypeId:this.stationTypeModel,operCompanyId:this.operCompanyModel,stationName:this.stationName,pageNumber:this.currentPage,pageSize:this.pageSize}}).then(function(a){0==a.data.code&&(t.tableData=a.data.content.dataList,t.loading=!1,t.total=a.data.content.totalRecords)})},exportExcel:function(){var t=this.$refs.table.$el.querySelector(".el-table__header");this.fieldList=["areaName","basinnName","stationRiver","stationName","AudioContent"];for(var a=0;a<this.tableHead.length;a++)this.fieldList.push(this.tableHead[a]+"monitorSCOPE"),this.fieldList.push(this.tableHead[a]+"monitorAVG");this.fieldList.push("synLevelSCOPE"),this.fieldList.push("synLevelAVG");var e={headerProp:this.fieldList.join(","),startTime:this.dateRange[0],endTime:this.dateRange[1],projectCode:this.factorModel.join(","),provinceId:this.provinceModel,basinnId:this.basinModel,stationClassifyId:this.stationClassModel,stationTypeId:this.stationTypeModel,operCompanyId:this.operCompanyModel,stationName:this.stationName};Object(l.a)(t,"水质评价范围统计","","1","/StatisticsAndAlarm/exports/waterQualityExcel",e)}},computed:{totalPageNumber:function(){return Math.ceil(this.total/this.pageSize)}}},s={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"scopePage",staticStyle:{height:"100%"}},[e("div",{staticClass:"toolbox"},[e("span",[t._v("时间选择 : ")]),t._v(" \n        "),e("div",{staticClass:"layoutBox",staticStyle:{width:"242px"}},[e("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:t.dateRange,callback:function(a){t.dateRange=a},expression:"dateRange"}})],1),t._v("  \n        "),e("span",[t._v("所属地区 : ")]),t._v(" \n        "),e("div",{staticClass:"layoutBox",staticStyle:{width:"120px"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.provinceModel,callback:function(a){t.provinceModel=a},expression:"provinceModel"}},t._l(t.provinceData,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v("  \n        "),e("span",[t._v("所属流域 : ")]),t._v(" \n        "),e("div",{staticClass:"layoutBox",staticStyle:{width:"120px"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.basinModel,callback:function(a){t.basinModel=a},expression:"basinModel"}},t._l(t.basinData,function(t){return e("el-option",{key:t.basinnId,attrs:{label:t.basinnName,value:t.basinnId}})}),1)],1),t._v("  \n        "),e("span",[t._v("监测项目 : ")]),t._v(" \n        "),e("div",{staticClass:"layoutBox",staticStyle:{width:"120px"}},[e("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},model:{value:t.factorModel,callback:function(a){t.factorModel=a},expression:"factorModel"}},t._l(t.factorData,function(t){return e("el-option",{key:t.projectCode,attrs:{label:t.projectName,value:t.projectCode}})}),1)],1),t._v("  \n       \n   ")]),t._v(" "),e("div",{staticClass:"toolbox"},[e("span",[t._v("站点名称 : ")]),t._v(" \n        "),e("div",{staticClass:"layoutBox",staticStyle:{width:"242px"}},[e("el-input",{attrs:{placeholder:"请输入站点名称"},model:{value:t.stationName,callback:function(a){t.stationName=a},expression:"stationName"}})],1),t._v("  \n      "),e("span",[t._v("站点类别 : ")]),t._v(" \n        "),e("div",{staticClass:"layoutBox",staticStyle:{width:"120px"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.stationTypeModel,callback:function(a){t.stationTypeModel=a},expression:"stationTypeModel"}},t._l(t.stationTypeData,function(t){return e("el-option",{key:t.stationTypeId,attrs:{label:t.stationTypeName,value:t.stationTypeId}})}),1)],1),t._v("  \n         "),e("span",[t._v("站点类型 : ")]),t._v(" \n        "),e("div",{staticClass:"layoutBox",staticStyle:{width:"120px"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.stationClassModel,callback:function(a){t.stationClassModel=a},expression:"stationClassModel"}},t._l(t.stationClassData,function(t){return e("el-option",{key:t.stationClassifyId,attrs:{label:t.stationClassifyName,value:t.stationClassifyId}})}),1)],1),t._v("  \n         "),e("span",[t._v("运维单位 : ")]),t._v(" \n        "),e("div",{staticClass:"layoutBox",staticStyle:{width:"120px"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.operCompanyModel,callback:function(a){t.operCompanyModel=a},expression:"operCompanyModel"}},t._l(t.operCompanyData,function(t){return e("el-option",{key:t.operCompanyId,attrs:{label:t.operCompanyName,value:t.operCompanyId}})}),1)],1),t._v("  \n        \n         "),e("el-button",{on:{click:t.search}},[e("i",{staticClass:"iconfont icon-sousuo"}),t._v("查询")]),t._v(" "),e("el-button",{attrs:{type:"delet"},on:{click:t.exportExcel}},[e("i",{staticClass:"iconfont icon-daochu"}),t._v("导出")])],1),t._v(" "),e("div",{staticClass:"table report-table-wrap",staticStyle:{height:"calc(100% - 86px)"}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",staticStyle:{height:"calc(100% - 35px)"},attrs:{border:"",data:t.tableData,"span-method":t.objectSpanMethod,"tooltip-effect":"light","element-loading-text":"加载中","element-loading-spinner":"loading-type-a","element-loading-background":"rgba(255, 255, 255, 1)"}},[e("el-table-column",{attrs:{type:"index",label:"序号",width:"45"}}),t._v(" "),e("el-table-column",{attrs:{label:"区域",prop:"areaName",width:"120"}}),t._v(" "),e("el-table-column",{attrs:{label:"水系",width:"120",prop:"basinnName"}}),t._v(" "),e("el-table-column",{attrs:{label:"河流名称",width:"120",prop:"stationRiver"}}),t._v(" "),e("el-table-column",{attrs:{label:"站点名称",width:"175",prop:"stationName"}}),t._v(" "),e("el-table-column",{attrs:{label:"审核内容",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("p",{staticClass:"cellp"},[t._v(t._s(a.row.AudioContent))])])]}}])}),t._v(" "),t._l(t.tableHead,function(a,o){return e("el-table-column",{key:o,attrs:{label:t.getfactorName(a),"show-overflow-tooltip":""}},[e("el-table-column",{attrs:{label:"浓度范围",width:"120"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("div",[e("p",{staticClass:"cellp"},[t._v(t._s(o.row[a+"monitorSCOPE"]))])])]}}],null,!0)}),t._v(" "),e("el-table-column",{attrs:{label:"均值",width:"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(o){return[e("div",[e("p",{staticClass:"cellp"},[t._v(t._s(o.row[a+"monitorAVG"]))])])]}}],null,!0)})],1)}),t._v(" "),e("el-table-column",{attrs:{label:"综合水质类别"}},[e("el-table-column",{attrs:{label:"范围",width:"120",prop:"synLevelSCOPE","show-overflow-tooltip":""}}),t._v(" "),e("el-table-column",{attrs:{label:"均值",width:"120",prop:"synLevelAVG","show-overflow-tooltip":""}})],1)],2),t._v(" "),e("div",{staticClass:"paginationBox"},[e("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,background:"",small:!0,"popper-class":"select-common-option","page-sizes":t.pageList,layout:"total,sizes,slot,->,prev, pager, next, jumper",total:t.total},on:{"size-change":t.paginationSizeChange,"current-change":t.paginationChange,"update:currentPage":function(a){t.currentPage=a},"update:current-page":function(a){t.currentPage=a}}},[e("span",{staticClass:"el-pagination__current"},[t._v("当前第"+t._s(t.currentPage)+"/"+t._s(t.totalPageNumber)+"页")])])],1)],1)])},staticRenderFns:[]};var r=e("VU/8")(i,s,!1,function(t){e("72JL")},null,null);a.default=r.exports},"72JL":function(t,a){}});
//# sourceMappingURL=111.cc57f87ac53841c11f27.js.map