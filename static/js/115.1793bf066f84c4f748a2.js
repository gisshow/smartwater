webpackJsonp([115],{"82Sx":function(e,t){},BRiT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("dwSH"),i={name:"sampleComparison",data:function(){return{dateRange:"",value:"w01019",optionData:[],optionDataA:[{value:"w01019",label:"高锰酸盐"},{value:"w21003",label:"氨氮"},{value:"w21011",label:"总磷"},{value:"w21001",label:"总氮"}],optionDataB:[{value:"w01018",label:"CODcr"},{value:"w21003",label:"氨氮"},{value:"w21011",label:"总磷"},{value:"w21001",label:"总氮"}],currentPage:1,pageSize:10,totalRecords:0,pageList:[10,15,20],tableData:[],stateRadio:"1",stationId:"",stationType:!1,fieldList:[],fieldListA:["time","zeroValue","zeroStandardSamplesValue","zeroAbsoluteError","zeroAbsoluteTechnicalRequirement","spanValue","spanStandardSamplesValue","spanCheckRelativeError","spanCheckRelativeTechnicalRequirement"],fieldListB:["time","spanValue","spanStandardSamplesValue","spanCheckRelativeError","spanCheckRelativeTechnicalRequirement"],stationName:"",tableHeader:[],tableHeaderA:[{name:"零点校正液核查",subName:"零点校正液浓度",errorName:"绝对误差",errorRangeName:"绝对误差范围",propA:"zeroValue",propB:"zeroStandardSamplesValue",propC:"zeroAbsoluteError",propD:"zeroAbsoluteTechnicalRequirement"},{name:"量程校正液核查",subName:"量程校正液浓度",errorName:"相对误差",errorRangeName:"相对误差范围",propA:"spanValue",propB:"spanStandardSamplesValue",propC:"spanCheckRelativeError",propD:"spanCheckRelativeTechnicalRequirement"}],tableHeaderB:[{name:"量程校正液核查",errorName:"相对误差",subName:"量程校正液浓度",errorRangeName:"相对误差范围",propA:"spanValue",propB:"spanStandardSamplesValue",propC:"spanCheckRelativeError",propD:"spanCheckRelativeTechnicalRequirement"}]}},computed:{totalPage:function(){var e;return 0===(e=Math.ceil(this.totalRecords/this.pageSize))?1:e},stationInfo:{get:function(){return this.$store.state.stationInfo}}},methods:{addPer:function(e,t,a,n){return"相对误差"==t.label&&""!=a&&"-"!=a?a+"%":a},paginationChange:function(e){this.currentPage=e,this.getSpanCheckData()},paginationSizeChange:function(e){this.pageSize=e,this.getSpanCheckData()},toggleTable:function(e){e.toggle?e.toggle=!1:e.toggle=!0},toggleTab:function(e){},search:function(){this.getSpanCheckData()},getSpanCheckData:function(){var e=this;this.$http.get("/Quality/CQtestData/zeroSpanCheckData",{params:{startTime:this.dateRange[0],endTime:this.dateRange[1],indexCodes:this.value,stationCodes:this.stationId,ifCurrentSection:!0,pageNumber:this.currentPage,pageSize:this.pageSize}}).then(function(t){0===t.data.code&&(console.log(t),e.tableData=t.data.content.dataList,e.totalRecords=t.data.content.totalRecords)})},setOptionData:function(){this.stationType?(this.optionData=this.optionDataB,this.value="w01018"):(this.optionData=this.optionDataA,this.value="w01019"),this.getSpanCheckData()},filterOptionData:function(e){for(var t=0;t<this.optionData.length;t++)if(this.optionData[t].value===e)return this.optionData[t].label},exportExcel:function(){var e=this.$refs.table.$el.querySelector(".el-table__header"),t=this.stationName+this.filterOptionData(this.value)+"零点和量程核查",a={headerProp:this.fieldList.join(","),startTime:this.dateRange[0],endTime:this.dateRange[1],indexCodes:this.value,stationCodes:this.stationId,tableType:"ZERO_SPAN_CHECK_DATA"};Object(n.a)(e,t,"","1","/Quality/exports/qualityControlExcel",a)}},mounted:function(){},created:function(){var e=(new Date).setDate((new Date).getDate()-30),t=new Date;this.dateRange=[new Date(e).format("yyyy-MM-dd hh:00:00"),t.format("yyyy-MM-dd hh:00:00")]},watch:{stationInfo:function(e){e.length>0&&(this.stationId=e[0].nodeId,this.stationName=e[0].nodeName,"002"===e[0].stationType1?(this.stationType=!0,this.tableHeader=this.tableHeaderB,this.fieldList=this.fieldListB):(this.stationType=!1,this.tableHeader=this.tableHeaderA,this.fieldList=this.fieldListA),this.setOptionData())}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sampleComparison tapStyle secondary-page-mode"},[a("div",{staticClass:"secondary-toolbar"},[a("span",[e._v("时间选择 : ")]),e._v(" "),a("div",{staticClass:"layoutBox",staticStyle:{width:"370px"}},[a("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"开始日期",format:"yyyy-MM-dd HH:00:00","value-format":"yyyy-MM-dd HH:00:00","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),e._v("  \n    "),a("span",[e._v("监测项目 : ")]),e._v(" "),a("div",{staticClass:"layoutBox",staticStyle:{width:"190px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.optionData,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v("  \n    "),a("el-button",{on:{click:e.search}},[a("i",{staticClass:"iconfont icon-sousuo"}),e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"delet"},on:{click:function(t){return e.exportExcel()}}},[a("i",{staticClass:"iconfont icon-daochu"}),e._v("导出")])],1),e._v(" "),a("div",{staticClass:"currency-mode-wrap scrollSpecial"},[a("div",{staticClass:"reminder-wrap"},[a("span",{staticClass:"reminder-title"},[e._v("温馨提示")]),e._v(" "),a("div",{staticClass:"reminder-content"},[a("div",{staticClass:"reminder-text"},[a("p",[e._v("所选时间段内共有“多点线性核查移”x次，共有合格项m次，不合格项y次。影响数据n条。点位1、点位2的上次周核查时间距今已有7天；站点3的上次周核查距今已有6天。")]),e._v(" "),a("div",[a("el-button",{attrs:{type:"noticonsecondBtn"}},[e._v(" 生成任务 ")])],1)])]),e._v(" "),e._m(0)]),e._v(" "),a("div",{staticClass:"currency-body-toggle"},[a("div",{staticClass:"tablebox",staticStyle:{height:"calc(100% - 35px)"}},[a("el-table",{ref:"table",attrs:{data:e.tableData,border:"",height:"100%"}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",width:"178",label:"日期"}}),e._v(" "),e._l(e.tableHeader,function(t,n){return a("el-table-column",{key:n,attrs:{label:t.name}},[a("el-table-column",{attrs:{label:"测定结果（mg/L）"}},[a("el-table-column",{attrs:{prop:t.propA,label:"系统"}}),e._v(" "),a("el-table-column",{attrs:{prop:t.propB,width:"120",label:t.subName}})],1),e._v(" "),a("el-table-column",{attrs:{prop:t.propC,formatter:e.addPer,label:t.errorName}}),e._v(" "),a("el-table-column",{attrs:{prop:t.propD,width:"120",label:t.errorRangeName}})],1)})],2)],1),e._v(" "),a("div",{staticClass:"paginationBox"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,background:"",small:!0,"popper-class":"select-common-option","page-sizes":e.pageList,layout:"total,sizes,slot,->,prev, pager, next, jumper",total:e.totalRecords},on:{"size-change":e.paginationSizeChange,"current-change":e.paginationChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}},[a("span",{staticClass:"el-pagination__current"},[e._v("当前第"+e._s(e.currentPage)+"/"+e._s(e.totalPage)+"页")])])],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"reminder-toolbar"},[t("div",{staticClass:"state-legend"},[t("span",[t("i",{staticClass:"qualified-icon"}),this._v(" 合格")]),this._v(" "),t("span",[t("i",{staticClass:"unqualified-icon"}),this._v(" 不合格")])])])}]};var s=a("VU/8")(i,l,!1,function(e){a("82Sx")},null,null);t.default=s.exports}});
//# sourceMappingURL=115.1793bf066f84c4f748a2.js.map