{"version":3,"sources":["webpack:///src/views/dataCollection/historyData.vue","webpack:///./src/views/dataCollection/historyData.vue?91ba","webpack:///./src/views/dataCollection/historyData.vue"],"names":["historyData","name","data","dateRange","stationId","stationName","value","valueA","valueB","optionData","optionDataA","label","standard","isShow","optionDataB","selectCheck","tableData","tableHead","tableHeadA","tableHeadB","tabActive","tableWraHei","currentPage","pageSize","totalRecords","pageList","fieldList","fieldListB","methods","createTrendAnalysis","this","$echarts","init","document","getElementById","setOption","color","title","text","x","y","tooltip","trigger","legend","top","grid","left","right","bottom","containLabel","dataZoom","show","realtime","start","end","type","xAxis","boundaryGap","axisTick","axisLine","lineStyle","yAxis","series","smooth","markArea","silent","itemStyle","opacity","borderWidth","borderType","selectChange","arr","indexMethod","index","search","callback","_this","j","i","_j","console","log","getFieldList","$nextTick","searchHistoryData","toggleTab","val","_this2","setTimeout","_this3","$http","get","params","beginTime","format","endTime","mn","pageNum","then","res","code","content","dataList","catch","error","paginationChange","paginationSizeChange","JSON","parse","stringify_default","_j2","push","exportExcel","header","$refs","table","$el","querySelector","headerProp","join","startTime","indexCodes","stationCodes","pattern","Object","tableExport","mounted","created","$store","commit","Date","setDate","getDate","computed","totalPage","number","Math","ceil","stationInfo","state","watch","_this4","length","nodeId","nodeName","stationType1","dataCollection_historyData","render","_vm","_h","$createElement","_c","_self","staticClass","_v","staticStyle","width","attrs","start-placeholder","end-placeholder","model","$$v","expression","multiple","collapse-tags","placeholder","on","change","_l","item","key","click","$event","tab-click","ref","height","border","prop","min-width","_e","current-page","page-size","background","small","popper-class","page-sizes","layout","total","size-change","current-change","update:currentPage","update:current-page","_s","id","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/117.1a3966c277e7e0749b19.js","sourcesContent":["<template>\r\n  <div class=\"historypage tapStyle secondary-page-mode\">\r\n     <div class=\"secondary-toolbar\">\r\n          <span>时间选择 : </span>&nbsp;\r\n          <div class=\"layoutBox\" style=\"width:242px\">\r\n            <el-date-picker v-model=\"dateRange\" type=\"daterange\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\"></el-date-picker>\r\n          </div>&emsp;&emsp;\r\n          <span>监测项目 : </span>&nbsp;\r\n          <div class=\"layoutBox\" style=\"width:160px\">\r\n            <el-select v-model=\"value\" multiple collapse-tags placeholder=\"请选择\" @change=\"selectChange\">\r\n                  <el-option\r\n                    v-for=\"item in optionData\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\">\r\n                  </el-option>\r\n            </el-select>\r\n          </div>&emsp;&emsp;\r\n\r\n          <el-button @click=\"search\"><i class=\"iconfont icon-sousuo\"></i>查询</el-button>\r\n          <el-button @click=\"exportExcel()\" type='delet'><i class=\"iconfont icon-daochu\"></i>导出</el-button>\r\n     </div>\r\n     <div class=\"currency-mode-wrap\">\r\n          <yf-tabs type=\"border-card\" :value=\"tabActive\" @tab-click=\"toggleTab\">\r\n            <yf-tab-pane name=\"a1\" label=\"数据列表\">\r\n              <div ref='tableWra' class=\"tablebox\" style=\"height: calc(100% - 35px);\">\r\n                        <el-table\r\n                          :data=\"tableData\"\r\n                          ref=\"table\"\r\n                          border\r\n                          height=\"100%\"\r\n                          style=\"width: 100%\">\r\n                          <el-table-column\r\n                            type=\"index\"\r\n                            label=\"序号\"\r\n                            :index=\"indexMethod\"\r\n                            width=\"50\">\r\n                          </el-table-column>\r\n                          <el-table-column\r\n                            prop=\"province\"\r\n                            width=\"116\"\r\n                            label=\"省份\">\r\n                          </el-table-column>\r\n                          <el-table-column\r\n                            prop=\"basin\"\r\n                            width=\"130\"\r\n                            label=\"流域\">\r\n                          </el-table-column>\r\n                          <el-table-column\r\n                            prop=\"stationName\"\r\n                            width=\"140\"\r\n                            label=\"断面名称\">\r\n                          </el-table-column>\r\n                          <el-table-column\r\n                            prop=\"name\"\r\n                             width=\"131\"\r\n                            label=\"监测时间\">\r\n                              <el-table-column\r\n                                min-width=\"181\"\r\n                                prop=\"dataTime\"\r\n                                label=\"Ⅲ类标准限值\">\r\n                              </el-table-column>\r\n                          </el-table-column>\r\n                          <el-table-column\r\n                            prop=\"name\"\r\n                            :label=\"item.label\"\r\n                            v-if=\"item.isShow\"\r\n                             v-for=\"(item,key) in tableHead\" :key=\"key\">\r\n                             <el-table-column\r\n                                :prop='item.value'\r\n                                min-width=\"110\"\r\n                                :label=\"item.standard\">\r\n                              </el-table-column>\r\n                          </el-table-column>\r\n                        </el-table>\r\n              </div>\r\n              <div class=\"paginationBox\">\r\n                <el-pagination\r\n                  @size-change=\"paginationSizeChange\"\r\n                  @current-change=\"paginationChange\"\r\n                  :current-page.sync=\"currentPage\"\r\n                  :page-size=\"pageSize\"\r\n                  background\r\n                  :small = \"true\"\r\n                  popper-class = \"select-common-option\"\r\n                  :page-sizes = \"pageList\"\r\n                  layout=\"total,sizes,slot,->,prev, pager, next, jumper\"\r\n                  :total=\"totalRecords\">\r\n                  <span class=\"el-pagination__current\">当前第{{currentPage}}/{{totalPage}}页</span>\r\n                </el-pagination>\r\n              </div>\r\n            </yf-tab-pane>\r\n            <yf-tab-pane name=\"a2\" label=\"数据图表\">\r\n              <div class=\"chart-wrap\" style=\"height: 100%\">\r\n                <div id=\"trend-analysis\" style=\"height: 100%\"></div>\r\n              </div>\r\n            </yf-tab-pane>\r\n          </yf-tabs>\r\n     </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {exportTableData} from '../../assets/js/tableExport'\r\nexport default {\r\n  name: \"\",\r\n  data() {\r\n    return {\r\n      dateRange: \"\",\r\n      stationId:'',\r\n      stationName:'',\r\n      value:[],\r\n      valueA:[\"w01010\",\"w01001\",\"w01009\",\"w01014\",\"w01003\",\"w01019\",\"w21003\",\"w21011\",\"w21001\",\"w01016\"],\r\n      valueB:[\"w01001\",\"w01018\",\"w21003\",\"w21011\",\"w21001\"],\r\n      optionData:[],\r\n      optionDataA: [\r\n          { value: 'w01010', label: \"水温\", standard: \"\", isShow: true },\r\n          { value: 'w01001', label: \"PH\", standard: \"6~9\", isShow: true },\r\n          { value: 'w01009', label: \"溶解氧\", standard: \"≥5\", isShow: true },\r\n          { value: 'w01014', label: \"电导率\", standard: \"\", isShow: true },\r\n          { value: 'w01003', label: \"浊度\", standard: \"\", isShow: true },\r\n          { value: 'w01019', label: \"高锰酸盐\", standard: \"6\", isShow: true },\r\n          { value: 'w21003', label: \"氨氮\", standard: \"1\", isShow: true },\r\n          { value: 'w21011', label: \"总磷\", standard: \"0.2\", isShow: true },\r\n          { value: 'w21001', label: \"总氮\", standard: \"\", isShow: true },\r\n           { value: 'w01016', label: \"叶绿素\", standard: \"\", isShow: true }\r\n      ],\r\n      optionDataB: [\r\n        //{ value: 'w01010', label: \"水温\", standard: \"\", isShow: true },\r\n        { value: 'w01001', label: \"PH\", standard: \"6~9\", isShow: true },\r\n        //{ value: 'w01009', label: \"溶解氧\", standard: \"≥5\", isShow: true },\r\n        //{ value: 'w01014', label: \"电导率\", standard: \"\", isShow: true },\r\n        //{ value: 'w01003', label: \"浊度\", standard: \"\", isShow: true },\r\n        { value: 'w01018', label: \"CODcr\", standard: \"6\", isShow: true },\r\n        { value: 'w21003', label: \"氨氮\", standard: \"1\", isShow: true },\r\n        { value: 'w21011', label: \"总磷\", standard: \"0.2\", isShow: true },\r\n        { value: 'w21001', label: \"总氮\", standard: \"\", isShow: true }\r\n      ],\r\n      selectCheck: [], //选中的监测项目\r\n      tableData: [],\r\n      tableHead:[],\r\n      tableHeadA: [\r\n          { value: 'w01010', label: \"水温\", standard: \"\", isShow: true },\r\n          { value: 'w01001', label: \"PH\", standard: \"6~9\", isShow: true },\r\n          { value: 'w01009', label: \"溶解氧\", standard: \"≥5\", isShow: true },\r\n          { value: 'w01014', label: \"电导率\", standard: \"\", isShow: true },\r\n          { value: 'w01003', label: \"浊度\", standard: \"\", isShow: true },\r\n          { value: 'w01019', label: \"高锰酸盐\", standard: \"6\", isShow: true },\r\n          { value: 'w21003', label: \"氨氮\", standard: \"1\", isShow: true },\r\n          { value: 'w21011', label: \"总磷\", standard: \"0.2\", isShow: true },\r\n          { value: 'w21001', label: \"总氮\", standard: \"\", isShow: true },\r\n           { value: 'w01016', label: \"叶绿素\", standard: \"\", isShow: true }\r\n      ],\r\n      tableHeadB: [\r\n        //{ value: 'w01010', label: \"水温\", standard: \"\", isShow: true },\r\n        { value: 'w01001', label: \"PH\", standard: \"6~9\", isShow: true },\r\n        //{ value: 'w01009', label: \"溶解氧\", standard: \"≥5\", isShow: true },\r\n        //{ value: 'w01014', label: \"电导率\", standard: \"\", isShow: true },\r\n        //{ value: 'w01003', label: \"浊度\", standard: \"\", isShow: true },\r\n        { value: 'w01018', label: \"CODcr\", standard: \"\", isShow: true },\r\n        { value: 'w21003', label: \"氨氮\", standard: \"1\", isShow: true },\r\n        { value: 'w21011', label: \"总磷\", standard: \"0.2\", isShow: true },\r\n        { value: 'w21001', label: \"总氮\", standard: \"\", isShow: true }\r\n      ],\r\n      tabActive:'a1',\r\n      tableWraHei:'',\r\n      currentPage: 1, //分页组件当前页\r\n      pageSize: 10, //分页每页多少条数据\r\n      totalRecords: 0, //总条数\r\n      pageList: [10, 15, 20], //设置每页多少条\r\n      // siteType:false,\r\n      fieldList:[],\r\n      fieldListB:['province','basin','stationName','dataTime']\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    //数据图表创建\r\n    createTrendAnalysis(){\r\n      let myChart = this.$echarts.init(document.getElementById('trend-analysis'));\r\n      let option = {\r\n        color:['#8E42FF','#00A3F5','#1CAD8B','#1EBD1E','#C2A100','#E68320','#FF4242'],\r\n        title: {\r\n          text: '变化趋势分析图',\r\n          x:'center',\r\n          y:10\r\n        },\r\n        tooltip: {\r\n          trigger: 'axis'\r\n        },\r\n        legend: {\r\n          data:['水温','PH','溶解氧','电导率','浊度'],\r\n          top: 40,\r\n        },\r\n        grid: {\r\n          top: 80,\r\n          left: 60,\r\n          right: 60,\r\n          bottom: 50,\r\n          containLabel: true\r\n        },\r\n        dataZoom: [\r\n          {\r\n            show: true,\r\n            realtime: true,\r\n            start: 0,\r\n            end: 100,\r\n          },\r\n          {\r\n            type: 'inside',\r\n            realtime: true,\r\n            start: 0,\r\n            end: 100,\r\n          }\r\n        ],\r\n        xAxis: {\r\n          type: 'category',\r\n          boundaryGap: false,\r\n          axisTick:{\r\n            show:false\r\n          },\r\n          axisLine:{\r\n            show:false,\r\n            lineStyle:{\r\n              color:'#666'\r\n            }\r\n          },\r\n          data: ['2019/02/07 5时','2019/02/07 6时','2019/02/07 7时','2019/02/07 8时','2019/02/07 9时','2019/02/07 10时','2019/02/07 11时']\r\n        },\r\n        yAxis: {\r\n          type: 'value',\r\n          axisLine:{\r\n            show:false\r\n          },\r\n          axisTick:{\r\n            show:false\r\n          }\r\n        },\r\n        series: [\r\n          {\r\n            name:'水温',\r\n            type:'line',\r\n            smooth: true,\r\n            data:[20, 32, 11, 34, 20, 30, 21],\r\n            markArea: {\r\n              silent: true,\r\n              itemStyle:{\r\n                color:'#d7e1eb',\r\n                opacity: 0.6,\r\n                borderWidth: 1,\r\n                borderType:'dashed'\r\n              },\r\n              label:{\r\n                color:'#000'\r\n              },\r\n              data: [[{\r\n                xAxis: '2019/02/07 6时',\r\n                name:'周质控不合格',\r\n              },{\r\n                xAxis: '2019/02/07 7时'\r\n              }],[{\r\n                xAxis: '2019/02/07 8时',\r\n                name:'月质控-集成干预检查不合格',\r\n              },{\r\n                xAxis: '2019/02/07 10时'\r\n              }]]\r\n            },\r\n          },\r\n          {\r\n            name:'PH',\r\n            type:'line',\r\n            smooth: true,\r\n            data:[22, 18, 19, 23, 29, 33, 31]\r\n          },\r\n          {\r\n            name:'溶解氧',\r\n            type:'line',\r\n            smooth: true,\r\n            data:[15, 23, 20, 15, 19, 33, 41]\r\n          },\r\n          {\r\n            name:'电导率',\r\n            type:'line',\r\n            smooth: true,\r\n            data:[32, 32, 30, 34, 30, 33, 32]\r\n          },\r\n          {\r\n            name:'浊度',\r\n            type:'line',\r\n            smooth: true,\r\n            data:[20, 32, 21, 34, 12, 13, 20]\r\n          }\r\n        ]\r\n      };\r\n      myChart.setOption(option);\r\n    },\r\n    selectChange(arr) {\r\n      this.value = arr;\r\n    },\r\n    indexMethod(index) {\r\n      return index + 1;\r\n    },\r\n    search(callback) {\r\n      for (let j in this.tableHead) {\r\n        this.tableHead[j].isShow = false;\r\n      }\r\n      for (let i in this.value) {\r\n        for (let j in this.tableHead) {\r\n          if (this.value[i] === this.tableHead[j].value) {\r\n            this.tableHead[j].isShow = true;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      console.log(this.tableHead);\r\n      this.getFieldList();\r\n\r\n      this.$nextTick(()=>{\r\n        this.searchHistoryData();\r\n      });\r\n    },\r\n    toggleTab(val){\r\n      let name = val.name;\r\n      if(name === 'a2'){\r\n        setTimeout(()=>{\r\n          this.createTrendAnalysis();\r\n        },300);\r\n      }\r\n    },\r\n    //获取历史数据\r\n    searchHistoryData(){\r\n      this.$http\r\n        .get(\"/Receiving/queryRowToColHourData\", {\r\n          params: {\r\n            beginTime: this.dateRange[0].format('yyyy-MM-dd 00:00:00'),\r\n            endTime: this.dateRange[1].format('yyyy-MM-dd 23:59:59'),\r\n            //indexCodes: this.value.join(\",\"),\r\n            mn: this.stationId, //this.stationId\r\n            pageNum: this.currentPage,\r\n            pageSize: this.pageSize\r\n          }\r\n        })\r\n        .then(res => {\r\n          if (res.data.code === 0) {\r\n           this.tableData = res.data.content.dataList;\r\n           this.totalRecords = res.data.content.totalRecords;\r\n          }\r\n        })\r\n        .catch(error => {});\r\n    },\r\n    paginationChange(val) {\r\n      //分页页码改变时执行\r\n      this.currentPage = val;\r\n      this.searchHistoryData();\r\n    },\r\n    paginationSizeChange(val) {\r\n      //分页pageSize改变时执行\r\n      this.pageSize = val;\r\n      this.searchHistoryData();\r\n    },\r\n    //获取表格字段\r\n    getFieldList(){\r\n      this.fieldList = JSON.parse(JSON.stringify(this.fieldListB));\r\n      for (let j in this.tableHead) {\r\n        this.tableHead[j].isShow = false;\r\n      }\r\n      for (let i in this.value) {\r\n        for (let j in this.tableHead) {\r\n          if (this.value[i] === this.tableHead[j].value) {\r\n            this.tableHead[j].isShow = true;\r\n            // console.log(this.tableHead[j]);\r\n            this.fieldList.push(this.tableHead[j].value);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    //导出表格\r\n    exportExcel(){\r\n      let {table} = this.$refs;\r\n      let tableBox = table.$el;\r\n      let header = tableBox.querySelector('.el-table__header');\r\n      let title = this.stationName+'历史数据';\r\n      let params = {\r\n        headerProp:this.fieldList.join(','),\r\n        startTime: this.dateRange[0].format('yyyy-MM-dd 00:00:00'),\r\n        endTime: this.dateRange[1].format('yyyy-MM-dd 23:59:59'),\r\n        indexCodes: this.value.join(','),\r\n        stationCodes: this.stationId,\r\n        pattern:'yyyy-MM-dd HH:mm:ss'\r\n        // tableType:'FIVE_PARAMETER_DATA',\r\n        // ifCurrentSection: true\r\n      };\r\n      exportTableData(header,title,'','1',\"/Receiving/exports/dataReceiveExcel\",params);\r\n    }\r\n\r\n  },\r\n  mounted() {\r\n\r\n  },\r\n  created() {\r\n    this.$store.commit('setShowlefttree',false);\r\n    this.selectCheck = this.value;\r\n    this.dateRange = [new Date(new Date().setDate(new Date().getDate()-7)),new Date()];\r\n  },\r\n  computed:{\r\n    totalPage() {\r\n      //计算总页数\r\n      let number = 0;\r\n      number = Math.ceil(this.totalRecords / this.pageSize);\r\n      return number === 0 ? 1 : number;\r\n    },\r\n     stationInfo:{\r\n       get: function () {\r\n           return this.$store.state.stationInfo;\r\n       },\r\n    }\r\n  },\r\n  watch:{\r\n     stationInfo(value) {\r\n      if (value.length > 0) {\r\n        this.stationId = value[0].nodeId;\r\n        this.stationName = value[0].nodeName;\r\n        if(value[0].stationType1 === '001'){\r\n          // this.siteType = false;\r\n          this.optionData = this.optionDataA;\r\n          this.value = this.valueA;\r\n          this.tableHead = this.tableHeadA;\r\n        }else if(value[0].stationType1 === '002'){\r\n          // this.siteType = true;\r\n          this.optionData = this.optionDataB;\r\n          this.value = this.valueB;\r\n          this.tableHead = this.tableHeadB;\r\n        }\r\n        this.getFieldList();\r\n\r\n        this.$nextTick(()=>{\r\n          this.searchHistoryData();\r\n        });\r\n      }\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.historypage {\r\n  height: 100%;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/dataCollection/historyData.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"historypage tapStyle secondary-page-mode\"},[_c('div',{staticClass:\"secondary-toolbar\"},[_c('span',[_vm._v(\"时间选择 : \")]),_vm._v(\" \\n        \"),_c('div',{staticClass:\"layoutBox\",staticStyle:{\"width\":\"242px\"}},[_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:(_vm.dateRange),callback:function ($$v) {_vm.dateRange=$$v},expression:\"dateRange\"}})],1),_vm._v(\"  \\n        \"),_c('span',[_vm._v(\"监测项目 : \")]),_vm._v(\" \\n        \"),_c('div',{staticClass:\"layoutBox\",staticStyle:{\"width\":\"160px\"}},[_c('el-select',{attrs:{\"multiple\":\"\",\"collapse-tags\":\"\",\"placeholder\":\"请选择\"},on:{\"change\":_vm.selectChange},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},_vm._l((_vm.optionData),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_vm._v(\"  \\n\\n        \"),_c('el-button',{on:{\"click\":_vm.search}},[_c('i',{staticClass:\"iconfont icon-sousuo\"}),_vm._v(\"查询\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"delet\"},on:{\"click\":function($event){return _vm.exportExcel()}}},[_c('i',{staticClass:\"iconfont icon-daochu\"}),_vm._v(\"导出\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"currency-mode-wrap\"},[_c('yf-tabs',{attrs:{\"type\":\"border-card\",\"value\":_vm.tabActive},on:{\"tab-click\":_vm.toggleTab}},[_c('yf-tab-pane',{attrs:{\"name\":\"a1\",\"label\":\"数据列表\"}},[_c('div',{ref:\"tableWra\",staticClass:\"tablebox\",staticStyle:{\"height\":\"calc(100% - 35px)\"}},[_c('el-table',{ref:\"table\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\",\"height\":\"100%\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"index\":_vm.indexMethod,\"width\":\"50\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"province\",\"width\":\"116\",\"label\":\"省份\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"basin\",\"width\":\"130\",\"label\":\"流域\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"stationName\",\"width\":\"140\",\"label\":\"断面名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"width\":\"131\",\"label\":\"监测时间\"}},[_c('el-table-column',{attrs:{\"min-width\":\"181\",\"prop\":\"dataTime\",\"label\":\"Ⅲ类标准限值\"}})],1),_vm._v(\" \"),_vm._l((_vm.tableHead),function(item,key){return (item.isShow)?_c('el-table-column',{key:key,attrs:{\"prop\":\"name\",\"label\":item.label}},[_c('el-table-column',{attrs:{\"prop\":item.value,\"min-width\":\"110\",\"label\":item.standard}})],1):_vm._e()})],2)],1),_vm._v(\" \"),_c('div',{staticClass:\"paginationBox\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"background\":\"\",\"small\":true,\"popper-class\":\"select-common-option\",\"page-sizes\":_vm.pageList,\"layout\":\"total,sizes,slot,->,prev, pager, next, jumper\",\"total\":_vm.totalRecords},on:{\"size-change\":_vm.paginationSizeChange,\"current-change\":_vm.paginationChange,\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event}}},[_c('span',{staticClass:\"el-pagination__current\"},[_vm._v(\"当前第\"+_vm._s(_vm.currentPage)+\"/\"+_vm._s(_vm.totalPage)+\"页\")])])],1)]),_vm._v(\" \"),_c('yf-tab-pane',{attrs:{\"name\":\"a2\",\"label\":\"数据图表\"}},[_c('div',{staticClass:\"chart-wrap\",staticStyle:{\"height\":\"100%\"}},[_c('div',{staticStyle:{\"height\":\"100%\"},attrs:{\"id\":\"trend-analysis\"}})])])],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-09a79510\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/dataCollection/historyData.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-09a79510\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./historyData.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./historyData.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./historyData.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-09a79510\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./historyData.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-09a79510\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/dataCollection/historyData.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}