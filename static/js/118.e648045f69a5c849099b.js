webpackJsonp([118],{LFKV:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("mvHQ"),i=e.n(s),l={name:"dayQualityControl",data:function(){return{value:[],dateRange:"",stateRadio:"w01010",stationId:"",optionData:[{value:1,label:"水温",standard:"",isShow:!0},{value:2,label:"PH",standard:"6~9",isShow:!0},{value:3,label:"溶解氧",standard:"≥5",isShow:!0},{value:4,label:"电导率",standard:"",isShow:!0},{value:5,label:"浊度",standard:"",isShow:!0},{value:6,label:"高锰酸盐",standard:"6",isShow:!0},{value:7,label:"氨氮",standard:"1",isShow:!0},{value:8,label:"总磷",standard:"0.2",isShow:!0},{value:9,label:"总氮",standard:"",isShow:!0}],tableData:[],tableDataB:[],dailyQuality:!1,tableInput:"",singleFactor:!1,dialogData:[{monitoringItems:"高锰酸钾",waterQuality:"",spanValue:"",zeroPoint:"",span:""},{monitoringItems:"氨氮",waterQuality:"",spanValue:"",zeroPoint:"",span:""},{monitoringItems:"总磷",waterQuality:"",spanValue:"",zeroPoint:"",span:""},{monitoringItems:"总氮",waterQuality:"",spanValue:"",zeroPoint:"",span:""}],projectList:[{name:"水温",code:"w01010",value:"",company:"mg/L"},{name:"溶解氧",code:"w01009",value:"",company:"μS/cm"},{name:"PH",code:"w01001",value:"",company:"无量纲"},{name:"电导率",code:"w01014",value:"",company:"NTU"},{name:"浊度",code:"w01003",value:"",company:"℃"}],resetProjectList:[],siteInfo:{nodeName:"",targerWaterQuality:"",areaName:"",basinName:"",currentWaterQuality:""},qualityControlInfo:{count:"0",qualified:"0",unqualified:"0"},controlTips:{LATESTTIME:"",TODATE:"",QUALIFIED:"",UNQUALIFIED:"",DATATODATE:""}}},methods:{getCurrentData:function(){var t=this;this.$http.get("/Quality/qualityControlSet/currentWeekQualityControlParam",{params:{stationCodes:this.stationId}}).then(function(a){0===a.data.code&&(t.tableData=a.data.content.dataList)})},historyWeekQuality:function(){var t=this;this.$http.get("/Quality/qualityControlSet/historyWeekQualityControlParam",{params:{startTime:this.dateRange[0].format("yyyy-MM-dd"),endTime:this.dateRange[1].format("yyyy-MM-dd"),indexCodes:this.stateRadio,stationCodes:this.stationId}}).then(function(a){0===a.data.code&&(t.tableDataB=a.data.content.dataList,t.getWeeklyQualityControl(),t.getWeeklyQualityControlTips())})},projectSettingsQuality:function(){var t=this,a=[];this.projectList.forEach(function(t){var e={stationCodes:"10005",indexCode:t.code,standardValue:t.value};a.push(e)}),this.$http.post("/Quality/qualityControlSet/editorCurrentWeekQualityControlParam",a).then(function(a){0===a.data.code&&(t.$message({message:a.data.message,type:"success"}),t.getCurrentData(),t.historyWeekQuality(),t.resetProjectListData(),t.dailyQuality=!1)})},resetProjectListData:function(){this.projectList=JSON.parse(i()(this.resetProjectList))},conversionWaterQuality:function(t){var a="";switch(parseInt(t)){case 1:a="Ⅰ类";case 2:a="Ⅱ类";case 3:a="Ⅲ类";case 4:a="Ⅳ类";case 5:a="Ⅴ类"}return a},getCurrentWaterQuality:function(){var t=this;this.$http.get("/Quality/qualityControlSet/getStationCurrentWaterQualityData",{params:{stationCode:this.stationId}}).then(function(a){0===a.data.code&&(t.siteInfo.currentWaterQuality=t.conversionWaterQuality(a.data.content.info))})},getWeeklyQualityControl:function(){var t=this;this.$http.get("/Quality/qualityControlSet/qualityControlConclusion",{params:{startTime:this.dateRange[0].format("yyyy-MM-dd"),endTime:this.dateRange[1].format("yyyy-MM-dd"),indexCodes:this.stateRadio,stationCodes:this.stationId,qualityAnalysisType:"WEEK_QUALITY",ifCurrentSection:!0}}).then(function(a){0===a.data.code&&(a.data.content.info.count?t.qualityControlInfo=a.data.content.info:(t.qualityControlInfo.count=0,t.qualityControlInfo.qualified=0,t.qualityControlInfo.unqualified=0))})},getWeeklyQualityControlTips:function(){var t=this;this.$http.get("/Quality/qualityControlSet/qualityControlTips",{params:{stationCodes:this.stationId,qualityAnalysisType:"WEEK_QUALITY"}}).then(function(a){0===a.data.code&&(console.log("2222",a),t.controlTips=a.data.content.info)})}},created:function(){this.$store.commit("setShowlefttree",!0),this.dateRange=[new Date((new Date).setDate((new Date).getDate()-10)),new Date],this.resetProjectList=JSON.parse(i()(this.projectList))},computed:{totalPageNumber:function(){return Math.ceil(this.total/this.pageSize)},stationInfo:{get:function(){return this.$store.state.stationInfo}}},watch:{stationInfo:function(t){t.length>0&&(this.stationId=t[0].nodeId,this.siteInfo.nodeName=t[0].nodeName,this.siteInfo.targerWaterQuality=this.conversionWaterQuality(t[0].targerWaterQuality),this.siteInfo.areaName=t[0].areaName,this.siteInfo.basinName=t[0].basinName,this.getCurrentData(),this.historyWeekQuality(),this.getCurrentWaterQuality())}}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dayQualityControl tapStyle secondary-page-mode"},[e("div",{staticClass:"currency-mode-wrap",staticStyle:{"margin-top":"0",height:"100%"}},[e("div",{staticClass:"reminder-wrap"},[e("span",{staticClass:"reminder-title"},[t._v("温馨提示")]),t._v(" "),e("div",{staticClass:"reminder-content",staticStyle:{width:"100%"}},[e("div",{staticClass:"reminder-text"},[e("p",[t._v("该点位最新一次质控参数设置于"+t._s(t.controlTips.LATESTTIME)+"，至今已使用"+t._s(t.controlTips.TODATE)+"；期间日质控合格了"+t._s(t.controlTips.QUALIFIED)+"次；\n            不合格了"+t._s(t.controlTips.UNQUALIFIED)+"次。")]),t._v(" "),e("div",[e("el-button",{attrs:{type:"noticonsecondBtn"}},[t._v(" 生成任务 ")])],1)])])]),t._v(" "),e("div",{staticClass:"currency-body-wrap",staticStyle:{height:"calc(100% - 52px)"}},[e("el-scrollbar",{staticStyle:{height:"100%"}},[e("div",{staticClass:"modular-box"},[e("div",{staticClass:"modular-header"},[e("span",{staticClass:"title"},[t._v("当前使用周质控参数信息")])]),t._v(" "),e("div",{staticClass:"modular-body"},[e("div",{staticClass:"modular-row clear"},[e("div",{staticClass:"statistics-text clear"},[e("span",[t._v("目标水质："+t._s(t.siteInfo.targerWaterQuality))]),t._v(" "),e("span",[t._v("当前水质："+t._s(t.siteInfo.currentWaterQuality))])]),t._v(" "),e("div",{staticClass:"statistics-text clear"},[e("span",[t._v("距上次质控已有"+t._s(t.controlTips.DATATODATE))])]),t._v(" "),e("div",{staticClass:"toolbar"},[e("el-button",{staticStyle:{margin:"0",display:"inline-block","vertical-align":"middle"},on:{click:function(a){t.dailyQuality=!0}}},[t._v("参数设置")])],1)]),t._v(" "),e("div",{staticClass:"table-box",staticStyle:{padding:"0 6px 6px"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[e("el-table-column",{attrs:{prop:"indexName",label:"监测项目"}}),t._v(" "),e("el-table-column",{attrs:{prop:"standardValue",label:"标准溶液浓度"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.standardValue)+" ("+t._s(a.row.indexUnit)+")")])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"submitTime",label:"提交时间"}}),t._v(" "),e("el-table-column",{attrs:{prop:"submitter",label:"提交人"}})],1)],1)])]),t._v(" "),e("div",{staticClass:"modular-box"},[e("div",{staticClass:"modular-header"},[e("span",{staticClass:"title"},[t._v("历史周质控参数信息")]),t._v(" "),e("div",{staticClass:"toolbar"},[e("span",[t._v("时间范围 : ")]),t._v(" "),e("div",{staticClass:"layoutBox",staticStyle:{width:"242px"}},[e("el-date-picker",{attrs:{align:"right",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.dateRange,callback:function(a){t.dateRange=a},expression:"dateRange"}})],1),t._v(" \n              "),e("el-button",{staticStyle:{margin:"0"},on:{click:function(a){return t.historyWeekQuality()}}},[e("i",{staticClass:"iconfont icon-sousuo"}),t._v("查询")])],1)]),t._v(" "),e("div",{staticClass:"modular-body"},[e("div",{staticClass:"modular-row"},[e("div",{staticClass:"state-radio-wrap",staticStyle:{"padding-bottom":"6px"}},[e("el-radio-group",{attrs:{size:"small"},on:{change:t.historyWeekQuality},model:{value:t.stateRadio,callback:function(a){t.stateRadio=a},expression:"stateRadio"}},[e("el-radio-button",{attrs:{label:"w01010"}},[t._v("水温")]),t._v(" "),e("el-radio-button",{attrs:{label:"w01009"}},[t._v("溶解氧")]),t._v(" "),e("el-radio-button",{attrs:{label:"w01001"}},[t._v("PH")]),t._v(" "),e("el-radio-button",{attrs:{label:"w01014"}},[t._v("电导率")]),t._v(" "),e("el-radio-button",{attrs:{label:"w01003"}},[t._v("浊度")])],1)],1),t._v(" "),e("div",{staticClass:"statistics-text clear"},[e("span",[t._v("该时间段共有周质控"+t._s(t.qualityControlInfo.count)+"次，\n                  合格"+t._s(t.qualityControlInfo.qualified)+"次，不合格"+t._s(t.qualityControlInfo.unqualified)+"次，影响数据y条")])])]),t._v(" "),e("div",{staticClass:"table-box",staticStyle:{padding:"0 6px 6px"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableDataB,border:""}},[e("el-table-column",{attrs:{prop:"monthWeek",label:"周数"}}),t._v(" "),e("el-table-column",{attrs:{prop:"submitTime",label:"提交时间"}}),t._v(" "),e("el-table-column",{attrs:{prop:"submitter",label:"提交人"}}),t._v(" "),e("el-table-column",{attrs:{prop:"zeroStandard",label:"仪器测试值"}}),t._v(" "),e("el-table-column",{attrs:{prop:"standardValue",label:"标准溶液浓度"}}),t._v(" "),e("el-table-column",{attrs:{prop:"error",label:"误差"}}),t._v(" "),e("el-table-column",{attrs:{prop:"impactData",label:"影响数据"}})],1)],1)])])])],1)]),t._v(" "),e("el-dialog",{attrs:{width:"480px",title:"项目设置详情",visible:t.dailyQuality},on:{close:function(a){return t.resetProjectListData()},"update:visible":function(a){t.dailyQuality=a}}},[e("div",{staticClass:"daily-quality-box",staticStyle:{padding:"8px"}},[e("div",{staticClass:"daily-head-wrap"},[e("div",{staticClass:"row clear"},[e("span",{staticClass:"label"},[t._v("当前点位："+t._s(t.siteInfo.nodeName))])]),t._v(" "),e("div",{staticClass:"row clear"},[e("span",{staticClass:"label"},[t._v("目标水质："+t._s(t.siteInfo.targerWaterQuality))]),t._v(" "),e("span",{staticClass:"label"},[t._v("当前水质："+t._s(t.siteInfo.currentWaterQuality))])]),t._v(" "),e("div",{staticClass:"row clear"},[e("span",{staticClass:"label"},[t._v("所属区域："+t._s(t.siteInfo.areaName))]),t._v(" "),e("span",{staticClass:"label"},[t._v("所属流域："+t._s(t.siteInfo.basinName))])])]),t._v(" "),e("div",{staticClass:"daily-table-wrap"},[e("table",{staticClass:"normal-table",staticStyle:{width:"100%"}},[e("tr",[e("th",{attrs:{width:"134px;"}},[t._v("监测项目")]),t._v(" "),e("th",[t._v("标准溶液浓度")])]),t._v(" "),t._l(t.projectList,function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.name))]),t._v(" "),e("td",[e("div",{staticClass:"layoutBox",staticStyle:{width:"100px"}},[e("el-input",{model:{value:a.value,callback:function(e){t.$set(a,"value",e)},expression:"item.value"}})],1),t._v(" "),e("span",{staticClass:"company-text"},[t._v("（"+t._s(a.company)+"）")])])])})],2),t._v(" "),e("div",{staticClass:"btn-wrap"},[e("el-button",{staticStyle:{width:"100px"},on:{click:function(a){return t.projectSettingsQuality()}}},[t._v("提交")])],1)])])]),t._v(" "),e("el-dialog",{attrs:{width:"550px",title:"单因子质控设置",visible:t.singleFactor},on:{"update:visible":function(a){t.singleFactor=a}}},[e("div",{staticClass:"daily-quality-box",staticStyle:{padding:"8px"}},[e("div",{staticClass:"daily-head-wrap"},[e("div",{staticClass:"row clear"},[e("span",{staticClass:"label"},[t._v("当前点位：XXXXXX")])]),t._v(" "),e("div",{staticClass:"row clear"},[e("span",{staticClass:"label"},[t._v("目标水质：XXXXXX")]),t._v(" "),e("span",{staticClass:"label"},[t._v("当前水质：XXXXXX")])]),t._v(" "),e("div",{staticClass:"row clear"},[e("span",{staticClass:"label"},[t._v("所属区域：XXXXXX")]),t._v(" "),e("span",{staticClass:"label"},[t._v("所属流域：XXXXXX")])])]),t._v(" "),e("div",{staticClass:"daily-table-wrap"},[e("table",{staticClass:"normal-table",attrs:{width:"100%"}},[e("tr",[e("th",{attrs:{width:"134px;"}},[t._v("监测项目")]),t._v(" "),e("th",[t._v("高锰酸盐")])]),t._v(" "),e("tr",[e("td",[t._v("上一周的水质平均值")]),t._v(" "),e("td",[t._v("1.9（mg/L）")])]),t._v(" "),e("tr",[e("td",[t._v("跨度值")]),t._v(" "),e("td",[e("div",{staticClass:"layoutBox",staticStyle:{width:"140px"}},[e("el-input",{model:{value:t.tableInput,callback:function(a){t.tableInput=a},expression:"tableInput"}})],1),t._v("（mg/L）")])]),t._v(" "),e("tr",[e("td",[t._v("零点标准溶液浓度")]),t._v(" "),e("td",[e("div",{staticClass:"layoutBox",staticStyle:{width:"140px"}},[e("el-input",{model:{value:t.tableInput,callback:function(a){t.tableInput=a},expression:"tableInput"}})],1),t._v("（mg/L）")])]),t._v(" "),e("tr",[e("td",[t._v("跨度标准溶液浓度")]),t._v(" "),e("td",[e("div",{staticClass:"layoutBox",staticStyle:{width:"140px"}},[e("el-input",{model:{value:t.tableInput,callback:function(a){t.tableInput=a},expression:"tableInput"}})],1),t._v("（mg/L）")])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[e("el-button",[t._v("提交")])],1)])]),t._v(" "),e("div",{staticClass:"btn-wrap"},[e("el-button",{staticStyle:{width:"100px"}},[t._v("批量提交")])],1)])])])],1)},staticRenderFns:[]};var o=e("VU/8")(l,n,!1,function(t){e("UKyC")},"data-v-0976dfe9",null);a.default=o.exports},UKyC:function(t,a){}});
//# sourceMappingURL=118.e648045f69a5c849099b.js.map