webpackJsonp([18],{"2Xe6":function(t,a){},"7Ahb":function(t,a){},Pmpi:function(t,a,e){"use strict";e.d(a,"a",function(){return i});var i=function(t,a){var e,i,o,s,n,r;L.drawLocal.draw.handlers.polyline.tooltip.start="点击开始绘制",L.drawLocal.draw.handlers.polyline.tooltip.cont="点击继续绘制",L.drawLocal.draw.handlers.polyline.tooltip.end="点击最后点结束绘制",L.drawLocal.draw.handlers.polygon.tooltip.start="点击开始绘制",L.drawLocal.draw.handlers.polygon.tooltip.cont="点击继续绘制",L.drawLocal.draw.handlers.polygon.tooltip.end="点击最开始点结束绘制",L.drawLocal.draw.handlers.marker.tooltip.start="点击地图放置一个点",L.drawLocal.draw.handlers.circle.tooltip.start="点击并且拖动绘制",i=new L.FeatureGroup,t.addLayer(i),t.on(L.Draw.Event.CREATED,function(t){t.layerType;var e=t.layer;switch(o=e.toGeoJSON(),s=o.geometry.coordinates,i.addLayer(e),r=e,n){case"polyline":var l=turf.length(o,{units:"kilometers"});l=l.toFixed(2),a&&a.$message(l+"千米");break;case"polygon":var c=turf.area(o)/1e6;c=c.toFixed(2),a&&a.$message(c+"平方千米");break;case"point":a&&a.$message(s[0]+" "+s[1]);break;case"circle":var p=[s[0],s[1]],m=e.getRadius()/1e3,u=turf.circle(p,m,{steps:10,units:"kilometers",properties:{foo:"bar"}});o=u}});return{drawController:function(a){switch(n=a,e&&e.disable(),r&&r.remove(),a){case"polyline":(e=new L.Draw.Polyline(t,{icon:L.icon({iconUrl:"./static/img/dian_ding.png",iconSize:[12,15]})})).enable();break;case"polygon":(e=new L.Draw.Polygon(t,{icon:L.icon({iconUrl:"./static/img/dian_ding.png",iconSize:[12,15]})})).enable();break;case"point":(e=new L.Draw.Marker(t,{icon:L.icon({iconUrl:"./static/img/dian_ding.png",iconSize:[12,15]})})).enable();break;case"circle":(e=new L.Draw.Circle(t,{})).enable()}},clearLayers:function(){i.clearLayers(),o=null,e&&e.disable()},getLayerDrawed:function(){return o}}}},hbfP:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("Xxa5"),o=e.n(i),s=e("exGp"),n=e.n(s),r=e("Pmpi"),l={name:"airMap",components:{},props:{mapInfo:Array,siteName:String,mapPattern:String,qualityGrade:Boolean},created:function(){},mounted:function(){var t=this;setTimeout(function(){t.initMap()},320)},data:function(){return{map:Object,loadNum:1,mapTypeNet:1,fxUrl:"http://10.0.254.123:8088/iserver/services/map-HB/rest/maps/HBMAP",quZColorObj:{}}},methods:{initMap:function(){var t=L.map("map21",{attributionControl:!1,zoomControl:!1,minZoom:6,crs:L.CRS.EPSG4326}).setView([29.6053256,106.58698008],10);this.map=t,this.queryClientIP();var a=new L.LayerGroup,e=new L.LayerGroup,i=new L.LayerGroup;this.zhiguanLayerGroup=i,this.stationLayerGroup=a,this.stationNameLayerGroup=e,this.map.addLayer(i),this.map.addLayer(a),this.map.addLayer(e),this.getMouseLntLat()},queryClientIP:function(){this.baseLayer=L.supermap.tiandituTileLayer({layerType:"vec",url:"http://t{s}.tianditu.com/{layer}_{proj}/wmts?tk=8152cdbb730f2c6ebf35266845e82c74"}).addTo(this.map),L.supermap.tiandituTileLayer({isLabel:!0,url:"http://t{s}.tianditu.com/{layer}_{proj}/wmts?tk=8152cdbb730f2c6ebf35266845e82c74"}).addTo(this.map)},getMouseLntLat:function(){var t=this;this.map.on("click",function(a){t.$emit("getLntLat",a.latlng)})},initMapToolBar:function(){var t=this;setTimeout(function(){var a=new r.a(t.map,t);t.meatures=a},200),this.geolocationSelf()},showMapSelf:function(t,a){console.log("您当前位置的维度："+t+"，经度："+a),this.$message("您当前位置的维度："+t+"，经度："+a)},geolocationSelf:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){x=t.coords.longitude,y=t.coords.latitude,console.log("您当前位置的维度2："+y+"，经度："+x)},function(t){console.log(t)},{timeout:6e4}):this.$message("您当前使用的浏览器不支持地理定位服务！")},setMapZoom:function(t){"in"==t?this.map.zoomIn():"out"==t&&this.map.zoomOut()},meatureTool:function(t){switch(t){case"polyline":this.meatures.drawController("polyline");break;case"polygon":this.meatures.drawController("polygon");break;case"point":this.meatures.drawController("point");break;case"circle":this.meatures.drawController("circle")}},resetMeatureTool:function(t){this.meatures.clearLayers()},changeBaseLayer:function(t){t&&(this.map.removeLayer(this.baseLayer),2==this.mapTypeNet&&"vec"===t?this.baseLayer=L.supermap.tiledMapLayer(this.fxUrl,{zIndex:0}).addTo(this.map):this.baseLayer=L.supermap.tiandituTileLayer({layerType:t,zIndex:0,url:"http://t{s}.tianditu.com/{layer}_{proj}/wmts?tk=8152cdbb730f2c6ebf35266845e82c74"}).addTo(this.map))},initThemeLayer:function(){var t=L.supermap.labelThemeLayer("ThemeLayer",{opacity:1,isAllowFeatureStyle:!0}).addTo(this.map);this.themeLayer=t,this.themeLayer.style=new SuperMap.ThemeStyle({labelRect:!0,fontColor:"#000000",fontWeight:"bolder",fontSize:"18px",fill:!0,fillColor:"#FFFFFF",fillOpacity:1,stroke:!1,strokeColor:"#8B7B8B"}),this.themeLayer.themeField="wqlindex",this.themeLayer.styleGroups=[{start:0,end:51,style:{fillColor:"#6ACD06",fontSize:"17px"}},{start:51,end:101,style:{fillColor:"#FBD12A",fontSize:"19px"}},{start:101,end:151,style:{fillColor:"#FE8800",fontSize:"22px"}},{start:151,end:201,style:{fillColor:"#FF0000",fontSize:"24px"}},{start:201,end:301,style:{fillColor:"#CC0000",fontSize:"26px"}},{start:301,end:601,style:{fillColor:"#960453",fontSize:"28px"}}]},addThemeFeatures:function(){for(var t,a=[],e=this.mapInfo,i=0;i<e.length;i++){var o=parseFloat(this.mapInfo[i].lng),s=parseFloat(this.mapInfo[i].lat),n=e[i].wqlindex;t=L.supermap.themeFeature([s,o,n],e[i]),a.push(t)}this.themeLayer.addFeatures(a)},hideShowStationName:function(t){this.stationNameLayerGroup.eachLayer(function(a){a.setOpacity(t)})},hideShowStationZhig:function(t){this.zhiguanLayerGroup.eachLayer(function(a){a.setOpacity(t)})},cgzhiguanChange:function(t){var a=1;1==t&&(a=0),this.hideShowStationZhig(t),this.hideShowStationName(a),this.stationLayerGroup.eachLayer(function(t){t.setOpacity(a)})},loadFengxSX:function(){var t=this,a=this;this.$http.get("./static/data/fengxsx.json").then(function(e){L.geoJSON(e.data,{style:function(t){t.properties.wid;return{fillColor:"red",stroke:!1,fillOpacity:1,className:"fxdtc_2"}}}).addTo(t.map);var i=document.getElementsByClassName("fxdtc_2")[0],o=i.parentNode.parentNode;console.log(o),a.initAniColorYUj(o,i)})},initAniColorYUj:function(t,a){var e=this.makeSVG("defs",{id:"colors"});t.appendChild(e);var i=this.makeSVG("linearGradient",{id:"ditujb_xx",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}),o=this.makeSVG("stop",{offset:"0%","stop-color":"#ade6cd","stop-opacity":"1"}),s=this.makeSVG("stop",{offset:"100%","stop-color":"#79d1cf","stop-opacity":"1"});document.getElementById("colors").appendChild(i),document.getElementById("ditujb_xx").appendChild(o),document.getElementById("ditujb_xx").appendChild(s),a.setAttribute("fill","url(#ditujb_xx)")},makeSVG:function(t,a){var e=document.createElementNS("http://www.w3.org/2000/svg",t);for(var i in a)e.setAttribute(i,a[i]);return e},loadFengxqW:function(){var t=this;this.$http.get("./static/data/fengxq.json").then(function(a){L.geoJSON(a.data,{style:function(t){return{fillColor:"red",fillOpacity:0}}}).addTo(t.map)})},loadFengxqWXZ:function(){var t=this,a=this;a.zwgLayer&&a.zwgLayer.remove(),this.$http.get("./static/data/fengxqz.json").then(function(e){var i=L.geoJSON(e.data,{style:function(t){return{fillColor:a.quZColorObj[t.properties.name],fillOpacity:.56,weight:2,dashArray:"5 5"}}}).addTo(t.map);a.zwgLayer=i})},hideShowQYWG:function(t){var a={};a=t?{fillOpacity:.56,opacity:1}:{fillOpacity:0,opacity:0},this.zwgLayer&&this.zwgLayer.setStyle(a)},loadAirData:function(){var t=n()(o.a.mark(function t(){var a=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:setTimeout(function(){a.markerSetup()},320);case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),childMothed:function(t){this.$emit("childMethod",t)},convertDateFromString:function(t){if(t)return new Date(t.replace(/-/,"/"))},markerSetup:function(){this.stationLayerGroup.clearLayers(),this.zhiguanLayerGroup.clearLayers(),this.stationNameLayerGroup.clearLayers();for(var t=0;t<this.mapInfo.length;t++){var a=this.mapInfo[t],e=parseFloat(a.lng),i=parseFloat(a.lat),o=a.category||"地表水自动监测站",s=a.grade,n=new Date,r=this.convertDateFromString(a.time);if(r){var l=n.getTime()-r.getTime();((l=Math.abs(l/1e3))>28800||s>10)&&(s=0)}else s=0;var c=this.airIconCreate(o,s),p=L.marker([i,e],{icon:c});p.on("click",function(t){});var m=this.aniStationGrade(s),u=L.divIcon({html:"<div class='circle-animationA'></div><div class='circle-animationB'></div>",className:m,iconSize:[60,60],iconAnchor:[30,30]}),d=L.marker([i,e],{icon:u});(s>=4||0==s)&&this.stationLayerGroup.addLayer(d),this.stationLayerGroup.addLayer(p),p.popupAnchor=[0,-10];var h=a.name,v=(this.getStationTemplateC(a),L.divIcon({html:h,className:"my-div-icon",iconSize:[120,12],iconAnchor:[12,31]})),f=L.marker([i,e],{icon:v});this.stationNameLayerGroup.addLayer(f);var g="<span class='border-text'><i></i>"+this.mapInfo[t].wqlindex+"("+this.toWQLString(this.mapInfo[t].grade)+")</span>",y=(h="<span class='border-text'>"+h+"</span>",this.mapInfo[t].grade),b=this.gradeShuiZhigClass(y),C=L.divIcon({html:"<div class='"+b+"'>"+g+h+"</div>",className:"my-div-icon"}),_=L.marker([i,e],{icon:C});_.on("click",function(t){}),this.zhiguanLayerGroup.addLayer(_)}this.hideShowStationZhig(0)},gradeShuiZhigClass:function(t){var a="lixian";switch(t){case 1:case 2:a="levoneandtwo";break;case 3:a="levoneandthree";break;case 4:a="levoneandfour";break;case 5:a="levoneandfive";break;case 6:a="levoneandsix";break;default:a="lixian"}return a},pulseIconCreate:function(){return L.icon.pulse({iconSize:[22,22],iconUrl:"./static/img/map_Location_gong_04.png",color:"#2f8"})},toWQLString:function(t){return"1"==t?"Ⅰ类":"2"==t?"Ⅱ类":"3"==t?"Ⅲ类":"4"==t?"Ⅳ类":"5"==t?"Ⅴ类":"6"==t?"劣Ⅴ类":""},aniStationGrade:function(t){switch(t){case 1:return"alarm-animation-wrapA";case 2:return"alarm-animation-wrapB";case 3:return"alarm-animation-wrapC";case 4:return"alarm-animation-wrapD";case 5:case 6:return"alarm-animation-wrapE";case 0:return"alarm-animation-wrapF"}},iconStationType:function(t){switch(t){case"地表水信息公开断面":return"gong";case"地表水出入境断面":return"jing";case"地表水区控监测断面":return"qu";case"地表水三年行动计划监测断面":return"xing";case"区级饮用水源地断面":return"yin";case"地表水镇级监测断面":return"zhen";case"地表水自动监测站":return"zi"}},airIconCreate:function(t,a){var e=this.iconStationType(t);switch(a){case 1:case 2:return L.icon({iconUrl:"./static/img/map_Location_"+e+"_01.png",iconSize:[24,31]});case 3:return L.icon({iconUrl:"./static/img/map_Location_"+e+"_02.png",iconSize:[24,31]});case 4:return L.icon({iconUrl:"./static/img/map_Location_"+e+"_03.png",iconSize:[24,31]});case 5:return L.icon({iconUrl:"./static/img/map_Location_"+e+"_04.png",iconSize:[24,31]});case 6:return L.icon({iconUrl:"./static/img/map_Location_"+e+"_05.png",iconSize:[24,31]});case 0:return L.icon({iconUrl:"./static/img/map_Location_"+e+"_06.png",iconSize:[24,31]})}},getStationTemplateC:function(t){return t.name},airMarkerColorSetup:function(t){switch(t){case 0:return"airLevelOffline";case 1:return"airLevelOne";case 2:return"airLevelTwo";case 3:return"airLevelThree";case 4:return"airLevelFour";case 5:return"airLevelFive";case 6:return"airLevelSix"}},nf:function(t){window.href=t.href},timeFormat:function(t){return t.substring(8,10)+"日 "+t.substring(11,13)+"时"}},watch:{mapInfo:{handler:function(t,a){this.loadAirData()},deep:!0},siteName:{handler:function(t,a){var e=1;"隐藏站点名称"==t?e=0:"显示站点名称"==t&&(e=1),this.hideShowStationName(e)}},mapPattern:{handler:function(t,a){var e=1;"直观"==t?e=1:"常规"==t&&(e=0),this.cgzhiguanChange(e)}},qualityGrade:{handler:function(t,a){this.hideShowQYWG(t)}},quZColorObj:{handler:function(t,a){var e=this;this.zwgLayer?this.zwgLayer.eachLayer(function(t){t.setStyle({fillColor:e.quZColorObj[t.feature.properties.name]})}):this.loadFengxqWXZ()}}}},c={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"enterprise-map-wrap212",attrs:{id:"map21"}})},staticRenderFns:[]};var p=e("VU/8")(l,c,!1,function(t){e("7Ahb")},null,null).exports,m=e("dwSH"),u={name:"",data:function(){return{lng:"",lat:"",dialogVisibleMap:!1,frequencyOption:[{name:"S"},{name:"M"},{name:"H"}],loading:!0,dialogImageUrl:"",dialogVisible:!1,visiDialog:!1,treeConfig:{showCheckbox:!1,defaultId:6},treedata:[],outfileListPre:[],insidefileListPre:[],buildfileListPre:[],outfileListP:[],insidefileListP:[],buildfileListP:[],fileList:[],file:[],insidefileList:[],insidefile:[],buildfileList:[],buildfile:[],visiDialogImg:!1,imgType:"",vTitle:"",tableData:[],stationFormData:{stationName:"",stationCode:"",stationPassworld:"",provinceId:"",areaId:"",localManagementUnits:"",basinId:"",stationRiver:"",stationType:"",surfaceWaterTypes:"",targetLevel:"",stationClassify:"",longitude:"",latitude:"",sort:"",stationProvincesUpDown:"",enabled:"",enabledTime:"",city:"",stationProperty:"",stationFunction:"",operCompanyCode:"",operCompanyName:"",stationAddress:"",stationBriefInfo:"",peripheralHistory:"",stationId:"",freUnit:"",freNumber:"",dataFrequency:"",projectCodes:"",projectCodesArr:[]},stationFormRules:{stationName:[{required:!0,message:"请输入站点名称",trigger:"blur"}],freNumber:[{required:!0,message:"请输入频率",trigger:"blur"}],stationCode:[{required:!0,message:"请输入站点编号",trigger:"blur"}],provinceId:[{required:!0,message:"请选择所属省份",trigger:"change"}],projectCodesArr:[{required:!0,message:"请选择关联因子",trigger:"change"}],areaId:[{required:!0,message:"请选择所属城市",trigger:"change"}],basinId:[{required:!0,message:"请选择所属流域",trigger:"change"}],stationRiver:[{required:!0,message:"请输入所属河流",trigger:"blur"}],surfaceWaterTypes:[{required:!0,message:"请选择地表水类型",trigger:"change"}],freUnit:[{required:!0,message:"请选择单位",trigger:"change"}],targetLevel:[{required:!0,message:"请选择水质目标等级",trigger:"change"}],longitude:[{required:!0,message:"请输入经度",trigger:"blur"}],latitude:[{required:!0,message:"请输入纬度",trigger:"blur"}],sort:[{required:!0,message:"请输入排序号",trigger:"blur"}]},paramsForamData:{projectCode:"",manufactor:"",equipmentModel:"",equipmentName:"",analyticalMethods:"",equipmentOrange:"",detectionLimit:"",upperLimit:"",lowerLimit:"",manufactureCode:"",createTime:"",isenable:"0",reagent:"",id:""},paramsFormRules:{projectCode:[{required:!0,message:"请选择参数名称",trigger:"change"}],manufactor:[{required:!0,message:"请输入厂家名称",trigger:"blur"}],equipmentModel:[{required:!0,message:"请输入仪器型号",trigger:"blur"}]},provinceData:[],areaData:[],basinData:[],stationTypeData:[],surfaceWaterData:[],targetLevelData:[],stationClassData:[],stationFunData:[],operCompanyData:[],factorData:[],equipPlaceholder:"请输入设备仪器信息",stationMn:"",paramsId:"",currentPage:1,pageSize:10,total:0,pageList:[10,20,30],fieldList:["PROJECT_NAME","EQUIPMENT_NAME","MANUFACTOR","ANALY_METHONS","REAGENT","DETECTION_LIMIT","UPPER_LIMIT","LOWER_LIMIT","PROJECT_UNIT","MANUFACTURE_CODE","CREATE_TIME","ISENABLE"]}},created:function(){this.init(),this.editorInit()},inject:["globelDelet"],methods:{getLntLat:function(t){this.lng=t.lng.toFixed(2),this.lat=t.lat.toFixed(2)},saveLngLat:function(){this.stationFormData.longitude=this.lng,this.stationFormData.latitude=this.lat,this.dialogVisibleMap=!1},paramsDelet:function(t){this.globelDelet("/SiteManagement/equipment/delete",t,this.getParams)},allparamsDelet:function(){this.globelDelet("/SiteManagement/equipment/delete",this.paramsId,this.getParams)},exportedForm:function(){var t=this.$refs.table.$el.querySelector(".el-table__header"),a={stationCodes:this.stationMn,pattern:"yyyy-MM-dd HH:mm:ss",headerProp:this.fieldList.join(",")};Object(m.a)(t,"仪器参数","","1","/SiteManagement/exports/equipmentExcel",a)},tableChange:function(t){this.paramsId="";var a=t;for(var e in a)this.paramsId+=a[e].EQUIPMENT_ID+",";this.paramsId=this.paramsId.substring(0,this.paramsId.length-1)},init:function(){var t=this;this.$http.get("/SiteManagement/area/provinceInfo").then(function(a){0==a.data.code&&(t.provinceData=a.data.content.dataList)});this.$http.post("/SiteManagement/basinn/query").then(function(a){0==a.data.code&&(t.basinData=a.data.content.dataList)}),this.$http.get("/SiteManagement/station/querySurfaceWaterTypes").then(function(a){0==a.data.code&&(t.surfaceWaterData=a.data.content.dataList)}),this.$http.post("/SiteManagement/stationType/query").then(function(a){0==a.data.code&&(t.stationTypeData=a.data.content.dataList)}),this.$http.post("/SiteManagement/stationClassify/queryAll").then(function(a){0==a.data.code&&(t.stationClassData=a.data.content.dataList)}),this.$http.get("/SiteManagement/station/queryTargetLevel").then(function(a){0==a.data.code&&(t.targetLevelData=a.data.content.dataList)}),this.$http.get("/SiteManagement/station/queryFunction").then(function(a){0==a.data.code&&(t.stationFunData=a.data.content.dataList)}),this.$http.get("/SiteManagement/operCompany/queryAll").then(function(a){0==a.data.code&&(t.operCompanyData=a.data.content.dataList)}),this.$http.post("/SiteManagement/index/query").then(function(a){0==a.data.code&&(t.factorData=a.data.content.dataList,t.factorData.unshift({projectName:"全部",projectCode:"all"}))})},provinceChange:function(){var t=this;this.$http.get("/SiteManagement/area/areaInfo",{params:{name:this.stationFormData.provinceId}}).then(function(a){0==a.data.code&&(t.areaData=a.data.content.dataList,t.stationFormData.city="",t.stationFormData.areaId="")})},areaFocus:function(){this.$refs.stationForm.validateField("provinceId",function(){})},editorInit:function(){var t=this;this.loading=!1,1==this.$route.query.code&&this.$http.get("/SiteManagement/area/areaInfo",{params:{name:this.$store.state.stationMessage.provinceId.areaId}}).then(function(a){if(0==a.data.code){if(t.areaData=a.data.content.dataList,t.stationMn=t.$store.state.stationMessage.stationMn,t.getImages(),t.getParams(),t.stationFormData={stationId:t.$store.state.stationMessage.stationId,stationName:t.$store.state.stationMessage.stationName,stationCode:t.$store.state.stationMessage.stationMn,stationPassworld:t.$store.state.stationMessage.stationPassworld,provinceId:"",areaId:"",localManagementUnits:t.$store.state.stationMessage.localMangermnetUnits,basinId:"",stationRiver:t.$store.state.stationMessage.stationRiver,stationType:"",surfaceWaterTypes:t.$store.state.stationMessage.suifaceWaterTypes,targetLevel:t.$store.state.stationMessage.targerWaterQuality,stationClassify:"",longitude:t.$store.state.stationMessage.longitude,latitude:t.$store.state.stationMessage.latitude,sort:t.$store.state.stationMessage.sort,stationProvincesUpDown:t.$store.state.stationMessage.stationProvincesUpDown,enabled:t.$store.state.stationMessage.enabled+"",enabledTime:new Date(t.$store.state.stationMessage.enableTime).format("yyyy-MM-dd hh:mm:ss"),city:"",operCompanyCode:t.$store.state.stationMessage.operCompanyId,stationProperty:t.$store.state.stationMessage.stationProperty,stationFunction:t.$store.state.stationMessage.stationFunction,stationAddress:t.$store.state.stationMessage.stationAddress,stationBriefInfo:t.$store.state.stationMessage.stationBriefInfo,peripheralHistory:t.$store.state.stationMessage.peripheralHistory,dataFrequency:"",freUnit:"",freNumber:"",projectCodesArr:[]},t.$store.state.stationMessage.dataFrequency){var e=t.$store.state.stationMessage.dataFrequency;t.stationFormData.freNumber=e.substr(0,1),t.stationFormData.freUnit=e.substr(e.length-1,1)}if(t.$store.state.stationMessage.provinceId&&(t.stationFormData.provinceId=t.$store.state.stationMessage.provinceId.areaId),t.$store.state.stationMessage.area&&(t.stationFormData.areaId=t.$store.state.stationMessage.area.areaId),t.$store.state.stationMessage.basinn&&(t.stationFormData.basinId=t.$store.state.stationMessage.basinn.basinnId),t.$store.state.stationMessage.stationType&&(t.stationFormData.stationType=t.$store.state.stationMessage.stationType.stationTypeId),t.$store.state.stationMessage.cityId&&(t.stationFormData.city=t.$store.state.stationMessage.cityId.areaId),t.$store.state.stationMessage.stationClassify&&(t.stationFormData.stationClassify=t.$store.state.stationMessage.stationClassify.stationClassifyId),t.$store.state.stationMessage.projects&&t.$store.state.stationMessage.projects.length>0){var i=t.$store.state.stationMessage.projects;for(var o in t.stationFormData.projectCodesArr=[],i)t.stationFormData.projectCodesArr.push(i[o].projectCode);i.length==t.factorData.length-1&&t.stationFormData.projectCodesArr.unshift("all")}}})},selectChange:function(t){for(var a in this.factorData)this.factorData[a].projectCode==t&&(this.equipPlaceholder=this.factorData[a].projectName+"水质自动分析仪+仪器型号")},saveParamsForm:function(t){var a=this;this.$refs[t].validate(function(e){if(!e)return!1;if(""==a.stationMn)a.$message({message:"请先新增站点再进行操作",type:"warning",duration:1500});else{var i={};i.projectCode=a.paramsForamData.projectCode,i.manufactor=a.paramsForamData.manufactor,i.equipmentModel=a.paramsForamData.equipmentModel,i.equipmentName=a.paramsForamData.equipmentName,i.analyticalMethods=a.paramsForamData.analyticalMethods,i.equipmentOrange=a.paramsForamData.equipmentOrange,i.detectionLimit=a.paramsForamData.detectionLimit,i.upperLimit=a.paramsForamData.upperLimit,i.lowerLimit=a.paramsForamData.lowerLimit,i.manufactureCode=a.paramsForamData.manufactureCode,i.createTime=a.paramsForamData.createTime,i.isenable=a.paramsForamData.isenable,i.reagent=a.paramsForamData.reagent,i.id=a.paramsForamData.id,i.stationMn=a.stationMn,a.$http.post("/SiteManagement/equipment/addOrEdit",i).then(function(e){0==e.data.code&&(a.$message({message:e.data.message,type:"success",duration:1500}),a.visiDialog=!1,a.cancelParams(t),a.getParams())})}})},editorParams:function(t){this.visiDialog=!0,this.paramsForamData={projectCode:t.PROJECT_CODE,manufactor:t.MANUFACTOR,equipmentModel:t.EQUIPMENT_MODEL,equipmentName:t.EQUIPMENT_NAME,analyticalMethods:t.ANALY_METHONS,equipmentOrange:t.EQUIPMENT_ORANGE,detectionLimit:t.DETECTION_LIMIT,upperLimit:t.UPPER_LIMIT,lowerLimit:t.LOWER_LIMIT,manufactureCode:t.MANUFACTURE_CODE,createTime:new Date(t.CREATE_TIME).format("yyyy-MM-dd hh:mm:ss"),isenable:t.ISENABLE,reagent:t.REAGENT,id:t.ID}},factorChange:function(t){var a=[];if("all"==t){for(var e=0;e<this.factorData.length;e++)a.push(this.factorData[e].projectCode);this.stationFormData.projectCodesArr=a}},addParams:function(){this.visiDialog=!0,this.paramsForamData.id=""},cancelParams:function(t){this.visiDialog=!1,this.resetForm(t),this.paramsForamData.projectCode="",this.paramsForamData.manufactor="",this.paramsForamData.equipmentModel="",this.paramsForamData.equipmentName="",this.paramsForamData.analyticalMethods="",this.paramsForamData.equipmentOrange="",this.paramsForamData.detectionLimit="",this.paramsForamData.upperLimit="",this.paramsForamData.lowerLimit="",this.paramsForamData.manufactureCode="",this.paramsForamData.createTime="",this.paramsForamData.isenable="0",this.paramsForamData.reagent=""},resetForm:function(t){this.$refs[t].resetFields()},bl:function(t,a){},uploadFile:function(t){},upload:function(t){this.visiDialogImg=!0,this.imgType=t,"out"==t?this.vTitle="外景图片上传":"inside"==t?this.vTitle="内景图片上传":"build"==t&&(this.vTitle="建设图片上传")},uploadImg:function(){var t=this,a=new FormData;for(var e in a.append("mn",this.stationMn),this.file)a.append("files",this.file[e].raw);a.append("type",this.imgType);this.$http.post("/SiteManagement/station/addImage",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){t.file=[],t.fileList=[],t.visiDialogImg=!1,t.getImages()})},getImages:function(){var t=this;this.$http.get("/SiteManagement/station/queryImage",{params:{mn:this.stationMn}}).then(function(a){var e=a.data.content.dataList;t.outfileListPre=[],t.insidefileListPre=[],t.buildfileListPre=[];for(var i=0;i<e.length;i++)if("OUT_IMAGE"==e[i].type)for(var o=0;o<e[i].path.length;o++)t.outfileListPre.push({name:e[i].type,url:"http://120.77.41.22:61007/SiteManagement-Service/image/"+e[i].path[o]}),t.outfileListP.push("http://120.77.41.22:61007/SiteManagement-Service/image/"+e[i].path[o]);else if("INSIDE_IMAGE"==e[i].type)for(var s=0;s<e[i].path.length;s++)t.insidefileListPre.push({name:e[i].type,url:"http://120.77.41.22:61007/SiteManagement-Service/image/"+e[i].path[s]}),t.insidefileListP.push("http://120.77.41.22:61007/SiteManagement-Service/image/"+e[i].path[s]);else if("BUILD_IMAGE"==e[i].type)for(var n=0;n<e[i].path.length;n++)t.buildfileListPre.push({name:e[i].type,url:"http://120.77.41.22:61007/SiteManagement-Service/image/"+e[i].path[n]}),t.buildfileListP.push("http://120.77.41.22:61007/SiteManagement-Service/image/"+e[i].path[n])})},getParams:function(){var t=this;this.loading=!0,this.$http.get("/SiteManagement/equipment/queryInstrumentParameters",{params:{stationCodes:this.stationMn,pageNumber:this.currentPage,pageSize:this.pageSize}}).then(function(a){0==a.data.code&&(t.tableData=a.data.content.dataList,t.total=a.data.content.totalRecords,t.loading=!1)})},fileChange:function(t,a){this.file=a},insidefileChange:function(t,a){this.insidefile=a},buildfileChange:function(t,a){this.buildfile=a},handleRemove:function(t,a){},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},indexMethod:function(t){return t+1},search:function(t){},closess:function(t){t()},submitSites:function(t){var a=this;this.stationFormData.projectCodes=this.stationFormData.projectCodesArr.join(","),this.$refs[t].validate(function(t){if(!t)return!1;for(var e in a.operCompanyData)a.operCompanyData[e].operCompanyId==a.stationFormData.operCompanyCode&&(a.stationFormData.operCompanyName=a.operCompanyData[e].operCompanyName);a.stationFormData.dataFrequency=a.stationFormData.freNumber+a.stationFormData.freUnit;var i=a.stationFormData.projectCodesArr;i.indexOf("all")>0&&i.splice(i.indexOf("all"),1),a.stationFormData.projectCodes=i.join(","),a.$http.post("/SiteManagement/station/editOrAdd",a.stationFormData).then(function(t){a.$message({message:t.data.message,type:"success",duration:1500}),a.stationMn=t.data.content.info[0].stationMn,a.stationFormData.stationId=t.data.content.info[0].stationId})})},additionalSites:function(){},checkedNode:function(t){}},computed:{stationInfo:{get:function(){return this.$store.state.stationInfo}},totalPageNumber:function(){return Math.ceil(this.total/this.pageSize)}},watch:{stationInfo:function(t,a){}},components:{mapComp:p}},d={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"historypage tapStyle secondary-page-mode",staticStyle:{"margin-top":"0px"}},[e("div",{staticClass:"currency-mode-wrap",staticStyle:{height:"100%","margin-top":"0px"}},[e("yf-tabs",{attrs:{type:"border-card"}},[e("yf-tab-pane",{attrs:{label:"站点信息"}},[e("el-scrollbar",{staticStyle:{height:"100%"}},[e("div",{staticClass:"baseinfo"},[e("el-form",{ref:"stationForm",attrs:{model:t.stationFormData,rules:t.stationFormRules}},[e("ul",[e("li",[e("span",{staticClass:"layoutspan"},[e("i",[t._v("*")]),t._v("站点名称 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-form-item",{attrs:{prop:"stationName"}},[e("el-input",{model:{value:t.stationFormData.stationName,callback:function(a){t.$set(t.stationFormData,"stationName",a)},expression:"stationFormData.stationName"}})],1)],1),t._v(" "),e("span",{staticClass:"layoutspan"},[e("i",[t._v("*")]),t._v("站点编号 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-form-item",{attrs:{prop:"stationCode"}},[e("el-input",{model:{value:t.stationFormData.stationCode,callback:function(a){t.$set(t.stationFormData,"stationCode",a)},expression:"stationFormData.stationCode"}})],1)],1),t._v(" "),e("span",{staticClass:"layoutspan"},[t._v("密码 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-input",{model:{value:t.stationFormData.stationPassworld,callback:function(a){t.$set(t.stationFormData,"stationPassworld",a)},expression:"stationFormData.stationPassworld"}})],1)]),t._v(" "),e("li",[e("span",{staticClass:"layoutspan"},[e("i",[t._v("*")]),t._v("所属省份 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-form-item",{attrs:{prop:"provinceId"}},[e("el-select",{attrs:{placeholder:"请选择"},on:{change:t.provinceChange},model:{value:t.stationFormData.provinceId,callback:function(a){t.$set(t.stationFormData,"provinceId",a)},expression:"stationFormData.provinceId"}},t._l(t.provinceData,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),t._v(" "),e("span",{staticClass:"layoutspan"},[e("i",[t._v("*")]),t._v("所属城市 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-form-item",{attrs:{prop:"areaId"}},[e("el-select",{attrs:{placeholder:"请选择"},on:{focus:t.areaFocus},model:{value:t.stationFormData.areaId,callback:function(a){t.$set(t.stationFormData,"areaId",a)},expression:"stationFormData.areaId"}},t._l(t.areaData,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),t._v(" "),e("span",{staticClass:"layoutspan"},[t._v("当地管理单位 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-input",{model:{value:t.stationFormData.localManagementUnits,callback:function(a){t.$set(t.stationFormData,"localManagementUnits",a)},expression:"stationFormData.localManagementUnits"}})],1)]),t._v(" "),e("li",[e("span",{staticClass:"layoutspan"},[e("i",[t._v("*")]),t._v("所属流域 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-form-item",{attrs:{prop:"basinId"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.stationFormData.basinId,callback:function(a){t.$set(t.stationFormData,"basinId",a)},expression:"stationFormData.basinId"}},t._l(t.basinData,function(t){return e("el-option",{key:t.basinnId,attrs:{label:t.basinnName,value:t.basinnId}})}),1)],1)],1),t._v(" "),e("span",{staticClass:"layoutspan"},[e("i",[t._v("*")]),t._v("所属河流 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-form-item",{attrs:{prop:"stationRiver"}},[e("el-input",{model:{value:t.stationFormData.stationRiver,callback:function(a){t.$set(t.stationFormData,"stationRiver",a)},expression:"stationFormData.stationRiver"}})],1)],1),t._v(" "),e("span",{staticClass:"layoutspan"},[t._v("站点分类 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.stationFormData.stationType,callback:function(a){t.$set(t.stationFormData,"stationType",a)},expression:"stationFormData.stationType"}},t._l(t.stationTypeData,function(t){return e("el-option",{key:t.stationTypeId,attrs:{label:t.stationTypeName,value:t.stationTypeId}})}),1)],1)]),t._v(" "),e("li",[e("span",{staticClass:"layoutspan"},[e("i",[t._v("*")]),t._v("地表水类别 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-form-item",{attrs:{prop:"surfaceWaterTypes"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.stationFormData.surfaceWaterTypes,callback:function(a){t.$set(t.stationFormData,"surfaceWaterTypes",a)},expression:"stationFormData.surfaceWaterTypes"}},t._l(t.surfaceWaterData,function(t){return e("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1)],1),t._v(" "),e("span",{staticClass:"layoutspan"},[e("i",[t._v("*")]),t._v("水质目标级别 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-form-item",{attrs:{prop:"targetLevel"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.stationFormData.targetLevel,callback:function(a){t.$set(t.stationFormData,"targetLevel",a)},expression:"stationFormData.targetLevel"}},t._l(t.targetLevelData,function(t){return e("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1)],1),t._v(" "),e("span",{staticClass:"layoutspan"},[t._v("站点类型 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.stationFormData.stationClassify,callback:function(a){t.$set(t.stationFormData,"stationClassify",a)},expression:"stationFormData.stationClassify"}},t._l(t.stationClassData,function(t){return e("el-option",{key:t.stationClassifyId,attrs:{label:t.stationClassifyName,value:t.stationClassifyId}})}),1)],1)]),t._v(" "),e("li",[e("span",{staticClass:"layoutspan"},[e("i",[t._v("*")]),t._v("经度-纬度 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"75px"}},[e("el-form-item",{attrs:{prop:"longitude"}},[e("el-input",{model:{value:t.stationFormData.longitude,callback:function(a){t.$set(t.stationFormData,"longitude",a)},expression:"stationFormData.longitude"}})],1)],1),t._v("\n                            -\n                             "),e("div",{staticClass:"layoutBox",staticStyle:{width:"75px"}},[e("el-form-item",{attrs:{prop:"latitude"}},[e("el-input",{model:{value:t.stationFormData.latitude,callback:function(a){t.$set(t.stationFormData,"latitude",a)},expression:"stationFormData.latitude"}})],1)],1),t._v(" "),e("span",{staticClass:"sousuo",on:{click:function(a){t.dialogVisibleMap=!0}}},[e("i",{staticClass:"el-icon-location-outline",staticStyle:{"font-size":"16px",color:"#C0C4CC"}})]),t._v(" "),e("span",{staticClass:"layoutspan"},[e("i",[t._v("*")]),t._v("排序 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-form-item",{attrs:{prop:"sort"}},[e("el-input",{attrs:{type:"number"},model:{value:t.stationFormData.sort,callback:function(a){t.$set(t.stationFormData,"sort",a)},expression:"stationFormData.sort"}})],1)],1),t._v(" "),e("span",{staticClass:"layoutspan"},[t._v("上下游省份 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-input",{model:{value:t.stationFormData.stationProvincesUpDown,callback:function(a){t.$set(t.stationFormData,"stationProvincesUpDown",a)},expression:"stationFormData.stationProvincesUpDown"}})],1)]),t._v(" "),e("li",[e("span",{staticClass:"layoutspan"},[t._v("是否验收 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-radio",{attrs:{label:"1"},model:{value:t.stationFormData.enabled,callback:function(a){t.$set(t.stationFormData,"enabled",a)},expression:"stationFormData.enabled"}},[t._v("是")]),t._v(" "),e("el-radio",{attrs:{label:"0"},model:{value:t.stationFormData.enabled,callback:function(a){t.$set(t.stationFormData,"enabled",a)},expression:"stationFormData.enabled"}},[t._v("否")])],1),t._v(" "),e("span",{staticClass:"layoutspan"},[t._v("验收时间 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.stationFormData.enabledTime,callback:function(a){t.$set(t.stationFormData,"enabledTime",a)},expression:"stationFormData.enabledTime"}})],1),t._v(" "),e("span",{staticClass:"layoutspan"},[t._v("考核城市 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-select",{attrs:{placeholder:"请选择"},on:{focus:t.areaFocus},model:{value:t.stationFormData.city,callback:function(a){t.$set(t.stationFormData,"city",a)},expression:"stationFormData.city"}},t._l(t.areaData,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)]),t._v(" "),e("li",[e("span",{staticClass:"layoutspan"},[t._v("站点属性 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-input",{model:{value:t.stationFormData.stationProperty,callback:function(a){t.$set(t.stationFormData,"stationProperty",a)},expression:"stationFormData.stationProperty"}})],1),t._v(" "),e("span",{staticClass:"layoutspan"},[t._v("站点功能 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.stationFormData.stationFunction,callback:function(a){t.$set(t.stationFormData,"stationFunction",a)},expression:"stationFormData.stationFunction"}},t._l(t.stationFunData,function(t){return e("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1),t._v(" "),e("span",{staticClass:"layoutspan"},[t._v("运维单位 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.stationFormData.operCompanyCode,callback:function(a){t.$set(t.stationFormData,"operCompanyCode",a)},expression:"stationFormData.operCompanyCode"}},t._l(t.operCompanyData,function(t){return e("el-option",{key:t.operCompanyId,attrs:{label:t.operCompanyName,value:t.operCompanyId}})}),1)],1)]),t._v(" "),e("li",[e("span",{staticClass:"layoutspan"},[e("i",[t._v("*")]),t._v("数据发送频率 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"100px","margin-right":"6px"}},[e("el-form-item",{attrs:{prop:"freNumber"}},[e("el-input",{attrs:{placeholder:"请输入",type:"number"},model:{value:t.stationFormData.freNumber,callback:function(a){t.$set(t.stationFormData,"freNumber",a)},expression:"stationFormData.freNumber"}})],1)],1),t._v(" "),e("div",{staticClass:"layoutBox",staticStyle:{width:"90px"}},[e("el-form-item",{attrs:{prop:"freUnit"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.stationFormData.freUnit,callback:function(a){t.$set(t.stationFormData,"freUnit",a)},expression:"stationFormData.freUnit"}},t._l(t.frequencyOption,function(t){return e("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1)],1),t._v(" "),e("span",{staticClass:"layoutspan"},[e("i",[t._v("*")]),t._v("关联因子 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[e("el-form-item",{attrs:{prop:"projectCodesArr"}},[e("el-select",{attrs:{placeholder:"请选择",multiple:"","collapse-tags":""},on:{change:t.factorChange},model:{value:t.stationFormData.projectCodesArr,callback:function(a){t.$set(t.stationFormData,"projectCodesArr",a)},expression:"stationFormData.projectCodesArr"}},t._l(t.factorData,function(t){return e("el-option",{key:t.projectCode,attrs:{label:t.projectName,value:t.projectCode}})}),1)],1)],1)]),t._v(" "),e("li",[e("span",{staticClass:"layoutspan"},[t._v("站点地址 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"863px"}},[e("el-input",{model:{value:t.stationFormData.stationAddress,callback:function(a){t.$set(t.stationFormData,"stationAddress",a)},expression:"stationFormData.stationAddress"}})],1)]),t._v(" "),e("li",[e("span",{staticClass:"layoutspan"},[t._v("站点简介 : ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"863px"}},[e("el-input",{attrs:{type:"textarea",rows:6},model:{value:t.stationFormData.stationBriefInfo,callback:function(a){t.$set(t.stationFormData,"stationBriefInfo",a)},expression:"stationFormData.stationBriefInfo"}})],1)]),t._v(" "),e("li",[e("span",{staticClass:"layoutspan"},[t._v("历史文化介绍:\n                              "),e("br"),t._v("(周边环境) ")]),t._v(" \n                            "),e("div",{staticClass:"layoutBox",staticStyle:{width:"863px"}},[e("el-input",{attrs:{type:"textarea",rows:6},model:{value:t.stationFormData.peripheralHistory,callback:function(a){t.$set(t.stationFormData,"peripheralHistory",a)},expression:"stationFormData.peripheralHistory"}})],1)])])])],1),t._v(" "),e("div"),t._v(" "),e("div",{staticClass:"btn",staticStyle:{"text-align":"center"}},[e("el-button",{attrs:{type:"noticon"},on:{click:function(a){return t.submitSites("stationForm")}}},[t._v("保存")])],1)])],1),t._v(" "),e("yf-tab-pane",{attrs:{label:"仪器参数"}},[e("div",{staticClass:"secondary-toolbar"},[e("el-button",{on:{click:t.addParams}},[e("i",{staticClass:"iconfont icon-tianjia1"}),t._v("新增")]),t._v(" "),e("el-button",{attrs:{type:"delet"},on:{click:t.exportedForm}},[e("i",{staticClass:"iconfont icon-daochu"}),t._v("导出")]),t._v(" "),e("el-button",{attrs:{type:"delet"},on:{click:t.allparamsDelet}},[e("i",{staticClass:"iconfont icon-shanchu"}),t._v("批量删除")]),t._v("\n                      因水质评价统计，将统一设置检出限计算：高锰酸盐指数 0.5(mg/L)、氨氮 0.05(mg/L)、总磷 0.01(mg/L)、总氮 0.1(mg/L)\n                ")],1),t._v(" "),e("div",{staticClass:"tablebox"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{"tooltip-effect":"light",data:t.tableData,border:"","element-loading-text":"加载中","element-loading-spinner":"loading-type-a","element-loading-background":"rgba(255, 255, 255, 1)"},on:{"selection-change":t.tableChange}},[e("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),e("el-table-column",{attrs:{type:"index",label:"序号",index:t.indexMethod,width:"50"}}),t._v(" "),e("el-table-column",{attrs:{prop:"PROJECT_NAME","show-overflow-tooltip":"",label:"监测项目"}}),t._v(" "),e("el-table-column",{attrs:{prop:"EQUIPMENT_NAME","show-overflow-tooltip":"",label:"分析仪器"}}),t._v(" "),e("el-table-column",{attrs:{prop:"MANUFACTOR","show-overflow-tooltip":"",label:"仪器厂家"}}),t._v(" "),e("el-table-column",{attrs:{prop:"ANALY_METHONS","show-overflow-tooltip":"",label:"分析方法"}}),t._v(" "),e("el-table-column",{attrs:{prop:"REAGENT","show-overflow-tooltip":"",label:"试剂"}}),t._v(" "),e("el-table-column",{attrs:{prop:"DETECTION_LIMIT","show-overflow-tooltip":"",width:"66",label:"检出限"}}),t._v(" "),e("el-table-column",{attrs:{prop:"UPPER_LIMIT","show-overflow-tooltip":"",width:"134",label:"标准上限"}}),t._v(" "),e("el-table-column",{attrs:{prop:"LOWER_LIMIT","show-overflow-tooltip":"",width:"134",label:"标准下限"}}),t._v(" "),e("el-table-column",{attrs:{prop:"PROJECT_UNIT","show-overflow-tooltip":"",width:"79",label:"单位"}}),t._v(" "),e("el-table-column",{attrs:{prop:"MANUFACTURE_CODE","show-overflow-tooltip":"",width:"120",label:"出厂编号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"CREATE_TIME","show-overflow-tooltip":"",width:"180",label:"安装时间"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[t._v("\n                                "+t._s(new Date(a.row.CREATE_TIME).format("yyyy-MM-dd hh:mm:ss"))+"\n                             ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"ISENABLE","show-overflow-tooltip":"",width:"75",label:"是否启用"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",["是"==a.row.ISENABLE?e("i",{staticClass:"iconfont icon-chenggongzhuangtai",staticStyle:{color:"#36C25E","font-size":"20px"}}):t._e(),t._v(" "),"是"!=a.row.ISENABLE?e("i",{staticClass:"iconfont icon-meiyouchenggongdezhuangtai",staticStyle:{color:"#FF3333","font-size":"20px"}}):t._e()])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"name",width:"180",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("el-button",{attrs:{type:"secondBtn"},on:{click:function(e){return t.editorParams(a.row)}}},[t._v("编辑")]),t._v(" "),e("el-button",{attrs:{type:"secondBtn"},on:{click:function(e){return t.paramsDelet(a.row.EQUIPMENT_ID)}}},[t._v("删除")])],1)]}}])})],1),t._v(" "),e("div",{staticClass:"paginationBox"},[e("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,background:"",small:!0,"popper-class":"select-common-option","page-sizes":t.pageList,layout:"total,sizes,slot,->,prev, pager, next, jumper",total:t.total},on:{"size-change":t.paginationSizeChange,"current-change":t.paginationChange,"update:currentPage":function(a){t.currentPage=a},"update:current-page":function(a){t.currentPage=a}}},[e("span",{staticClass:"el-pagination__current"},[t._v("当前第"+t._s(t.currentPage)+"/"+t._s(t.totalPageNumber)+"页")])])],1)],1)]),t._v(" "),e("yf-tab-pane",{attrs:{label:"站点图片"}},[e("div",{staticClass:"uploadBtnBox"},[e("el-button",{on:{click:function(a){return t.upload("out")}}},[e("i",{staticClass:"iconfont icon-shangchuan1"}),t._v("上传外景图片")]),e("el-button",{on:{click:function(a){return t.upload("inside")}}},[e("i",{staticClass:"iconfont icon-shangchuan1"}),t._v("上传内景图片")]),e("el-button",{on:{click:function(a){return t.upload("build")}}},[e("i",{staticClass:"iconfont icon-shangchuan1"}),t._v("上传建设图片")]),t._v(" "),e("span",[t._v("图片适合比例16：9，最小宽高 400 * 255，建议大小1MB以下；二维码站点介绍图片优先展示八方位外景图")])],1),t._v(" "),e("div",{staticClass:"stationManage",staticStyle:{height:"calc(100% - 70px)"}},[e("el-scrollbar",{staticStyle:{height:"100%"}},[e("ul",{staticClass:"uploadImg"},[e("li",[e("p",[t._v("八方位-外景图片")]),t._v(" "),t._l(t.outfileListPre,function(a,i){return e("el-image",{key:i,staticStyle:{width:"180px",height:"180px"},attrs:{src:a.url,"preview-src-list":t.outfileListP}})})],2),t._v(" "),e("li",[e("p",[t._v("八方位-内景图片")]),t._v(" "),t._l(t.insidefileListPre,function(a,i){return e("el-image",{key:i,staticStyle:{width:"200px",height:"200px"},attrs:{src:a.url,"preview-src-list":t.insidefileListP}})})],2),t._v(" "),e("li",[e("p",[t._v("八方位-建设图片")]),t._v(" "),t._l(t.buildfileListPre,function(a,i){return e("el-image",{key:i,staticStyle:{width:"200px",height:"200px"},attrs:{src:a.url,"preview-src-list":t.buildfileListP}})})],2)])])],1)])],1)],1),t._v(" "),e("el-dialog",{attrs:{visible:t.visiDialog,width:"635px",title:"仪器参数","before-close":t.closess},on:{"update:visible":function(a){t.visiDialog=a}}},[e("div",{staticClass:"dialogcontent"},[e("div",{staticClass:"dialog-layout"},[e("el-form",{ref:"paramsForm",attrs:{model:t.paramsForamData,rules:t.paramsFormRules}},[e("ul",{staticClass:"formul"},[e("li",[e("div",{staticStyle:{"margin-right":"42px"}},[e("span",{staticClass:"layoutspan"},[t._v("参数名称 : ")]),t._v(" \n                              "),e("div",{staticClass:"layoutBox",staticStyle:{width:"436px"}},[e("el-form-item",{attrs:{prop:"projectCode"}},[e("el-select",{attrs:{placeholder:"请选择参数名称",filterable:"","allow-create":"","default-first-option":""},on:{change:t.selectChange},model:{value:t.paramsForamData.projectCode,callback:function(a){t.$set(t.paramsForamData,"projectCode",a)},expression:"paramsForamData.projectCode"}},t._l(t.factorData,function(t){return e("el-option",{key:t.projectCode,attrs:{label:t.projectName,value:t.projectCode}})}),1)],1)],1)])]),t._v(" "),e("li",[e("div",[e("span",{staticClass:"layoutspan"},[t._v("厂家 : ")]),t._v(" \n                              "),e("div",{staticClass:"layoutBox",staticStyle:{width:"436px"}},[e("el-form-item",{attrs:{prop:"manufactor"}},[e("el-input",{attrs:{placeholder:"请输入厂家"},model:{value:t.paramsForamData.manufactor,callback:function(a){t.$set(t.paramsForamData,"manufactor",a)},expression:"paramsForamData.manufactor"}})],1)],1)])]),t._v(" "),e("li",[e("div",{staticStyle:{"margin-right":"42px"}},[e("span",{staticClass:"layoutspan"},[t._v("仪器型号 : ")]),t._v(" \n                              "),e("div",{staticClass:"layoutBox",staticStyle:{width:"436px"}},[e("el-form-item",{attrs:{prop:"equipmentModel"}},[e("el-input",{attrs:{placeholder:"请输入仪器型号"},model:{value:t.paramsForamData.equipmentModel,callback:function(a){t.$set(t.paramsForamData,"equipmentModel",a)},expression:"paramsForamData.equipmentModel"}})],1)],1)])]),t._v(" "),e("li",[e("div",{staticStyle:{"margin-right":"42px"}},[e("span",{staticClass:"layoutspan"},[t._v("仪器设备 : ")]),t._v(" \n                              "),e("div",{staticClass:"layoutBox",staticStyle:{width:"436px"}},[e("el-input",{attrs:{placeholder:t.equipPlaceholder},model:{value:t.paramsForamData.equipmentName,callback:function(a){t.$set(t.paramsForamData,"equipmentName",a)},expression:"paramsForamData.equipmentName"}})],1)])]),t._v(" "),e("li",[e("div",[e("span",{staticClass:"layoutspan"},[t._v("分析方法 : ")]),t._v(" \n                              "),e("div",{staticClass:"layoutBox",staticStyle:{width:"436px"}},[e("el-input",{attrs:{placeholder:"请输入分析方法"},model:{value:t.paramsForamData.analyticalMethods,callback:function(a){t.$set(t.paramsForamData,"analyticalMethods",a)},expression:"paramsForamData.analyticalMethods"}})],1)])]),t._v(" "),e("li",[e("div",{staticStyle:{"margin-right":"42px"}},[e("span",{staticClass:"layoutspan"},[t._v("仪器量程 : ")]),t._v(" \n                              "),e("div",{staticClass:"layoutBox",staticStyle:{width:"436px"}},[e("el-input",{attrs:{placeholder:"请输入仪器量程"},model:{value:t.paramsForamData.equipmentOrange,callback:function(a){t.$set(t.paramsForamData,"equipmentOrange",a)},expression:"paramsForamData.equipmentOrange"}})],1)])]),t._v(" "),e("li",[e("div",{staticStyle:{"margin-right":"42px"}},[e("span",{staticClass:"layoutspan"},[t._v("检出限 : ")]),t._v(" \n                              "),e("div",{staticClass:"layoutBox",staticStyle:{width:"436px"}},[e("el-input",{attrs:{placeholder:"请输入检出限"},model:{value:t.paramsForamData.detectionLimit,callback:function(a){t.$set(t.paramsForamData,"detectionLimit",a)},expression:"paramsForamData.detectionLimit"}})],1)])]),t._v(" "),e("li",[e("div",[e("span",{staticClass:"layoutspan"},[t._v("标准上下限 : ")]),t._v(" \n                              "),e("div",{staticClass:"layoutBox",staticStyle:{width:"214px"}},[e("el-input",{attrs:{placeholder:"请输入标准上限"},model:{value:t.paramsForamData.upperLimit,callback:function(a){t.$set(t.paramsForamData,"upperLimit",a)},expression:"paramsForamData.upperLimit"}})],1),t._v("-\n                              "),e("div",{staticClass:"layoutBox",staticStyle:{width:"214px"}},[e("el-input",{attrs:{placeholder:"请输入标准下限"},model:{value:t.paramsForamData.lowerLimit,callback:function(a){t.$set(t.paramsForamData,"lowerLimit",a)},expression:"paramsForamData.lowerLimit"}})],1)])]),t._v(" "),e("li",[e("div",{staticStyle:{"margin-right":"42px"}},[e("span",{staticClass:"layoutspan"},[t._v("出厂编号 : ")]),t._v(" \n                              "),e("div",{staticClass:"layoutBox",staticStyle:{width:"436px"}},[e("el-input",{attrs:{placeholder:"请输入出厂编号"},model:{value:t.paramsForamData.manufactureCode,callback:function(a){t.$set(t.paramsForamData,"manufactureCode",a)},expression:"paramsForamData.manufactureCode"}})],1)])]),t._v(" "),e("li",[e("div",[e("span",{staticClass:"layoutspan"},[t._v("安装时间 : ")]),t._v(" \n                              "),e("div",{staticClass:"layoutBox",staticStyle:{width:"436px"}},[e("el-date-picker",{attrs:{type:"datetime","clear-icon":"clearIcon","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择安装时间"},model:{value:t.paramsForamData.createTime,callback:function(a){t.$set(t.paramsForamData,"createTime",a)},expression:"paramsForamData.createTime"}})],1)])]),t._v(" "),e("li",[e("div",{staticStyle:{"margin-right":"42px"}},[e("span",{staticClass:"layoutspan"},[t._v("是否开启 : ")]),t._v(" \n                              "),e("div",{staticClass:"layoutBox",staticStyle:{width:"200px",height:"30px","line-height":"30px"}},[e("el-switch",{attrs:{width:"180px","active-text":"否","inactive-text":"是","active-value":"1","inactive-value":"0"},model:{value:t.paramsForamData.isenable,callback:function(a){t.$set(t.paramsForamData,"isenable",a)},expression:"paramsForamData.isenable"}})],1)])]),t._v(" "),e("li",[e("span",{staticClass:"layoutspan"},[t._v("试剂 : ")]),t._v(" \n                              "),e("div",{staticClass:"layoutBox",staticStyle:{width:"436px"}},[e("el-input",{model:{value:t.paramsForamData.reagent,callback:function(a){t.$set(t.paramsForamData,"reagent",a)},expression:"paramsForamData.reagent"}})],1)])])])],1)]),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"noticon"},on:{click:function(a){return t.saveParamsForm("paramsForm")}}},[t._v("保 存")]),t._v(" "),e("el-button",{attrs:{type:"noticonsecondBtn"},on:{click:function(a){return t.cancelParams("paramsForm")}}},[t._v("关 闭")])],1)]),t._v(" "),e("el-dialog",{attrs:{visible:t.visiDialogImg,width:"1000px",title:t.vTitle},on:{"update:visible":function(a){t.visiDialogImg=a}}},[e("div",{staticStyle:{height:"400px"}},[e("p",[t._v("点击添加图片:")]),t._v(" "),e("el-upload",{ref:"outUpload",attrs:{"file-list":t.fileList,"on-change":t.fileChange,action:"/","list-type":"picture-card","auto-upload":!1,"on-preview":t.handlePictureCardPreview,"http-request":t.uploadFile,"on-remove":t.handleRemove}},[e("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"noticon"},on:{click:t.uploadImg}},[t._v("上 传")]),t._v(" "),e("el-button",{attrs:{type:"noticonsecondBtn"}},[t._v("取 消")])],1)]),t._v(" "),e("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(a){t.dialogVisible=a}}},[e("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),t._v(" "),e("el-dialog",{attrs:{visible:t.dialogVisibleMap,width:"1000px",title:"地图"},on:{"update:visible":function(a){t.dialogVisibleMap=a}}},[e("div",{staticStyle:{height:"500px",position:"relative"}},[e("div",{staticStyle:{position:"absolute",top:"12px",left:"12px","z-index":"9999"}},[e("el-input",{staticStyle:{width:"100px"},model:{value:t.lng,callback:function(a){t.lng=a},expression:"lng"}}),t._v(" "),e("el-input",{staticStyle:{width:"100px"},model:{value:t.lat,callback:function(a){t.lat=a},expression:"lat"}})],1),t._v(" "),e("map-Comp",{on:{getLntLat:t.getLntLat}})],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"noticon"},on:{click:t.saveLngLat}},[t._v("确 定")]),t._v(" "),e("el-button",{attrs:{type:"noticonsecondBtn"},on:{click:function(a){t.dialogVisibleMap=!1}}},[t._v("取 消")])],1)])],1)},staticRenderFns:[]};var h=e("VU/8")(u,d,!1,function(t){e("2Xe6")},"data-v-1901ffa6",null);a.default=h.exports}});
//# sourceMappingURL=18.fbb6d343e55ad60004d6.js.map