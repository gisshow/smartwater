webpackJsonp([44],{pnQH:function(t,a){},q7dw:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("dwSH"),o={name:"dataAnalysis",data:function(){return{dateRange:"",tableData:[],stationId:"",currentPage:1,pageSize:10,totalRecords:0,pageList:[10,15,20]}},computed:{totalPage:function(){var t;return t=Math.ceil(this.totalRecords/this.pageSize),console.log(),isNaN(t)?1:0===t||"NaN"===t?1:t},stationInfo:{get:function(){return this.$store.state.stationInfo}}},methods:{paginationSizeChange:function(t){this.pageSize=t,this.getTableData()},paginationChange:function(t){this.currentPage=t,this.getTableData()},getTableData:function(){var t=this;this.$http.get("/Quality/qualityAnalysis/effectivenessData",{params:{startTime:this.dateRange[0].format("yyyy-MM-dd"),endTime:this.dateRange[1].format("yyyy-MM-dd"),stationCodes:this.stationId,pageNumber:this.currentPage,pageSize:this.pageSize}}).then(function(a){0===a.data.code&&(t.tableData=a.data.content.dataList,t.totalRecords=a.data.content.totalRecords)}).catch(function(t){})},exportExcel:function(){var t=this.$refs.table.$el.querySelector(".el-table__header"),a={headerProp:"stationProvin,riverBasin,stationName,projName,yUploadNum,sUploadNum,uploadRate,validNum,validRate",startTime:this.dateRange[0].format("yyyy-MM-dd"),endTime:this.dateRange[1].format("yyyy-MM-dd"),stationCodes:this.stationId,tableType:"DATA_VALIDITY",pattern:"yyyy-MM-dd"};Object(n.a)(t,"数据有效性分析","","1","/Quality/exports/qualityControlExcel",a)}},created:function(){this.$store.commit("setShowlefttree",!0),this.dateRange=[new Date((new Date).setDate((new Date).getDate()-7)),new Date]},watch:{stationInfo:function(t){if(t.length>0){var a=[];t.forEach(function(t){a.push(t.nodeId)}),this.stationId=a.join(","),this.getTableData()}}}},i={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dataAnalysis tapStyle"},[e("div",{staticClass:"toolbox"},[e("div",{staticClass:"toolbox-row"},[e("span",[t._v("时间选择 : ")]),t._v(" "),e("div",{staticClass:"layoutBox",staticStyle:{width:"242px"}},[e("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.dateRange,callback:function(a){t.dateRange=a},expression:"dateRange"}})],1),t._v(" \n      "),e("el-button",{on:{click:t.getTableData}},[e("i",{staticClass:"iconfont icon-sousuo"}),t._v("查询")]),t._v(" "),e("el-button",{attrs:{type:"delet"},on:{click:t.exportExcel}},[e("i",{staticClass:"iconfont icon-daochu"}),t._v("导出")])],1)]),t._v(" "),e("div",{staticClass:"containerbox",staticStyle:{height:"calc(100% - 6px)",padding:"6px 0"}},[e("div",{staticClass:"table-wrap",staticStyle:{height:"calc(100% - 35px)"}},[e("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"100%",border:""}},[e("el-table-column",{attrs:{type:"index",label:"序号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"stationProvin",label:"行政区"}}),t._v(" "),e("el-table-column",{attrs:{prop:"riverBasin",label:"流域"}}),t._v(" "),e("el-table-column",{attrs:{prop:"stationName",label:"断面名称"}}),t._v(" "),e("el-table-column",{attrs:{prop:"projName",label:"监测项目"}}),t._v(" "),e("el-table-column",{attrs:{prop:"yUploadNum",label:"应上传数量"}}),t._v(" "),e("el-table-column",{attrs:{prop:"sUploadNum",label:"实际上传数量"}}),t._v(" "),e("el-table-column",{attrs:{prop:"uploadRate",label:"传输率"}}),t._v(" "),e("el-table-column",{attrs:{prop:"validNum",label:"有效数据数量"}}),t._v(" "),e("el-table-column",{attrs:{prop:"validRate",label:"数据有效率"}})],1)],1),t._v(" "),e("div",{staticClass:"paginationBox"},[e("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,background:"",small:!0,"popper-class":"select-common-option","page-sizes":t.pageList,layout:"total,sizes,slot,->,prev, pager, next, jumper",total:t.totalRecords},on:{"size-change":t.paginationSizeChange,"current-change":t.paginationChange,"update:currentPage":function(a){t.currentPage=a},"update:current-page":function(a){t.currentPage=a}}},[e("span",{staticClass:"el-pagination__current"},[t._v("当前第"+t._s(t.currentPage)+"/"+t._s(t.totalPage)+"页")])])],1)])])},staticRenderFns:[]};var l=e("VU/8")(o,i,!1,function(t){e("pnQH")},"data-v-91548872",null);a.default=l.exports}});
//# sourceMappingURL=44.ebda8e742f6d8a8a9108.js.map