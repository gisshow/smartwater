webpackJsonp([36],{"U/Bd":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("pFYg"),l=e.n(i),s=e("dwSH"),n={name:"sampleComparison",data:function(){return{areaCode:"",areaName:"",stationId:"",stationName:"",dateRange:"",numIndex:0,value:["w01019","w21003","w21011","w21001"],optionData:[{value:"w01019",label:"高锰酸盐"},{value:"w21003",label:"氨氮"},{value:"w21011",label:"总磷"},{value:"w21001",label:"总氮"},{value:"w01001",label:"PH"},{value:"w01010",label:"水温"},{value:"w01009",label:"溶解氧"},{value:"w01014",label:"电导率"},{value:"w01003",label:"浊度"}],currentPage:1,pageSize:10,pageList:[5,10,15],totalRecords:1,tableData:[],tableDataB:[{area:"河南省",basin:"淮河流域白露河",nameSection:"淮滨北庙",samplingTime:"2019-01-25 12",waterTem:"1",ph:"1",dissolvedOxygen:"0",conductivity:"1",turbidity:"0",permanganate:"1"}],tableHead:[],tableHeadAll:[{prop:"w01019",label:"高锰酸盐"},{prop:"w21003",label:"氨氮"},{prop:"w21011",label:"总磷"},{prop:"w21001",label:"总氮"},{label:"水温",prop:"w01010"},{label:"PH",prop:"w01001"},{label:"溶解氧",prop:"w01009"},{label:"电导率",prop:"w01014"},{label:"浊度",prop:"w01003"}],stateRadio:"1"}},computed:{totalPageNumber:function(){return Math.ceil(this.totalRecords/this.pageSize)},stationInfo:{get:function(){return this.$store.state.stationInfo}}},methods:{paginationChange:function(t){this.currentPage=t,this.getAllTableData()},paginationSizeChange:function(t){this.pageSize=t,this.getAllTableData()},toggleTable:function(t){t.toggle?t.toggle=!1:t.toggle=!0,console.log(t.toggle)},toggleTab:function(t){},search:function(){var t=this;this.tableHead=[],this.value.forEach(function(a,e){for(var i=0;i<t.tableHeadAll.length;i++)if(a===t.tableHeadAll[i].prop){t.tableHead.push(t.tableHeadAll[i]);break}}),this.getTableData(),this.getAllTableData()},getTableData:function(){var t=this;this.$http.get("/Quality/testData/realWaterSampleComparisonData",{params:{startTime:this.dateRange,endTime:this.dateRange,indexCodes:this.value.join(","),stationCodes:this.stationId,ifCurrentSection:!0}}).then(function(a){0===a.data.code&&(console.log(a,222),t.tableData=a.data.content.dataList,t.tableData.forEach(function(a,e){t.$set(a,"toggle",!1)}))})},getAllTableData:function(){var t=this;this.$http.get("/Quality/testData/realWaterSampleComparisonData",{params:{startTime:this.dateRange,endTime:this.dateRange,indexCodes:this.value.join(","),stationCodes:this.areaCode,ifCurrentSection:!1,pageNumber:this.currentPage,pageSize:this.pageSize}}).then(function(a){0===a.data.code&&(t.tableDataB=a.data.content.dataList,t.totalRecords=a.data.content.totalRecords)})},exportExcel:function(){console.log(l()(this.stateRadio));var t="",a="",e=null,i=null,n="";if("1"===this.stateRadio)t=this.$refs.tableHead,a=this.stationName+"实际水样比对",e=!0,i=this.stationId,n="indexName,indexUnit,automaticValue,artificialValue,error,technicalCequirement,qualification";else{var o=[];t=this.$refs.table.$el.querySelector(".el-table__header"),a=this.areaName+"实际水样比对",e=!1,i=this.areaCode,this.tableHead.forEach(function(t,a){o.push(t.prop)}),n="areaName,basinName,stationName,time,"+o.join(",")}var r={headerProp:n,startTime:this.dateRange,endTime:this.dateRange,indexCodes:this.value.join(","),stationCodes:i,tableType:"REAL_WATER_DATA",ifCurrentSection:e,pattern:"yyyy-MM-dd HH:mm:ss"};Object(s.a)(t,a,"","1","/Quality/exports/qualityControlExcel",r)}},mounted:function(){},created:function(){this.dateRange=new Date},watch:{stationInfo:function(t){t.length>0&&(this.stationId=t[0].nodeId,this.areaCode=t[0].areaCode,this.areaName=t[0].areaName,this.stationName=t[0].nodeName,this.search())}}},o={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"sampleComparison tapStyle secondary-page-mode"},[e("div",{staticClass:"secondary-toolbar"},[e("span",[t._v("时间选择 : ")]),t._v(" "),e("div",{staticClass:"layoutBox",staticStyle:{width:"110px"}},[e("el-date-picker",{attrs:{type:"month","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM"},model:{value:t.dateRange,callback:function(a){t.dateRange=a},expression:"dateRange"}})],1),t._v("  \n    "),e("span",[t._v("监测项目 : ")]),t._v(" "),e("div",{staticClass:"layoutBox",staticStyle:{width:"190px"}},[e("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.value,callback:function(a){t.value=a},expression:"value"}},t._l(t.optionData,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v("  \n    "),e("el-button",{on:{click:t.search}},[e("i",{staticClass:"iconfont icon-sousuo"}),t._v("查询")]),t._v(" "),e("el-button",{attrs:{type:"delet"},on:{click:function(a){return t.exportExcel()}}},[e("i",{staticClass:"iconfont icon-daochu"}),t._v("导出")])],1),t._v(" "),e("div",{staticClass:"currency-mode-wrap scrollSpecial"},[e("div",{staticClass:"reminder-wrap"},[e("span",{staticClass:"reminder-title"},[t._v("温馨提示")]),t._v(" "),e("div",{staticClass:"reminder-content"},[e("div",{staticClass:"reminder-text"},[e("p",[t._v("所选时间段内共有“多点线性核查移”x次，共有合格项m次，不合格项y次。影响数据n条。点位1、点位2的上次周核查时间距今已有7天；站点3的上次周核查距今已有6天。")]),t._v(" "),e("div",[e("el-button",{attrs:{type:"noticonsecondBtn"}},[t._v(" 生成任务 ")])],1)])]),t._v(" "),e("div",{staticClass:"reminder-toolbar"},[t._m(0),t._v(" "),e("div",{staticClass:"state-radio-wrap"},[e("el-radio-group",{attrs:{size:"small"},on:{change:t.toggleTab},model:{value:t.stateRadio,callback:function(a){t.stateRadio=a},expression:"stateRadio"}},[e("el-radio-button",{attrs:{label:"1"}},[t._v("当前断面")]),t._v(" "),e("el-radio-button",{attrs:{label:"2"}},[t._v("所有断面")])],1)],1)])]),t._v(" "),e("div",{staticClass:"currency-body-toggle"},[e("div",{directives:[{name:"show",rawName:"v-show",value:"1"===t.stateRadio,expression:"stateRadio === '1'"}],staticStyle:{height:"100%"}},[e("div",{staticClass:"tablebox"},[e("div",{staticClass:"table-head"},[e("table",{ref:"tableHead"},[t._m(1)])]),t._v(" "),e("el-scrollbar",{staticStyle:{height:"calc(100% - 32px)"}},[e("ul",{staticClass:"table-body clearfix"},t._l(t.tableData,function(a,i){return e("li",[e("div",{staticClass:"toggle-row",class:{active:a.toggle}},[e("i",{staticClass:"toggle-icon",class:{active:a.toggle},on:{click:function(e){return t.toggleTable(a)}}}),t._v(" "),e("span",[t._v("采样时间："+t._s(a.time))])]),t._v(" "),e("el-collapse-transition",[a.toggle?e("div",[e("table",t._l(a.list,function(a,i){return e("tr",[e("td",{attrs:{width:"3%"}},[t._v(t._s(i+1))]),t._v(" "),e("td",{attrs:{width:"10%"}},[t._v(t._s(a.indexName))]),t._v(" "),e("td",{attrs:{width:"10%"}},[t._v(t._s(a.indexUnit))]),t._v(" "),e("td",{attrs:{width:"17%"}},[t._v(t._s(a.automaticValue))]),t._v(" "),e("td",{attrs:{width:"17%"}},[t._v(t._s(a.artificialValue))]),t._v(" "),e("td",{attrs:{width:"16%"}},[t._v(t._s(a.error))]),t._v(" "),e("td",{attrs:{width:"17%"}},[t._v(t._s(a.technicalCequirement))]),t._v(" "),e("td",{attrs:{width:"16%"}},["合格"===a.qualification?e("b",[t._v("合格")]):t._e(),t._v(" "),"不合格"===a.qualification?e("b",{staticStyle:{color:"red"}},[t._v("不合格")]):t._e()])])}),0)]):t._e()])],1)}),0)])],1)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"2"===t.stateRadio,expression:"stateRadio === '2'"}],staticClass:"chart-wrap",staticStyle:{height:"100%"}},[e("div",{staticClass:"tablebox",staticStyle:{height:"calc(100% - 34px)"}},[e("el-table",{ref:"table",attrs:{data:t.tableDataB,height:"100%",border:""}},[e("el-table-column",{attrs:{type:"index",fixed:"",width:"50",label:"序号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"areaName",fixed:"",label:"行政区"}}),t._v(" "),e("el-table-column",{attrs:{prop:"basinName",fixed:"",label:"流域"}}),t._v(" "),e("el-table-column",{attrs:{prop:"stationName",fixed:"",label:"断面名称"}}),t._v(" "),e("el-table-column",{attrs:{prop:"time",fixed:"",label:"采样时间"}}),t._v(" "),t._l(t.tableHead,function(t,a){return e("el-table-column",{key:a,attrs:{prop:t.prop,label:t.label}})})],2)],1),t._v(" "),e("div",{staticClass:"paginationBox"},[e("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,background:"",small:!0,"popper-class":"select-common-option","page-sizes":t.pageList,layout:"total,sizes,slot,->,prev, pager, next, jumper",total:t.totalRecords},on:{"size-change":t.paginationSizeChange,"current-change":t.paginationChange,"update:currentPage":function(a){t.currentPage=a},"update:current-page":function(a){t.currentPage=a}}},[e("span",{staticClass:"el-pagination__current"},[t._v("当前第"+t._s(t.currentPage)+"/"+t._s(t.totalPageNumber)+"页")])])],1)])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"state-legend"},[a("span",[a("i",{staticClass:"qualified-icon"}),this._v(" 合格")]),this._v(" "),a("span",[a("i",{staticClass:"unqualified-icon"}),this._v(" 不合格")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("tr",[e("th",{attrs:{width:"3%"}},[t._v("序号")]),t._v(" "),e("th",{attrs:{width:"10%"}},[t._v("监测项目")]),t._v(" "),e("th",{attrs:{width:"10%"}},[t._v("单位")]),t._v(" "),e("th",{attrs:{width:"17%"}},[t._v("仪器测试值")]),t._v(" "),e("th",{attrs:{width:"17%"}},[t._v("人工测试值")]),t._v(" "),e("th",{attrs:{width:"16%"}},[t._v("误差")]),t._v(" "),e("th",{attrs:{width:"17%"}},[t._v("技术要求")]),t._v(" "),e("th",{attrs:{width:"16%"}},[t._v("是否合格")]),t._v(" "),e("th",{staticStyle:{width:"0px",display:"none"}})])}]};var r=e("VU/8")(n,o,!1,function(t){e("gn8i")},null,null);a.default=r.exports},gn8i:function(t,a){}});
//# sourceMappingURL=36.ba4d238bae1f9497919e.js.map