webpackJsonp([54],{"9svo":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"",data:function(){return{value:1,dateRangeDayOne:["2019-08-01","2019-08-10"],dateRangeDayTwo:["2019-08-11","2019-08-20"],dateRangeWeekOne:"",dateRangeWeekTwo:"",dateRangeMonthOne:"",dateRangeMonthTwo:"",dateRangeYearOne:"",dateRangeYearTwo:"",querterOne:{},querterTwo:{},optionData:[{label:"日",value:1},{label:"周",value:2},{label:"月",value:3},{label:"季",value:4},{label:"年",value:5}],timeType:"日",dateType:"daterange",factorData:[],factorModel:"",legendData:[],xAxisData:[],seriesData:[],stationId:"",dataStatus:"",loading:!0}},created:function(){this.getFactors(),this.getEchartData()},mounted:function(){},methods:{selectChange:function(e){for(var t in this.optionData)e==this.optionData[t].value&&(this.timeType=this.optionData[t].label);"日"==this.timeType?this.dateType="daterange":"周"==this.timeType?this.dateType="week":"月"==this.timeType?this.dateType="month":"季"==this.timeType?this.dateType="quarter":"年"==this.timeType&&(this.dateType="year")},getFactors:function(){var e=this;this.$http.post("/SiteManagement/index/query").then(function(t){0==t.data.code&&(e.factorData=t.data.content.dataList,e.factorModel=e.factorData[0].projectCode)})},dateRangeChange:function(){},initEchart:function(e,t,a){var n={title:{text:a[0]+"变化分析图",left:"center"},tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:e,splitLine:{show:!1},boundaryGap:!1},yAxis:{splitNumber:3,name:"监测值",splitLine:{show:!1}},series:t};this.$echarts.init(document.getElementById("echartbox")).setOption(n)},search:function(){this.getEchartData()},setQuerterOne:function(e){this.querterOne=e},setQuerterTwo:function(e){this.querterTwo=e},getEchartData:function(){var e=this;this.loading=!0;var t={};if("日"==this.timeType)t={stationCode:this.stationId,factorCode:this.factorModel,startTime:this.dateRangeDayOne[0],endTime:this.dateRangeDayOne[1],startQuarter:"",endQuarter:"",type:"day",compareStart:this.dateRangeDayTwo[0],compareEnd:this.dateRangeDayTwo[1]};else if("周"==this.timeType){var a,n=new Date(this.dateRangeWeekOne),o=n.getTime(),r=o-864e5*(a=n.getDay()),s=o+864e5*(6-a),i=new Date(this.dateRangeWeekTwo),d=i.getTime(),l=d-864e5*(a=i.getDay()),c=d+864e5*(6-a);t={stationCode:this.stationId,factorCode:this.factorModel,startTime:new Date(r).format("yyyy-MM-dd"),endTime:new Date(s).format("yyyy-MM-dd"),startQuarter:"",endQuarter:"",type:"day",compareStart:new Date(l).format("yyyy-MM-dd"),compareEnd:new Date(c).format("yyyy-MM-dd")}}else"月"==this.timeType?t={stationCode:this.stationId,factorCode:this.factorModel,startTime:this.dateRangeMonthOne,endTime:this.dateRangeMonthOne,startQuarter:"",endQuarter:"",type:"month",compareStart:this.dateRangeMonthTwo,compareEnd:this.dateRangeMonthTwo}:"季"==this.timeType?(console.log(this.querterOne),console.log(this.querterTwo),t={stationCode:this.stationId,factorCode:this.factorModel,startTime:this.querterOne.year,endTime:this.querterOne.year,startQuarter:this.querterOne.quarter,endQuarter:this.querterTwo.quarter,type:"quarter",compareStart:this.querterTwo.year,compareEnd:this.querterTwo.year}):"年"==this.timeType&&(t={stationCode:this.stationId,factorCode:this.factorModel,startTime:this.dateRangeYearOne,endTime:this.dateRangeYearOne,startQuarter:"",endQuarter:"",type:"year",compareStart:this.dateRangeYearTwo,compareEnd:this.dateRangeYearTwo});this.$http.get("/StatisticsAndAlarm/dataCharts/annualRatioCharts",{params:t}).then(function(t){if(e.loading=!1,!t.data.content)return e.$echarts.init(document.getElementById("echartbox")).clear(),e.dataStatus="no",!1;(e.dataStatus="",0==t.data.code)&&(e.xAxisData=t.data.content.info.xAxis,e.seriesData=t.data.content.info.series,e.legendData=t.data.content.info.legend,e.$echarts.init(document.getElementById("echartbox")).clear(),e.initEchart(e.xAxisData,e.seriesData,e.legendData))})}},computed:{stationInfo:{get:function(){return this.$store.state.stationInfo}}},watch:{stationInfo:function(e){e.length>0&&(this.stationId=e[0].nodeId,this.getEchartData())}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"trendPage secondary-page-mode"},[a("div",{staticClass:"secondary-toolbar"},[a("span",[e._v("时间类型 : ")]),e._v(" "),a("div",{staticClass:"layoutBox",staticStyle:{width:"120px"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.optionData,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v("  \n        "),a("span",[e._v("监测因子 : ")]),e._v(" "),a("div",{staticClass:"layoutBox",staticStyle:{width:"120px"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.factorModel,callback:function(t){e.factorModel=t},expression:"factorModel"}},e._l(e.factorData,function(e){return a("el-option",{key:e.projectCode,attrs:{label:e.projectName,value:e.projectCode}})}),1)],1),e._v("  \n        "),e._v(" "),a("span",[e._v("本期("+e._s(e.timeType)+") : ")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"daterange"==e.dateType,expression:"dateType == 'daterange'"}],staticClass:"layoutBox",staticStyle:{width:"242px"}},[a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"daterange"==e.dateType,expression:"dateType == 'daterange'"}],attrs:{type:"daterange","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.dateRangeChange},model:{value:e.dateRangeDayOne,callback:function(t){e.dateRangeDayOne=t},expression:"dateRangeDayOne"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"week"==e.dateType,expression:"dateType == 'week'"}],staticClass:"layoutBox",staticStyle:{width:"140px"}},[a("el-date-picker",{attrs:{type:"week",format:"yyyy 第 WW 周",placeholder:"请选择","value-format":"yyyy-MM-dd"},model:{value:e.dateRangeWeekOne,callback:function(t){e.dateRangeWeekOne=t},expression:"dateRangeWeekOne"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"month"==e.dateType,expression:"dateType == 'month'"}],staticClass:"layoutBox",staticStyle:{width:"140px"}},[a("el-date-picker",{attrs:{type:"month",placeholder:"请选择","value-format":"yyyy-MM"},model:{value:e.dateRangeMonthOne,callback:function(t){e.dateRangeMonthOne=t},expression:"dateRangeMonthOne"}})],1),e._v(" "),a("yf-quarter",{directives:[{name:"show",rawName:"v-show",value:"quarter"==e.dateType,expression:"dateType == 'quarter'"}],on:{getQuar:e.setQuerterOne}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"year"==e.dateType,expression:"dateType == 'year'"}],staticClass:"layoutBox",staticStyle:{width:"140px"}},[a("el-date-picker",{attrs:{type:"year",placeholder:"请选择","value-format":"yyyy"},model:{value:e.dateRangeYearOne,callback:function(t){e.dateRangeYearOne=t},expression:"dateRangeYearOne"}})],1),e._v("  \n       "),a("span",[e._v("对比("+e._s(e.timeType)+") : ")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"daterange"==e.dateType,expression:"dateType == 'daterange'"}],staticClass:"layoutBox",staticStyle:{width:"242px"}},[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",disabled:""},model:{value:e.dateRangeDayTwo,callback:function(t){e.dateRangeDayTwo=t},expression:"dateRangeDayTwo"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"week"==e.dateType,expression:"dateType == 'week'"}],staticClass:"layoutBox",staticStyle:{width:"140px"}},[a("el-date-picker",{attrs:{type:"week",format:"yyyy 第 WW 周",placeholder:"请选择","value-format":"yyyy-MM-dd"},model:{value:e.dateRangeWeekTwo,callback:function(t){e.dateRangeWeekTwo=t},expression:"dateRangeWeekTwo"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"month"==e.dateType,expression:"dateType == 'month'"}],staticClass:"layoutBox",staticStyle:{width:"140px"}},[a("el-date-picker",{attrs:{type:"month",placeholder:"请选择","value-format":"yyyy-MM"},model:{value:e.dateRangeMonthTwo,callback:function(t){e.dateRangeMonthTwo=t},expression:"dateRangeMonthTwo"}})],1),e._v(" "),a("yf-quarter",{directives:[{name:"show",rawName:"v-show",value:"quarter"==e.dateType,expression:"dateType == 'quarter'"}],on:{getQuar:e.setQuerterTwo}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"year"==e.dateType,expression:"dateType == 'year'"}],staticClass:"layoutBox",staticStyle:{width:"140px"}},[a("el-date-picker",{attrs:{type:"year",placeholder:"请选择","value-format":"yyyy"},model:{value:e.dateRangeYearTwo,callback:function(t){e.dateRangeYearTwo=t},expression:"dateRangeYearTwo"}})],1),e._v("  \n      "),a("el-button",{on:{click:e.search}},[a("i",{staticClass:"iconfont icon-sousuo"}),e._v("查询")])],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"currency-mode-wrap",staticStyle:{position:"relative"},attrs:{"element-loading-text":"加载中","element-loading-spinner":"loading-type-a","element-loading-background":"rgba(255, 255, 255, 1)"}},[a("div",{staticClass:"echartbox",attrs:{id:"echartbox"}}),e._v(" "),"no"==e.dataStatus?a("yf-Datastatus",{attrs:{dataStatus:e.dataStatus}}):e._e()],1)])},staticRenderFns:[]};var r=a("VU/8")(n,o,!1,function(e){a("kH9W")},null,null);t.default=r.exports},kH9W:function(e,t){}});
//# sourceMappingURL=54.178e3b6120deecee0439.js.map