webpackJsonp([117],{"1Ozg":function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("mvHQ"),s=e.n(i),l=e("dwSH"),n={name:"",data:function(){return{dateRange:"",stationId:"",stationName:"",value:[],valueA:["w01010","w01001","w01009","w01014","w01003","w01019","w21003","w21011","w21001","w01016"],valueB:["w01001","w01018","w21003","w21011","w21001"],optionData:[],optionDataA:[{value:"w01010",label:"水温",standard:"",isShow:!0},{value:"w01001",label:"PH",standard:"6~9",isShow:!0},{value:"w01009",label:"溶解氧",standard:"≥5",isShow:!0},{value:"w01014",label:"电导率",standard:"",isShow:!0},{value:"w01003",label:"浊度",standard:"",isShow:!0},{value:"w01019",label:"高锰酸盐",standard:"6",isShow:!0},{value:"w21003",label:"氨氮",standard:"1",isShow:!0},{value:"w21011",label:"总磷",standard:"0.2",isShow:!0},{value:"w21001",label:"总氮",standard:"",isShow:!0},{value:"w01016",label:"叶绿素",standard:"",isShow:!0}],optionDataB:[{value:"w01001",label:"PH",standard:"6~9",isShow:!0},{value:"w01018",label:"CODcr",standard:"6",isShow:!0},{value:"w21003",label:"氨氮",standard:"1",isShow:!0},{value:"w21011",label:"总磷",standard:"0.2",isShow:!0},{value:"w21001",label:"总氮",standard:"",isShow:!0}],selectCheck:[],tableData:[],tableHead:[],tableHeadA:[{value:"w01010",label:"水温",standard:"",isShow:!0},{value:"w01001",label:"PH",standard:"6~9",isShow:!0},{value:"w01009",label:"溶解氧",standard:"≥5",isShow:!0},{value:"w01014",label:"电导率",standard:"",isShow:!0},{value:"w01003",label:"浊度",standard:"",isShow:!0},{value:"w01019",label:"高锰酸盐",standard:"6",isShow:!0},{value:"w21003",label:"氨氮",standard:"1",isShow:!0},{value:"w21011",label:"总磷",standard:"0.2",isShow:!0},{value:"w21001",label:"总氮",standard:"",isShow:!0},{value:"w01016",label:"叶绿素",standard:"",isShow:!0}],tableHeadB:[{value:"w01001",label:"PH",standard:"6~9",isShow:!0},{value:"w01018",label:"CODcr",standard:"",isShow:!0},{value:"w21003",label:"氨氮",standard:"1",isShow:!0},{value:"w21011",label:"总磷",standard:"0.2",isShow:!0},{value:"w21001",label:"总氮",standard:"",isShow:!0}],tabActive:"a1",tableWraHei:"",currentPage:1,pageSize:10,totalRecords:0,pageList:[10,15,20],fieldList:[],fieldListB:["province","basin","stationName","dataTime"]}},methods:{createTrendAnalysis:function(){this.$echarts.init(document.getElementById("trend-analysis")).setOption({color:["#8E42FF","#00A3F5","#1CAD8B","#1EBD1E","#C2A100","#E68320","#FF4242"],title:{text:"变化趋势分析图",x:"center",y:10},tooltip:{trigger:"axis"},legend:{data:["水温","PH","溶解氧","电导率","浊度"],top:40},grid:{top:80,left:60,right:60,bottom:50,containLabel:!0},dataZoom:[{show:!0,realtime:!0,start:0,end:100},{type:"inside",realtime:!0,start:0,end:100}],xAxis:{type:"category",boundaryGap:!1,axisTick:{show:!1},axisLine:{show:!1,lineStyle:{color:"#666"}},data:["2019/02/07 5时","2019/02/07 6时","2019/02/07 7时","2019/02/07 8时","2019/02/07 9时","2019/02/07 10时","2019/02/07 11时"]},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1}},series:[{name:"水温",type:"line",smooth:!0,data:[20,32,11,34,20,30,21],markArea:{silent:!0,itemStyle:{color:"#d7e1eb",opacity:.6,borderWidth:1,borderType:"dashed"},label:{color:"#000"},data:[[{xAxis:"2019/02/07 6时",name:"周质控不合格"},{xAxis:"2019/02/07 7时"}],[{xAxis:"2019/02/07 8时",name:"月质控-集成干预检查不合格"},{xAxis:"2019/02/07 10时"}]]}},{name:"PH",type:"line",smooth:!0,data:[22,18,19,23,29,33,31]},{name:"溶解氧",type:"line",smooth:!0,data:[15,23,20,15,19,33,41]},{name:"电导率",type:"line",smooth:!0,data:[32,32,30,34,30,33,32]},{name:"浊度",type:"line",smooth:!0,data:[20,32,21,34,12,13,20]}]})},selectChange:function(a){this.value=a},indexMethod:function(a){return a+1},search:function(a){var t=this;for(var e in this.tableHead)this.tableHead[e].isShow=!1;for(var i in this.value)for(var s in this.tableHead)if(this.value[i]===this.tableHead[s].value){this.tableHead[s].isShow=!0;break}console.log(this.tableHead),this.getFieldList(),this.$nextTick(function(){t.searchHistoryData()})},toggleTab:function(a){var t=this;"a2"===a.name&&setTimeout(function(){t.createTrendAnalysis()},300)},searchHistoryData:function(){var a=this;this.$http.get("/Receiving/queryRowToColHourData",{params:{beginTime:this.dateRange[0].format("yyyy-MM-dd 00:00:00"),endTime:this.dateRange[1].format("yyyy-MM-dd 23:59:59"),mn:this.stationId,pageNum:this.currentPage,pageSize:this.pageSize}}).then(function(t){0===t.data.code&&(a.tableData=t.data.content.dataList,a.totalRecords=t.data.content.totalRecords)}).catch(function(a){})},paginationChange:function(a){this.currentPage=a,this.searchHistoryData()},paginationSizeChange:function(a){this.pageSize=a,this.searchHistoryData()},getFieldList:function(){for(var a in this.fieldList=JSON.parse(s()(this.fieldListB)),this.tableHead)this.tableHead[a].isShow=!1;for(var t in this.value)for(var e in this.tableHead)if(this.value[t]===this.tableHead[e].value){this.tableHead[e].isShow=!0,this.fieldList.push(this.tableHead[e].value);break}},exportExcel:function(){var a=this.$refs.table.$el.querySelector(".el-table__header"),t=this.stationName+"历史数据",e={headerProp:this.fieldList.join(","),startTime:this.dateRange[0].format("yyyy-MM-dd 00:00:00"),endTime:this.dateRange[1].format("yyyy-MM-dd 23:59:59"),indexCodes:this.value.join(","),stationCodes:this.stationId,pattern:"yyyy-MM-dd HH:mm:ss"};Object(l.a)(a,t,"","1","/Receiving/exports/dataReceiveExcel",e)}},mounted:function(){},created:function(){this.$store.commit("setShowlefttree",!1),this.selectCheck=this.value,this.dateRange=[new Date((new Date).setDate((new Date).getDate()-7)),new Date]},computed:{totalPage:function(){var a;return 0===(a=Math.ceil(this.totalRecords/this.pageSize))?1:a},stationInfo:{get:function(){return this.$store.state.stationInfo}}},watch:{stationInfo:function(a){var t=this;a.length>0&&(this.stationId=a[0].nodeId,this.stationName=a[0].nodeName,"001"===a[0].stationType1?(this.optionData=this.optionDataA,this.value=this.valueA,this.tableHead=this.tableHeadA):"002"===a[0].stationType1&&(this.optionData=this.optionDataB,this.value=this.valueB,this.tableHead=this.tableHeadB),this.getFieldList(),this.$nextTick(function(){t.searchHistoryData()}))}}},o={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"historypage tapStyle secondary-page-mode"},[e("div",{staticClass:"secondary-toolbar"},[e("span",[a._v("时间选择 : ")]),a._v(" \n        "),e("div",{staticClass:"layoutBox",staticStyle:{width:"242px"}},[e("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:a.dateRange,callback:function(t){a.dateRange=t},expression:"dateRange"}})],1),a._v("  \n        "),e("span",[a._v("监测项目 : ")]),a._v(" \n        "),e("div",{staticClass:"layoutBox",staticStyle:{width:"160px"}},[e("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:a.selectChange},model:{value:a.value,callback:function(t){a.value=t},expression:"value"}},a._l(a.optionData,function(a){return e("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})}),1)],1),a._v("  \n\n        "),e("el-button",{on:{click:a.search}},[e("i",{staticClass:"iconfont icon-sousuo"}),a._v("查询")]),a._v(" "),e("el-button",{attrs:{type:"delet"},on:{click:function(t){return a.exportExcel()}}},[e("i",{staticClass:"iconfont icon-daochu"}),a._v("导出")])],1),a._v(" "),e("div",{staticClass:"currency-mode-wrap"},[e("yf-tabs",{attrs:{type:"border-card",value:a.tabActive},on:{"tab-click":a.toggleTab}},[e("yf-tab-pane",{attrs:{name:"a1",label:"数据列表"}},[e("div",{ref:"tableWra",staticClass:"tablebox",staticStyle:{height:"calc(100% - 35px)"}},[e("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:a.tableData,border:"",height:"100%"}},[e("el-table-column",{attrs:{type:"index",label:"序号",index:a.indexMethod,width:"50"}}),a._v(" "),e("el-table-column",{attrs:{prop:"province",width:"116",label:"省份"}}),a._v(" "),e("el-table-column",{attrs:{prop:"basin",width:"130",label:"流域"}}),a._v(" "),e("el-table-column",{attrs:{prop:"stationName",width:"140",label:"断面名称"}}),a._v(" "),e("el-table-column",{attrs:{prop:"name",width:"131",label:"监测时间"}},[e("el-table-column",{attrs:{"min-width":"181",prop:"dataTime",label:"Ⅲ类标准限值"}})],1),a._v(" "),a._l(a.tableHead,function(t,i){return t.isShow?e("el-table-column",{key:i,attrs:{prop:"name",label:t.label}},[e("el-table-column",{attrs:{prop:t.value,"min-width":"110",label:t.standard}})],1):a._e()})],2)],1),a._v(" "),e("div",{staticClass:"paginationBox"},[e("el-pagination",{attrs:{"current-page":a.currentPage,"page-size":a.pageSize,background:"",small:!0,"popper-class":"select-common-option","page-sizes":a.pageList,layout:"total,sizes,slot,->,prev, pager, next, jumper",total:a.totalRecords},on:{"size-change":a.paginationSizeChange,"current-change":a.paginationChange,"update:currentPage":function(t){a.currentPage=t},"update:current-page":function(t){a.currentPage=t}}},[e("span",{staticClass:"el-pagination__current"},[a._v("当前第"+a._s(a.currentPage)+"/"+a._s(a.totalPage)+"页")])])],1)]),a._v(" "),e("yf-tab-pane",{attrs:{name:"a2",label:"数据图表"}},[e("div",{staticClass:"chart-wrap",staticStyle:{height:"100%"}},[e("div",{staticStyle:{height:"100%"},attrs:{id:"trend-analysis"}})])])],1)],1)])},staticRenderFns:[]};var r=e("VU/8")(n,o,!1,function(a){e("uJ3b")},"data-v-09a79510",null);t.default=r.exports},uJ3b:function(a,t){}});
//# sourceMappingURL=117.1a3966c277e7e0749b19.js.map