webpackJsonp([109],{"5PQO":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("V+i5");var i=a("dwSH"),n=[{name:"日报",type:"date"},{name:"月报",type:"month"},{name:"年报",type:"year"}],o={shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},s={name:"singleStationReport",data:function(){return{dataTypeList:n,dataType:0,pickerOptions:o,dataValue:"",tableData:[],stationInfo:[],headcolumn:[],headtitle:"",statisDate:"",headtimetype:"date",loading:!0}},methods:{dataTypeToggle:function(t){this.dataType=t,0==t?this.headtimetype="date":1==t?this.headtimetype="month":2==t&&(this.headtimetype="year")},initTime:function(){"date"==this.headtimetype?this.dataValue=(new Date).format("yyyy-MM-dd"):"month"==this.headtimetype?this.dataValue=(new Date).format("yyyy-MM"):"year"==this.headtimetype&&(this.dataValue=(new Date).format("yyyy"))},getTableData:function(){var t=this;this.loading=!0;var e="",a="";"date"==this.headtimetype?(e=new Date(this.dataValue).format("yyyy-MM-dd"),a="day"):"month"==this.headtimetype?(e=new Date(this.dataValue).format("yyyy-MM"),a="month"):"year"==this.headtimetype&&(e=new Date(this.dataValue).format("yyyy"),a="year"),this.$http.get("/StatisticsAndAlarm/dataReports/audioMoreReports",{params:{timeType:a,time:e,stationMn:this.stationInfo.join(",")}}).then(function(e){0==e.data.code&&(t.headcolumn=e.data.content.info.project,t.tableData=e.data.content.dataList,t.statisDate=e.data.content.info.message),t.loading=!1}).catch(function(e){t.loading=!1})},exportExcel:function(){var t=this.$refs.table.$el.querySelector(".el-table__header"),e="",a="";"date"==this.headtimetype?(e=new Date(this.dataValue).format("yyyy-MM-dd"),a="day"):"month"==this.headtimetype?(e=new Date(this.dataValue).format("yyyy-MM"),a="month"):"year"==this.headtimetype&&(e=new Date(this.dataValue).format("yyyy"),a="year"),this.fieldList=["name"];for(var n=0;n<this.headcolumn.length;n++)this.fieldList.push(this.headcolumn[n].code);this.fieldList.push("level"),this.fieldList.push("waterCondition"),this.fieldList.push("keyPollution");var o={headerProp:this.fieldList.join(","),timeType:a,time:e,stationMn:this.stationInfo.join(",")};Object(i.a)(t,"多站报表","","1","/StatisticsAndAlarm/exports/moreWaterQaulityReports",o)}},mounted:function(){},created:function(){this.initTime()},components:{},computed:{station:function(){return this.$store.state.stationInfo}},watch:{station:function(t){if(this.stationInfo=[],t.length>0)for(var e in t)this.stationInfo.push(t[e].nodeId);this.getTableData()}},destroy:function(){}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"single-station-report-page"},[a("div",{staticClass:"secondary-page-mode"},[a("div",{staticClass:"secondary-toolbar"},[a("span",[t._v("数据类型：")]),t._v(" "),a("el-button-group",t._l(t.dataTypeList,function(e,i){return a("el-button",{key:i,class:{active:t.dataType===i},attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){return t.dataTypeToggle(i)}}},[t._v(t._s(e.name))])}),1),t._v(" \n      "),a("span",[t._v("时间段：")]),t._v(" "),a("div",{staticClass:"layoutBox",staticStyle:{width:"242px"}},[a("el-date-picker",{attrs:{type:t.headtimetype,placeholder:"选择时间"},model:{value:t.dataValue,callback:function(e){t.dataValue=e},expression:"dataValue"}})],1),t._v(" \n      "),a("el-button",{on:{click:t.getTableData}},[a("i",{staticClass:"iconfont icon-sousuo"}),t._v("生成")]),t._v(" "),a("el-button",{attrs:{type:"delet"},on:{click:t.exportExcel}},[a("i",{staticClass:"iconfont icon-daochu"}),t._v("导出")])],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"currency-mode-wrap",attrs:{"element-loading-text":"加载中","element-loading-spinner":"loading-type-a","element-loading-background":"rgba(255, 255, 255, 1)"}},[a("el-scrollbar",{staticClass:"currency-mode-scroll"},[a("h4",{staticClass:"report-form-title"},[t._v("多站报表")]),t._v(" "),a("p",{staticClass:"report-form-subtitle"},[t._v(t._s(t.statisDate))]),t._v(" "),a("div",{staticClass:"report-table-wrap",staticStyle:{position:"relative"}},[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","tooltip-effect":"light"}},[a("el-table-column",{attrs:{type:"index",label:"序号",fixed:"",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"站点名称",fixed:"",width:"160"}}),t._v(" "),t._l(t.headcolumn,function(t,e){return a("el-table-column",{key:e,attrs:{label:t.name}},[a("el-table-column",{attrs:{width:"140",property:t.code,label:t.unit}})],1)}),t._v(" "),a("el-table-column",{attrs:{prop:"level",label:"水质类别",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"waterCondition",label:"水质状况",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"keyPollution",label:"主要污染物","show-overflow-tooltip":"",width:"160"}})],2)],1)])],1)])])},staticRenderFns:[]};var d=a("VU/8")(s,l,!1,function(t){a("ySq5")},"data-v-1231fd56",null);e.default=d.exports},ySq5:function(t,e){}});
//# sourceMappingURL=109.ef468ff3fcc52819861a.js.map