webpackJsonp([94],{Mol2:function(e,a){},bRRB:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n={name:"",data:function(){return{value:"",visiDialog_add:!1,tableData:[],targetLevelData:[],basinObj:{aimWaterLevel:"",basinnCode:"",basinnId:"",basinnName:"",basinnRemark:""},basinRules:{basinnName:[{required:!0,message:"请输入流域名称",trigger:"blur"}],basinnCode:[{required:!0,message:"请输入流域编码",trigger:"blur"}],aimWaterLevel:[{required:!0,message:"请选择水质目标等级",trigger:"change"}]},currentPage:1,pageSize:10,total:0,pageList:[10,20,30],searchModel:"",loading:!0,isEditor:!1,basinnId:""}},inject:["globelDelet"],created:function(){this.init(),this.getBasinTable()},mounted:function(){},methods:{selectChange:function(e,a){var t=e;for(var n in this.basinnId="",t)this.basinnId+=t[n].basinnId+",";this.basinnId=this.basinnId.substring(0,this.basinnId.length-1)},delet:function(e){this.globelDelet("/SiteManagement/basinn/delete",e,this.getBasinTable)},allDelet:function(){this.globelDelet("/SiteManagement/basinn/delete",this.basinnId,this.getBasinTable)},paginationSizeChange:function(e){this.pageSize=e,this.getBasinTable()},paginationChange:function(e){this.currentPage=e,this.getBasinTable()},basinAdd:function(){this.visiDialog_add=!0,this.isEditor=!1},closeForm:function(e){this.visiDialog_add=!1,this.resetForm(e)},getBasinTable:function(){var e=this;this.loading=!0;var a="";a=""==this.searchModel?"%":this.searchModel,this.$http.post("/SiteManagement/basinn/query",this.paramsObj.GetPageData_P("queryParamDto",this.currentPage,this.pageSize,[a],!0)).then(function(a){0==a.data.code&&(e.tableData=a.data.content.dataList,e.total=a.data.content.totalRecords,e.loading=!1)})},init:function(){var e=this;this.$http.get("/SiteManagement/station/queryTargetLevel").then(function(a){0==a.data.code&&(e.targetLevelData=a.data.content.dataList)})},editorBasin:function(e){this.visiDialog_add=!0,this.isEditor=!0,this.basinObj={aimWaterLevel:e.aimWaterLevel,basinnCode:e.basinnCode,basinnId:e.basinnId,basinnName:e.basinnName,basinnRemark:e.basinnRemark}},resetForm:function(e){this.$refs[e].resetFields(),this.basinObj={aimWaterLevel:"",basinnCode:"",basinnId:"",basinnName:"",basinnRemark:""}},closess:function(e){e(),this.resetForm("form")},submitForm:function(e){var a=this;this.$refs[e].validate(function(t){if(!t)return!1;if(a.isEditor){var n={};n.aimWaterLevel=a.basinObj.aimWaterLevel,n.basinnCode=a.basinObj.basinnCode,n.basinnName=a.basinObj.basinnName,n.basinnRemark=a.basinObj.basinnRemark,n.basinnId=a.basinObj.basinnId,a.$http.post("/SiteManagement/basinn/edit",n).then(function(t){0==t.data.code&&(a.$message({message:t.data.message,type:"success",duration:1500}),a.visiDialog_add=!1,a.resetForm(e),a.getBasinTable())})}else{var i={};i.aimWaterLevel=a.basinObj.aimWaterLevel,i.basinnCode=a.basinObj.basinnCode,i.basinnName=a.basinObj.basinnName,i.basinnRemark=a.basinObj.basinnRemark,a.$http.post("/SiteManagement/basinn/edit",i).then(function(t){0==t.data.code&&(a.$message({message:t.data.message,type:"success",duration:1500}),a.visiDialog_add=!1,a.resetForm(e),a.getBasinTable())})}})}},computed:{totalPageNumber:function(){return Math.ceil(this.total/this.pageSize)}}},i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"trafficpage secondary-page-mode"},[t("div",{staticClass:"secondary-toolbar"},[t("span",[e._v("关键字 : ")]),e._v(" "),t("div",{staticClass:"layoutBox",staticStyle:{width:"220px"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.searchModel,callback:function(a){e.searchModel=a},expression:"searchModel"}})],1),e._v("  \n         "),t("el-button",{on:{click:e.getBasinTable}},[t("i",{staticClass:"iconfont icon-sousuo"}),e._v("查询")]),e._v(" "),t("el-button",{on:{click:e.basinAdd}},[t("i",{staticClass:"iconfont icon-tianjia1"}),e._v("新增")]),e._v(" "),t("el-button",{attrs:{type:"delet"},on:{click:e.allDelet}},[t("i",{staticClass:"iconfont icon-shanchu"}),e._v("批量删除")])],1),e._v(" "),t("div",{staticClass:"currency-mode-wrap"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.tableData,height:"calc(100% - 35px)","element-loading-text":"加载中","element-loading-spinner":"loading-type-a","element-loading-background":"rgba(255, 255, 255, 1)"},on:{"selection-change":e.selectChange}},[t("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),t("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),e._v(" "),t("el-table-column",{attrs:{prop:"basinnName",label:"流域名称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"basinnCode",width:"300",label:"流域编码"}}),e._v(" "),t("el-table-column",{attrs:{prop:"aimWaterLevel",width:"300",label:"水质目标等级"}}),e._v(" "),t("el-table-column",{attrs:{prop:"basinnRemark",label:"备注"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[t("el-button",{attrs:{type:"secondBtn"},on:{click:function(t){return e.editorBasin(a.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{attrs:{type:"secondBtn"},on:{click:function(t){return e.delet(a.row.basinnId)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),t("div",{staticClass:"paginationBox"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,background:"",small:!0,"popper-class":"select-common-option","page-sizes":e.pageList,layout:"total,sizes,slot,->,prev, pager, next, jumper",total:e.total},on:{"size-change":e.paginationSizeChange,"current-change":e.paginationChange,"update:currentPage":function(a){e.currentPage=a},"update:current-page":function(a){e.currentPage=a}}},[t("span",{staticClass:"el-pagination__current"},[e._v("当前第"+e._s(e.currentPage)+"/"+e._s(e.totalPageNumber)+"页")])])],1)],1),e._v(" "),t("el-dialog",{attrs:{visible:e.visiDialog_add,width:"420px",title:"流域新增","before-close":e.closess},on:{"update:visible":function(a){e.visiDialog_add=a}}},[t("div",{staticClass:"dialogcontent"},[t("div",{staticClass:"dialog-layout"},[t("el-form",{ref:"form",attrs:{model:e.basinObj,rules:e.basinRules}},[t("table",{staticClass:"whTable"},[t("tr",[t("td",{attrs:{width:"28%"}},[t("span",{staticClass:"rCode"},[e._v("流域名称")])]),e._v(" "),t("td",[t("el-form-item",{attrs:{prop:"basinnName"}},[t("el-input",{model:{value:e.basinObj.basinnName,callback:function(a){e.$set(e.basinObj,"basinnName",a)},expression:"basinObj.basinnName"}})],1)],1)]),e._v(" "),t("tr",[t("td",{attrs:{width:"28%"}},[t("span",{staticClass:"rCode"},[e._v("流域名称")])]),e._v(" "),t("td",[t("el-form-item",{attrs:{prop:"basinnCode"}},[t("el-input",{model:{value:e.basinObj.basinnCode,callback:function(a){e.$set(e.basinObj,"basinnCode",a)},expression:"basinObj.basinnCode"}})],1)],1)]),e._v(" "),t("tr",[t("td",{attrs:{width:"28%"}},[t("span",{staticClass:"rCode"},[e._v("水质目标等级")])]),e._v(" "),t("td",[t("el-form-item",{attrs:{prop:"aimWaterLevel"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.basinObj.aimWaterLevel,callback:function(a){e.$set(e.basinObj,"aimWaterLevel",a)},expression:"basinObj.aimWaterLevel"}},e._l(e.targetLevelData,function(e){return t("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}),1)],1)],1)]),e._v(" "),t("tr",[t("td",{attrs:{width:"28%"}},[t("span",[e._v("备注")])]),e._v(" "),t("td",[t("el-input",{model:{value:e.basinObj.basinnRemark,callback:function(a){e.$set(e.basinObj,"basinnRemark",a)},expression:"basinObj.basinnRemark"}})],1)])])])],1)]),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"noticon"},on:{click:function(a){return e.submitForm("form")}}},[e._v("保 存")]),e._v(" "),t("el-button",{attrs:{type:"noticonsecondBtn"},on:{click:function(a){return e.closeForm("form")}}},[e._v("关 闭")])],1)])],1)},staticRenderFns:[]};var s=t("VU/8")(n,i,!1,function(e){t("Mol2")},"data-v-2abef672",null);a.default=s.exports}});
//# sourceMappingURL=94.6476b857cccb27a1e5d5.js.map