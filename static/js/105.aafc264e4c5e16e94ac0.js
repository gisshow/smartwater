webpackJsonp([105],{acAq:function(t,a){},eqlR:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("mvHQ"),l=e.n(i),s={name:"dayQualityControl",data:function(){return{levDesone:"目标水质",levDestwo:"当前水质",targetLev:"",currentLev:"",value:[],loadingtwo:!0,loading:!0,dateRange:"",stateRadio:"w01019",stationId:"",optionData:[{value:1,label:"水温",standard:"",isShow:!0},{value:2,label:"PH",standard:"6~9",isShow:!0},{value:3,label:"溶解氧",standard:"≥5",isShow:!0},{value:4,label:"电导率",standard:"",isShow:!0},{value:5,label:"浊度",standard:"",isShow:!0},{value:6,label:"高锰酸盐",standard:"6",isShow:!0},{value:7,label:"氨氮",standard:"1",isShow:!0},{value:8,label:"总磷",standard:"0.2",isShow:!0},{value:9,label:"总氮",standard:"",isShow:!0}],tableData:[],tableDataB:[],dailyQuality:!1,tableInput:"",singleFactor:!1,dialogData:[{monitoringItems:"高锰酸钾",waterQuality:"",spanValue:"",zeroPoint:"",span:""},{monitoringItems:"氨氮",waterQuality:"",spanValue:"",zeroPoint:"",span:""},{monitoringItems:"总磷",waterQuality:"",spanValue:"",zeroPoint:"",span:""},{monitoringItems:"总氮",waterQuality:"",spanValue:"",zeroPoint:"",span:""}],dailyTableHead:[{name:"高锰酸盐",itemCode:"w01019",prop:"acidSalt"},{name:"氨氮",itemCode:"w21003",prop:"ammonia"},{name:"总磷",itemCode:"w21011",prop:"phosphorus"},{name:"总氮",itemCode:"w21001",prop:"nitrogen"}],radioData:[],dailyQualityTable:[{name:"上一周的水质平均值",acidSalt:"1.9",ammonia:"0.12",phosphorus:"0.039",nitrogen:"4.96"},{name:"跨度值",acidSalt:"",ammonia:"",phosphorus:"",nitrogen:""},{name:"零点标准溶液浓度",acidSalt:"",ammonia:"",phosphorus:"",nitrogen:""},{name:"跨度标准溶液浓度",acidSalt:"",ammonia:"",phosphorus:"",nitrogen:""}],resetDailyQualityTable:[],siteInfo:{nodeName:"",targerWaterQuality:"",areaName:"",basinName:"",currentWaterQuality:""},controlTips:{}}},methods:{conversionWaterQuality:function(t){var a="";switch(parseInt(t)){case 1:a="Ⅰ类";case 2:a="Ⅱ类";case 3:a="Ⅲ类";case 4:a="Ⅳ类";case 5:a="Ⅴ类"}return a},getCurrentWaterQuality:function(){var t=this;this.$http.get("/Quality/qualityControlSet/getStationCurrentWaterQualityData",{params:{stationCode:this.stationId}}).then(function(a){0===a.data.code&&(t.siteInfo.currentWaterQuality=t.conversionWaterQuality(a.data.content.info))})},getCurrentData:function(){var t=this;this.loadingtwo=!0,this.$http.get("/Quality/qualityControlSet/currentDayQualityControlParam",{params:{stationCodes:this.stationId}}).then(function(a){0===a.data.code&&(t.tableData=a.data.content.dataList,t.loadingtwo=!1)})},historyDayQuality:function(){var t=this;this.loading=!0,this.$http.get("/Quality/qualityControlSet/historyDayQualityControlParam",{params:{startTime:this.dateRange[0].format("yyyy-MM-dd"),endTime:this.dateRange[1].format("yyyy-MM-dd"),indexCodes:this.stateRadio,stationCodes:this.stationId}}).then(function(a){0===a.data.code&&(t.loading=!1,console.log(4444,a.data.content.dataList),t.tableDataB=a.data.content.dataList)})},submitDaily:function(t){var a=this,e={stationCodes:this.stationId,indexCode:t.itemCode,spanValue:this.dailyQualityTable[1][t.prop],zeroStandardValue:this.dailyQualityTable[2][t.prop],spanStandardValue:this.dailyQualityTable[3][t.prop]};this.$http.post("/Quality/qualityControlSet/editorCurrentDayQualityControlParam",[e]).then(function(e){0===e.data.code&&(a.dailyQualityTable[1][t.prop]="",a.dailyQualityTable[2][t.prop]="",a.dailyQualityTable[3][t.prop]="",a.getCurrentData(),a.historyDayQuality(),a.$message({message:e.data.message,type:"success"}))})},submitDailyBatch:function(){var t=this,a=[];this.dailyTableHead.forEach(function(e){var i={stationCodes:t.stationId,indexCode:e.itemCode,spanValue:t.dailyQualityTable[1][e.prop],zeroStandardValue:t.dailyQualityTable[2][e.prop],spanStandardValue:t.dailyQualityTable[3][e.prop]};a.push(i)}),this.$http.post("/Quality/qualityControlSet/editorCurrentDayQualityControlParam",a).then(function(a){0===a.data.code&&(t.dailyQuality=!1,t.$message({message:a.data.message,type:"success"}),t.resetDailyBatchData(),t.getCurrentData(),t.historyDayQuality())})},resetDailyBatchData:function(){this.dailyQualityTable=JSON.parse(l()(this.resetDailyQualityTable))},getLev:function(){},getQualityControlTips:function(){var t=this;this.$http.get("/Quality/qualityControlSet/qualityControlTips",{params:{stationCodes:this.stationId,qualityAnalysisType:"DAY_QUALITY"}}).then(function(a){0===a.data.code&&(t.controlTips=a.data.content.info)})}},created:function(){this.$store.commit("setShowlefttree",!0),this.dateRange=[new Date((new Date).setDate((new Date).getDate()-10)),new Date],this.resetDailyQualityTable=JSON.parse(l()(this.dailyQualityTable))},computed:{totalPageNumber:function(){return Math.ceil(this.total/this.pageSize)},stationInfo:{get:function(){return this.$store.state.stationInfo}}},watch:{stationInfo:function(t){t.length>0&&(this.stationId=t[0].nodeId,this.targetLev=this.paramsObj.setWaterLev(t[0].targerWaterQuality),this.siteInfo.nodeName=t[0].nodeName,this.siteInfo.targerWaterQuality=this.conversionWaterQuality(t[0].targerWaterQuality),this.siteInfo.areaName=t[0].areaName,this.siteInfo.basinName=t[0].basinName,"002"===t[0].stationType1?(this.stateRadio="w01018",this.levDesone="污染标准",this.levDestwo="当前标准",this.radioData=[{id:"w01018",label:"COD"},{id:"w21003",label:"氨氮"},{id:"w21011",label:"总磷"},{id:"w21001",label:"总氮"}],this.dailyTableHead=[{name:"COD",itemCode:"w01018",prop:"acidSalt"},{name:"氨氮",itemCode:"w21003",prop:"ammonia"},{name:"总磷",itemCode:"w21011",prop:"phosphorus"},{name:"总氮",itemCode:"w21001",prop:"nitrogen"}]):(this.radioData=[{id:"w01019",label:"高锰酸盐"},{id:"w21003",label:"氨氮"},{id:"w21011",label:"总磷"},{id:"w21001",label:"总氮"}],this.levDesone="当前水质",this.levDestwo="目标水质"),this.getCurrentData(),this.historyDayQuality(),this.getCurrentWaterQuality(),this.getQualityControlTips())}}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dayQualityControl tapStyle secondary-page-mode"},[t._e(),t._v(" "),e("div",{staticClass:"currency-mode-wrap",staticStyle:{"margin-top":"0",height:"100%"}},[e("div",{staticClass:"reminder-wrap"},[e("span",{staticClass:"reminder-title"},[t._v("温馨提示")]),t._v(" "),e("div",{staticClass:"reminder-content",staticStyle:{width:"100%"}},[e("div",{staticClass:"reminder-text"},[e("p",[t._v("该点位最新一次质控参数设置于"+t._s(t.controlTips.LATESTTIME)+"，至今已使用"+t._s(t.controlTips.TODATE)+"；\n            期间日质控合格了"+t._s(t.controlTips.QUALIFIED)+"次；不合格了"+t._s(t.controlTips.UNQUALIFIED)+"次。造成无效数据xx条")]),t._v(" "),e("div",[e("el-button",{attrs:{type:"noticonsecondBtn"}},[t._v(" 生成任务 ")])],1)])])]),t._v(" "),e("div",{staticClass:"currency-body-wrap",staticStyle:{height:"calc(100% - 52px)"}},[e("el-scrollbar",{staticStyle:{height:"100%"}},[e("div",{staticClass:"modular-box"},[e("div",{staticClass:"modular-header"},[e("span",{staticClass:"title"},[t._v("当前使用24小时质控参数信息")])]),t._v(" "),e("div",{staticClass:"modular-body"},[e("div",{staticClass:"modular-row clear"},[e("div",{staticClass:"statistics-text clear"},[e("span",[t._v(t._s(t.levDesone)+"："+t._s(t.siteInfo.targerWaterQuality))]),t._v(" "),e("span",[t._v(t._s(t.levDestwo)+"："+t._s(t.siteInfo.currentWaterQuality))])]),t._v(" "),e("div",{staticClass:"toolbar"},[e("el-button",{staticStyle:{margin:"0",display:"inline-block","vertical-align":"middle"},on:{click:function(a){t.dailyQuality=!0}}},[t._v("参数设置")])],1)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingtwo,expression:"loadingtwo"}],staticClass:"table-box",staticStyle:{padding:"0 6px 6px"},attrs:{"element-loading-text":"加载中","element-loading-spinner":"loading-type-a","element-loading-background":"rgba(255, 255, 255, 1)"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[e("el-table-column",{attrs:{prop:"indexName",label:"监测项目"}}),t._v(" "),e("el-table-column",{attrs:{prop:"spanValue",label:"跨度值"}}),t._v(" "),e("el-table-column",{attrs:{prop:"zeroStandardValue",label:"零点标准溶液浓度"}}),t._v(" "),e("el-table-column",{attrs:{prop:"spanStandardValue",label:"跨度标准溶液浓度"}}),t._v(" "),e("el-table-column",{attrs:{prop:"submitTime",width:"160",label:"提交时间"}}),t._v(" "),e("el-table-column",{attrs:{prop:"submitter",label:"提交人"}}),t._v(" "),e("el-table-column",{attrs:{prop:"indexCount",label:"历史记录"}})],1)],1)])]),t._v(" "),e("div",{staticClass:"modular-box"},[e("div",{staticClass:"modular-header"},[e("span",{staticClass:"title"},[t._v("历史设置24小时质控参数信息")]),t._v(" "),e("div",{staticClass:"toolbar"},[e("span",[t._v("时间范围 : ")]),t._v(" "),e("div",{staticClass:"layoutBox",staticStyle:{width:"242px"}},[e("el-date-picker",{attrs:{align:"right",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.dateRange,callback:function(a){t.dateRange=a},expression:"dateRange"}})],1),t._v(" \n              "),e("el-button",{staticStyle:{margin:"0"},on:{click:function(a){return t.historyDayQuality()}}},[e("i",{staticClass:"iconfont icon-sousuo"}),t._v("查询")])],1)]),t._v(" "),e("div",{staticClass:"modular-body"},[e("div",{staticClass:"modular-row"},[e("div",{staticClass:"state-radio-wrap"},[e("el-radio-group",{attrs:{size:"small"},on:{change:function(a){return t.historyDayQuality()}},model:{value:t.stateRadio,callback:function(a){t.stateRadio=a},expression:"stateRadio"}},t._l(t.radioData,function(a,i){return e("el-radio-button",{key:i,attrs:{label:a.id}},[t._v(t._s(a.label))])}),1)],1)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table-box",staticStyle:{padding:"0 6px 6px"},attrs:{"element-loading-text":"加载中","element-loading-spinner":"loading-type-a","element-loading-background":"rgba(255, 255, 255, 1)"}},[e("el-table",{attrs:{data:t.tableDataB,border:""}},[e("el-table-column",{attrs:{prop:"submitTime",label:"提交时间"}}),t._v(" "),e("el-table-column",{attrs:{prop:"submitter",label:"提交人"}}),t._v(" "),e("el-table-column",{attrs:{prop:"spanValue",label:"跨度值"}}),t._v(" "),e("el-table-column",{attrs:{prop:"zeroStandardValue",label:"零点标准溶液浓度"}}),t._v(" "),e("el-table-column",{attrs:{prop:"spanStandardValue",label:"跨度标准溶液浓度"}}),t._v(" "),e("el-table-column",{attrs:{prop:"operatingTime",label:"使用时间"}}),t._v(" "),e("el-table-column",{attrs:{prop:"qualityNumber",label:"质控次数"}}),t._v(" "),e("el-table-column",{attrs:{prop:"unqualifiedNumber",label:"不合格次数"}}),t._v(" "),e("el-table-column",{attrs:{prop:"impactData",label:"影响数据"}})],1)],1)])])])],1)]),t._v(" "),e("el-dialog",{attrs:{width:"840px",title:"日质控设置",visible:t.dailyQuality},on:{close:function(a){return t.resetDailyBatchData()},"update:visible":function(a){t.dailyQuality=a}}},[e("div",{staticClass:"daily-quality-box",staticStyle:{padding:"8px"}},[e("div",{staticClass:"daily-head-wrap"},[e("div",{staticClass:"row clear"},[e("span",{staticClass:"label"},[t._v("当前点位："+t._s(t.siteInfo.nodeName))])]),t._v(" "),e("div",{staticClass:"row clear"},[e("span",{staticClass:"label"},[t._v("目标水质："+t._s(t.siteInfo.targerWaterQuality))]),t._v(" "),e("span",{staticClass:"label"},[t._v("当前水质："+t._s(t.siteInfo.currentWaterQuality))])]),t._v(" "),e("div",{staticClass:"row clear"},[e("span",{staticClass:"label"},[t._v("所属区域："+t._s(t.siteInfo.areaName))]),t._v(" "),e("span",{staticClass:"label"},[t._v("所属流域："+t._s(t.siteInfo.basinName))])])]),t._v(" "),e("div",{staticClass:"daily-table-wrap"},[e("table",{staticClass:"normal-table"},[e("tr",[e("th",{attrs:{width:"134px;"}},[t._v("监测项目")]),t._v(" "),t._l(t.dailyTableHead,function(a,i){return e("th",{key:i},[t._v(t._s(a.name))])})],2),t._v(" "),t._l(t.dailyQualityTable,function(a,i){return e("tr",{key:i},[e("td",[e("span",[t._v(t._s(a.name))])]),t._v(" "),e("td",[0===i?e("span",[t._v(t._s(a.acidSalt))]):t._e(),t._v(" "),0!==i?e("div",{staticClass:"layoutBox",staticStyle:{width:"80px"}},[e("el-input",{model:{value:a.acidSalt,callback:function(e){t.$set(a,"acidSalt",e)},expression:"item.acidSalt"}})],1):t._e(),t._v(" "),e("span",[t._v("（mg/L）")])]),t._v(" "),e("td",[0===i?e("span",[t._v(t._s(a.ammonia))]):t._e(),t._v(" "),0!==i?e("div",{staticClass:"layoutBox",staticStyle:{width:"80px"}},[e("el-input",{model:{value:a.ammonia,callback:function(e){t.$set(a,"ammonia",e)},expression:"item.ammonia"}})],1):t._e(),t._v(" "),e("span",[t._v("（mg/L）")])]),t._v(" "),e("td",[0===i?e("span",[t._v(t._s(a.phosphorus))]):t._e(),t._v(" "),0!==i?e("div",{staticClass:"layoutBox",staticStyle:{width:"80px"}},[e("el-input",{model:{value:a.phosphorus,callback:function(e){t.$set(a,"phosphorus",e)},expression:"item.phosphorus"}})],1):t._e(),t._v(" "),e("span",[t._v("（mg/L）")])]),t._v(" "),e("td",[0===i?e("span",[t._v(t._s(a.nitrogen))]):t._e(),t._v(" "),0!==i?e("div",{staticClass:"layoutBox",staticStyle:{width:"80px"}},[e("el-input",{model:{value:a.nitrogen,callback:function(e){t.$set(a,"nitrogen",e)},expression:"item.nitrogen"}})],1):t._e(),t._v(" "),e("span",[t._v("（mg/L）")])])])}),t._v(" "),e("tr",[e("td"),t._v(" "),t._l(t.dailyTableHead,function(a,i){return e("td",{key:i},[e("el-button",{on:{click:function(e){return t.submitDaily(a)}}},[t._v("提交")])],1)})],2)],2),t._v(" "),e("div",{staticClass:"btn-wrap"},[e("el-button",{staticStyle:{width:"100px"},on:{click:function(a){return t.submitDailyBatch()}}},[t._v("批量提交")])],1)])])])],1)},staticRenderFns:[]};var o=e("VU/8")(s,n,!1,function(t){e("acAq")},"data-v-1b22e51e",null);a.default=o.exports}});
//# sourceMappingURL=105.aafc264e4c5e16e94ac0.js.map