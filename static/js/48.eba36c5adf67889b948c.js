webpackJsonp([48],{brQ9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"",data:function(){return{value:"",visiDialog:!1,visiDialog_editor:!1,visiDialog_add:!1,dateRange:[],tableData:[],optionName:[],optionType:[],nameValue:"",typeValue:"",codeValue:"",instObj:{instName:"",instType:"",instCode:"",instSerial:"",instContent:""},instRules:{instName:[{required:!0,message:"请输入指令名称",trigger:"blur"}],instType:[{required:!0,message:"请选择指令类型",trigger:"change"}],instCode:[{required:!0,message:"请输入指令编号",trigger:"blur"}],instSerial:[{required:!0,message:"请输入指令序号",trigger:"blur"}],instContent:[{required:!0,message:"请输入内容模板",trigger:"blur"}]},addInstObj:{TypeName:"",TypeCode:"",TypeId:""},typeRules:{TypeName:[{required:!0,message:"请输入指令类型名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],TypeCode:[{required:!0,message:"请输入指令类型编码",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}]},typeInstId:"",InstId:"",typeInstObj:{},instMes:"指令新增",isEditor:!1,instructionsId:"",instructionsType_instructionsTypeId:"",instructionsType_code:"",currentPage:1,total:200,pageSize:10,pageList:[10,15,20]}},inject:["globelDelet"],created:function(){this.$store.commit("setShowlefttree",!1),this.getInstName(),this.getInstType(),this.getInstTable()},mounted:function(){},methods:{selectChange:function(t){},nameChange:function(t){null==t&&(this.nameValue=""),this.getInstTable()},typeChange:function(t){null==t&&(this.typeValue=""),this.getInstTable()},closess:function(t){t()},paginationSizeChange:function(t){this.pageSize=t,this.getInstTable()},paginationChange:function(t){this.currentPage=t,this.getInstTable()},editorInst:function(t){for(var e in this.visiDialog=!0,this.isEditor=!0,this.instMes="指令编辑",this.instructionsId=t.instructionsId,this.instructionsType_instructionsTypeId=t.instructionsType_instructionsTypeId,this.optionType)t.instructionsType_name==this.optionType[e].name&&(this.instructionsType_code=this.optionType[e].code);this.instructionsType_code,this.instObj={instName:t.name,instType:t.instructionsType_name,instCode:t.code,instSerial:t.numbers,instContent:t.contenttemplate}},deletInst:function(t){this.globelDelet("/httpApi/instructions/delete",t,this.getInstTable)},openDialog:function(){this.visiDialog=!0,this.isEditor=!1,this.instMes="指令新增",this.clearInst()},getInstName:function(){var t=this;this.$http.post("/httpApi/instructions/query",this.paramsObj.GetData_P("instructionsId,name,code")).then(function(e){0==e.data.code&&(t.optionName=e.data.content.dataList)})},getInstType:function(){var t=this;this.$http.post("/httpApi/instructionsType/query",this.paramsObj.GetData_P("instructionsTypeId,name,code")).then(function(e){0==e.data.code&&(t.optionType=e.data.content.dataList)})},searchInst:function(){this.getInstTable()},getInstTable:function(){var t=this;this.$http.post("/httpApi/instructions/query",this.paramsObj.GetPageData_P("instManage",this.currentPage,this.pageSize,[this.nameValue,this.typeValue,this.codeValue],!0)).then(function(e){console.log(e),0==e.data.code&&(t.tableData=e.data.content.dataList,t.total=e.data.content.totalRecords,t.getInstName())})},instSave:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var n={};n=e.isEditor?{code:e.instObj.instCode,contenttemplate:e.instObj.instContent,instructionsType:{code:e.instructionsType_code,instructionsTypeId:e.instructionsType_instructionsTypeId,name:e.instObj.instType},instructionsId:e.instructionsId,name:e.instObj.instName,numbers:e.instObj.instSerial}:{code:e.instObj.instCode,contenttemplate:e.instObj.instContent,instructionsType:e.typeInstObj,name:e.instObj.instName,numbers:e.instObj.instSerial},e.$http.post("/httpApi/instructions/edit",n).then(function(t){0==t.data.code?(e.visiDialog=!1,e.$message({message:t.data.message,type:"success",duration:700}),e.getInstTable(),e.resetForm("instForm")):e.$message({message:t.data.message,type:"warning",duration:700})})})},clearInst:function(){this.instructionsId="",this.instructionsType_code="",this.instructionsType_instructionsTypeId="",this.instObj={instName:"",instType:"",instCode:"",instSerial:"",instContent:""}},instTypeChange:function(t){for(var e in this.optionType)t==this.optionType[e].name&&(this.typeInstObj={code:this.optionType[e].code,instructionsTypeId:this.optionType[e].instructionsTypeId,name:this.optionType[e].name})},instClose:function(){this.visiDialog=!1,this.resetForm("instForm")},InstTypeSave:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$http.post("/httpApi/instructionsType/edit",{code:e.addInstObj.TypeCode,name:e.addInstObj.TypeName,protocolTypeId:e.addInstObj.TypeId}).then(function(t){0==t.data.code?(e.$message({message:"新增成功",type:"success",duration:700}),e.getInstType(),e.visiDialog_add=!1,e.resetForm("typeForm")):e.$message({message:t.data.message,type:"warning",duration:700})})})},InstTypeDelet:function(t){this.globelDelet("/httpApi/instructionsType/delete",t,this.getInstType)},InstTypeDeletAll:function(){this.globelDelet("/httpApi/instructionsType/delete",this.typeInstId,this.getInstType)},handleSelectionChange:function(t,e){var n=t;for(var s in this.typeInstId="",n)this.typeInstId+=n[s].instructionsTypeId+",";this.typeInstId=this.typeInstId.substring(0,this.typeInstId.length-1)},instSelectChange:function(t,e){var n=t;for(var s in this.InstId="",n)this.InstId+=n[s].instructionsId+",";this.InstId=this.InstId.substring(0,this.InstId.length-1)},InstDeletAll:function(){this.globelDelet("/httpApi/instructions/delete",this.InstId,this.getInstTable)},InstTypeClose:function(){this.visiDialog_add=!1,this.resetForm("typeForm")},resetForm:function(t){this.$refs[t].resetFields()}},computed:{totalPageNumber:function(){return Math.ceil(this.total/this.pageSize)}}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"trafficpage secondary-page-mode"},[n("div",{staticClass:"secondary-toolbar"},[n("span",[t._v("指令名称 : ")]),t._v(" \n        "),n("div",{staticClass:"layoutBox",staticStyle:{width:"120px"}},[n("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},on:{change:t.nameChange},model:{value:t.nameValue,callback:function(e){t.nameValue=e},expression:"nameValue"}},t._l(t.optionName,function(t){return n("el-option",{key:t.instructionsId,attrs:{label:t.name,value:t.name}})}),1)],1),t._v("  \n        "),n("span",[t._v("指令类型 : ")]),t._v(" \n        "),n("div",{staticClass:"layoutBox",staticStyle:{width:"120px"}},[n("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},on:{change:t.typeChange},model:{value:t.typeValue,callback:function(e){t.typeValue=e},expression:"typeValue"}},t._l(t.optionType,function(t){return n("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1),t._v("  \n         "),n("span",[t._v("指令编号 : ")]),t._v(" "),n("div",{staticClass:"layoutBox",staticStyle:{width:"180px"}},[n("el-input",{attrs:{placeholder:"请输入"},model:{value:t.codeValue,callback:function(e){t.codeValue=e},expression:"codeValue"}})],1),t._v("  \n       \n         "),n("el-button",{on:{click:t.searchInst}},[n("i",{staticClass:"iconfont icon-sousuo"}),t._v("查询")]),t._v(" "),n("el-button",{on:{click:t.openDialog}},[n("i",{staticClass:"iconfont icon-tianjia"}),t._v("新增")]),t._v(" "),n("el-button",{attrs:{type:"delet"},on:{click:t.InstDeletAll}},[n("i",{staticClass:"iconfont icon-shanchu"}),t._v("批量删除")])],1),t._v(" "),n("div",{staticClass:"currency-mode-wrap"},[n("el-table",{attrs:{border:"",data:t.tableData,height:"calc(100% - 37px)"},on:{"selection-change":t.instSelectChange}},[n("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"指令名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"code",label:"指令编号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"numbers",label:"指令序号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"instructionsType_name",label:"指令类型"}}),t._v(" "),n("el-table-column",{attrs:{prop:"contenttemplate",label:"内容模板"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[n("el-button",{attrs:{type:"secondBtn"},on:{click:function(n){return t.editorInst(e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{type:"secondBtn"},on:{click:function(n){return t.deletInst(e.row.instructionsId)}}},[t._v("删除")])],1)]}}])})],1),t._v(" "),n("div",{staticClass:"table-pagination-wrap"},[n("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,"popper-class":"select-pagination-option",background:"",small:!0,"page-sizes":t.pageList,layout:"total, sizes, slot,->,prev, pager, next, jumper",total:t.total},on:{"size-change":t.paginationSizeChange,"current-change":t.paginationChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}},scopedSlots:t._u([{key:"default",fn:function(){return[n("span",{staticClass:"el-pagination__current"},[t._v("当前第"+t._s(t.currentPage)+"/"+t._s(t.totalPageNumber)+"页")])]},proxy:!0}])})],1)],1),t._v(" "),n("el-dialog",{attrs:{visible:t.visiDialog,width:"650px",title:t.instMes,"before-close":t.instClose},on:{"update:visible":function(e){t.visiDialog=e}}},[n("div",{staticClass:"dialogcontent"},[n("div",{staticClass:"dialog-layout"},[n("el-form",{ref:"instForm",attrs:{model:t.instObj,rules:t.instRules}},[n("ul",{staticClass:"formul"},[n("li",[n("div",{staticStyle:{"margin-right":"42px"}},[n("span",{staticClass:"layoutspan"},[t._v("指令名称 : ")]),t._v(" \n                              "),n("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[n("el-form-item",{attrs:{prop:"instName"}},[n("el-input",{attrs:{placeholder:"请输入"},model:{value:t.instObj.instName,callback:function(e){t.$set(t.instObj,"instName",e)},expression:"instObj.instName"}})],1)],1)]),t._v(" "),n("div",[n("span",{staticClass:"layoutspan"},[t._v("指令类型 : ")]),t._v(" \n                              "),n("div",{staticClass:"layoutBox",staticStyle:{width:"150px"}},[n("el-form-item",{attrs:{prop:"instType"}},[n("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{change:t.instTypeChange},model:{value:t.instObj.instType,callback:function(e){t.$set(t.instObj,"instType",e)},expression:"instObj.instType"}},t._l(t.optionType,function(t){return n("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1)],1),t._v(" "),n("div",{staticClass:"layoutBox",staticStyle:{width:"50px","vertical-align":"-1px"}},[n("el-button",{on:{click:function(e){t.visiDialog_editor=!0}}},[t._v("编辑")])],1)])]),t._v(" "),n("li",[n("div",{staticStyle:{"margin-right":"42px"}},[n("span",{staticClass:"layoutspan"},[t._v("指令编号 : ")]),t._v(" \n                              "),n("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[n("el-form-item",{attrs:{prop:"instCode"}},[n("el-input",{attrs:{placeholder:"请输入"},model:{value:t.instObj.instCode,callback:function(e){t.$set(t.instObj,"instCode",e)},expression:"instObj.instCode"}})],1)],1)]),t._v(" "),n("div",[n("span",{staticClass:"layoutspan"},[t._v("指令序号 : ")]),t._v(" \n                              "),n("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[n("el-form-item",{attrs:{prop:"instSerial"}},[n("el-input",{attrs:{placeholder:"请输入",type:"number"},model:{value:t.instObj.instSerial,callback:function(e){t.$set(t.instObj,"instSerial",e)},expression:"instObj.instSerial"}})],1)],1)])]),t._v(" "),n("li",[n("div",{staticClass:"uploaddiv"},[n("span",{staticClass:"layoutspan"},[t._v("内容模板 : ")]),t._v(" "),n("div",{staticClass:"layoutBox",staticStyle:{width:"98%"}},[n("el-form-item",{attrs:{prop:"instContent"}},[n("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容",resize:"none"},model:{value:t.instObj.instContent,callback:function(e){t.$set(t.instObj,"instContent",e)},expression:"instObj.instContent"}})],1)],1)])])])])],1)]),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"noticon"},on:{click:function(e){return t.instSave("instForm")}}},[t._v("保 存")]),t._v(" "),n("el-button",{attrs:{type:"noticonsecondBtn"},on:{click:t.instClose}},[t._v("关 闭")])],1)]),t._v(" "),n("el-dialog",{attrs:{visible:t.visiDialog_editor,width:"750px",title:"指令类型","before-close":t.closess},on:{"update:visible":function(e){t.visiDialog_editor=e}}},[n("div",{staticClass:"dialogcontent"},[n("div",{staticStyle:{"margin-bottom":"12px"}},[n("el-button",{on:{click:function(e){t.visiDialog_add=!0}}},[n("i",{staticClass:"iconfont icon-tianjia1"}),t._v("新增")]),t._v(" "),n("el-button",{attrs:{type:"delet"},on:{click:t.InstTypeDeletAll}},[n("i",{staticClass:"iconfont icon-shanchu"}),t._v("批量删除")])],1),t._v(" "),n("el-table",{attrs:{border:"",data:t.optionType,height:"300px"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"指令类型名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"code",label:"指令类型编号"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[n("el-button",{attrs:{type:"secondBtn"},on:{click:function(n){return t.InstTypeEditor(e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{type:"secondBtn"},on:{click:function(n){return t.InstTypeDelet(e.row.instructionsTypeId)}}},[t._v("删除")])],1)]}}])})],1)],1)]),t._v(" "),n("el-dialog",{attrs:{visible:t.visiDialog_add,width:"360px",title:"指令类型新增","before-close":t.InstTypeClose},on:{"update:visible":function(e){t.visiDialog_add=e}}},[n("div",{staticClass:"dialogcontent"},[n("div",{staticClass:"dialog-layout"},[n("el-form",{ref:"typeForm",attrs:{model:t.addInstObj,rules:t.typeRules}},[n("ul",{staticClass:"formul"},[n("li",[n("div",{staticStyle:{width:"100%"}},[n("span",{staticClass:"layoutspan"},[t._v("指令类型名称 : ")]),t._v(" \n                                      "),n("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[n("el-form-item",{attrs:{prop:"TypeName"}},[n("el-input",{model:{value:t.addInstObj.TypeName,callback:function(e){t.$set(t.addInstObj,"TypeName",e)},expression:"addInstObj.TypeName"}})],1)],1)])]),t._v(" "),n("li",[n("div",{staticStyle:{width:"100%"}},[n("span",{staticClass:"layoutspan"},[t._v("指令类型编码 : ")]),t._v(" \n                                      "),n("div",{staticClass:"layoutBox",staticStyle:{width:"200px"}},[n("el-form-item",{attrs:{prop:"TypeCode"}},[n("el-input",{model:{value:t.addInstObj.TypeCode,callback:function(e){t.$set(t.addInstObj,"TypeCode",e)},expression:"addInstObj.TypeCode"}})],1)],1)])])])])],1)]),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"noticon"},on:{click:function(e){return t.InstTypeSave("typeForm")}}},[t._v("保 存")]),t._v(" "),n("el-button",{attrs:{type:"noticonsecondBtn"},on:{click:t.InstTypeClose}},[t._v("关 闭")])],1)])],1)},staticRenderFns:[]};var a=n("VU/8")(s,i,!1,function(t){n("qN0B")},"data-v-7cbdbb85",null);e.default=a.exports},qN0B:function(t,e){}});
//# sourceMappingURL=48.eba36c5adf67889b948c.js.map