webpackJsonp([42],{BMpb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("dwSH"),r={name:"rateRecovery",data:function(){return{dateRange:[],value:"w01019",toplist:[{name:"总项次",num:"0"},{name:"合格项次",num:"0"},{name:"不合格项次",num:"0"},{name:"合格率",num:"0%"}],stationId:"",stationName:"",optionData:[{value:"w01019",label:"高锰酸盐"},{value:"w21003",label:"氨氮"},{value:"w21011",label:"总磷"},{value:"w21001",label:"总氮"}],hTableData:[{range:"90-100",totalItem:"0",proportion:"0.00"},{range:"80-120",totalItem:"0",proportion:"0.00"},{range:"70-130",totalItem:"0",proportion:"0.00"},{range:"60-150",totalItem:"0",proportion:"0.00"},{range:"其他",totalItem:"1",proportion:"100.00"}],tableData:[{dateTime:"2019-02-25 13:11:05",monitoringItem:"高锰酸盐",measuredValue:"3.1",waterSample:"7",concentration:"1000",volume:"1.4",afterBidding:"200",rateRecovery:"57.11"}],recoveryList:{list:[{one:"",two:"",three:"",four:"",other:""},{one:"",two:"",three:"",four:"",other:""}],maxValue:"",minValue:""},barChart:"",lineChart:"",fieldList:["time","indexName","value","addValue","addConcentration","addVolume","waterSampleVolume","recoveryValue"]}},methods:{createRateRecoveryBar:function(t){var e=this.$echarts.init(document.getElementById("rateRecoveryBar")),a=this.contrastFactor(this.value);if(t.series.forEach(function(t,e){t.barWidth=20}),e.clear(),0===t.xAxis.length)return!1;var i={color:["#8e42ff","#00a3f5","#1cad8b","#1ebd1e","#c2a100"],title:{text:a+" 加标回收率-柱状图",x:"center",textStyle:{fontWeight:100,color:"#166bce"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:"{b}<br/>{a0}: {c0} <br/>{a1}: {c1} <br/>{a2}: {c2} <br/>{a3}: {c3} %"},grid:{left:60,right:60,bottom:20},xAxis:{type:"category",name:"时间",nameTextStyle:{color:"#166bce"},axisLine:{lineStyle:{width:2,color:"#c6d1de"}},axisLabel:{color:"#333"},data:t.xAxis},yAxis:{type:"value",name:"加标回收率（%）",nameTextStyle:{color:"#166bce"},axisLine:{lineStyle:{width:2,color:"#c6d1de"}},axisLabel:{color:"#333"}},series:t.series};e.setOption(i)},createRateRecoveryLine:function(t){var e=this.$echarts.init(document.getElementById("rateRecoveryLine")),a={color:["#8ca8c8"],tooltip:{trigger:"axis",formatter:"{b}<br/>{a}: {c} %"},title:{text:this.contrastFactor(this.value)+" 加标回收率-曲线图",x:"center",y:10,textStyle:{fontWeight:100,color:"#166bce"}},grid:{left:60,right:60,bottom:20},xAxis:{type:"category",name:"时间",nameTextStyle:{color:"#166bce"},axisLine:{lineStyle:{width:2,color:"#c6d1de"}},axisLabel:{color:"#333"},data:t.xAxis},yAxis:{type:"value",name:"加标回收率（%）",nameTextStyle:{color:"#166bce"},axisLine:{lineStyle:{width:2,color:"#c6d1de"}},axisLabel:{color:"#333"}},series:[{name:"加标回收率",data:t.yAxis,type:"line",barWidth:20,itemStyle:{color:"#00a1e4"},markLine:{data:[{yAxis:parseFloat(t.lower)},{yAxis:parseFloat(t.upper)}]}}]};e.clear(),e.setOption(a)},getRecoveryRatioData:function(){var t=this;this.$http.get("/Quality/testData/recoveryRatioData",{params:{startTime:this.dateRange[0].format("yyyy-MM-dd hh:mm:ss"),endTime:this.dateRange[1].format("yyyy-MM-dd hh:mm:ss"),indexCodes:this.value,stationCodes:this.stationId,ifCurrentSection:!0}}).then(function(e){0===e.data.code&&(t.recoveryList=e.data.content.info,t.toplist[0].num=e.data.content.info.count,t.toplist[1].num=e.data.content.info.qualifiedCount,t.toplist[2].num=e.data.content.info.noQualifiedCount,t.toplist[3].num=e.data.content.info.qualifiedRate)})},getBarChartData:function(){var t=this;this.$http.get("/Quality/testData/recoveryBarChartData",{params:{startTime:this.dateRange[0].format("yyyy-MM-dd hh:mm:ss"),endTime:this.dateRange[1].format("yyyy-MM-dd hh:mm:ss"),indexCodes:this.value,stationCodes:this.stationId,ifCurrentSection:!0}}).then(function(e){0===e.data.code&&(t.barChart=e.data.content.info,t.createRateRecoveryBar(t.barChart))})},getLineChartData:function(){var t=this;this.$http.get("/Quality/testData/recoveryChartData",{params:{startTime:this.dateRange[0].format("yyyy-MM-dd hh:mm:ss"),endTime:this.dateRange[1].format("yyyy-MM-dd hh:mm:ss"),indexCodes:this.value,stationCodes:this.stationId,ifCurrentSection:!0}}).then(function(e){0===e.data.code&&(t.lineChart=e.data.content.dataList[0],t.createRateRecoveryLine(t.lineChart))})},getRecoveryData:function(){var t=this;this.$http.get("/Quality/testData/recoveryData",{params:{startTime:this.dateRange[0].format("yyyy-MM-dd hh:mm:ss"),endTime:this.dateRange[1].format("yyyy-MM-dd hh:mm:ss"),indexCodes:this.value,stationCodes:this.stationId,ifCurrentSection:!0}}).then(function(e){0===e.data.code&&(t.tableData=e.data.content.dataList)})},contrastFactor:function(t){for(var e=0;e<this.optionData.length;e++)if(this.optionData[e].value===t)return this.optionData[e].label},searchData:function(){this.getRecoveryRatioData(),this.getBarChartData(),this.getLineChartData(),this.getRecoveryData()},exportExcel:function(){var t=this.$refs.table.$el.querySelector(".el-table__header"),e=this.stationName+"加标回收率",a={headerProp:this.fieldList.join(","),startTime:this.dateRange[0].format("yyyy-MM-dd hh:mm:ss"),endTime:this.dateRange[1].format("yyyy-MM-dd hh:mm:ss"),indexCodes:this.value,stationCodes:this.stationId,tableType:"RECOVERY_DATA",ifCurrentSection:!0,pattern:"yyyy-MM-dd"};Object(i.a)(t,e,"","1","/Quality/exports/qualityControlExcel",a)}},mounted:function(){},created:function(){var t=(new Date).setFullYear((new Date).getFullYear()-1),e=new Date;this.dateRange=[new Date(t),e]},computed:{stationInfo:{get:function(){return this.$store.state.stationInfo}}},watch:{stationInfo:function(t){t.length>0&&(this.stationId=t[0].nodeId,this.stationName=t[0].nodeName,this.getRecoveryRatioData(),this.getBarChartData(),this.getLineChartData(),this.getRecoveryData())}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rateRecovery secondary-page-mode"},[a("div",{staticClass:"secondary-toolbar"},[a("span",[t._v("时间选择 : ")]),t._v(" \n        "),a("div",{staticClass:"layoutBox",staticStyle:{width:"242px"}},[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),t._v("  \n        "),a("span",[t._v("监测项目 : ")]),t._v(" \n        "),a("div",{staticClass:"layoutBox",staticStyle:{width:"160px"}},[a("el-select",{attrs:{"collapse-tags":"",placeholder:"请选择"},on:{change:function(t){}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.optionData,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v("  \n        "),a("el-button",{on:{click:function(e){return t.searchData()}}},[a("i",{staticClass:"iconfont icon-sousuo"}),t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"delet"},on:{click:function(e){return t.exportExcel()}}},[a("i",{staticClass:"iconfont icon-daochu"}),t._v("导出")])],1),t._v(" "),a("div",{staticClass:"currency-mode-wrap"},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("div",{staticClass:"topul"},[a("ul",t._l(t.toplist,function(e,i){return a("li",{key:i},[a("span",[a("i")]),t._v(" "),a("p",[t._v(t._s(e.name)+" : "),a("span",[t._v(t._s(e.num))])])])}),0)]),t._v(" "),a("div",{staticClass:"zTable"},[a("table",[a("tr",[a("td",{attrs:{colspan:"6"}},[a("div",[a("i"),t._v("总体范围: "+t._s(t.recoveryList.minValue)+" 到 "+t._s(t.recoveryList.maxValue)+"\n                            ")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{background:"#e7f0f9"},attrs:{width:"10%"}},[t._v("回收率范围")]),t._v(" "),a("td",{attrs:{width:"18%"}},[t._v("90-100")]),t._v(" "),a("td",{attrs:{width:"18%"}},[t._v("80-120")]),t._v(" "),a("td",{attrs:{width:"18%"}},[t._v("70-130")]),t._v(" "),a("td",{attrs:{width:"18%"}},[t._v("60-150")]),t._v(" "),a("td",{attrs:{width:"18%"}},[t._v("其它")])]),t._v(" "),a("tr",[a("td",{staticStyle:{background:"#e7f0f9"},attrs:{width:"10%"}},[t._v("总项次")]),t._v(" "),a("td",{attrs:{width:"18%"}},[t._v(t._s(t.recoveryList.list[0].one))]),t._v(" "),a("td",{attrs:{width:"18%"}},[t._v(t._s(t.recoveryList.list[0].two))]),t._v(" "),a("td",{attrs:{width:"18%"}},[t._v(t._s(t.recoveryList.list[0].three))]),t._v(" "),a("td",{attrs:{width:"18%"}},[t._v(t._s(t.recoveryList.list[0].four))]),t._v(" "),a("td",{attrs:{width:"18%"}},[t._v(t._s(t.recoveryList.list[0].other))])]),t._v(" "),a("tr",[a("td",{staticStyle:{background:"#e7f0f9"},attrs:{width:"10%"}},[t._v("比重")]),t._v(" "),a("td",{attrs:{width:"18%"}},[a("div",{staticClass:"echarttd"},[t._v("\n                            "+t._s(""===t.recoveryList.list[1].one?"-":t.recoveryList.list[1].one))])]),t._v(" "),a("td",{attrs:{width:"18%"}},[a("div",{staticClass:"echarttd"},[t._v("\n                            "+t._s(""===t.recoveryList.list[1].two?"-":t.recoveryList.list[1].two)+"\n                          ")])]),t._v(" "),a("td",{attrs:{width:"18%"}},[a("div",{staticClass:"echarttd"},[t._v("\n                            "+t._s(""===t.recoveryList.list[1].three?"-":t.recoveryList.list[1].three)+"\n                          ")])]),t._v(" "),a("td",{attrs:{width:"18%"}},[a("div",{staticClass:"echarttd"},[t._v("\n                            "+t._s(""===t.recoveryList.list[1].four?"-":t.recoveryList.list[1].four)+"\n                          ")])]),t._v(" "),a("td",{attrs:{width:"18%"}},[a("div",{staticClass:"echarttd"},[t._v("\n                            "+t._s(""===t.recoveryList.list[1].other?"-":t.recoveryList.list[1].other)+"\n                          ")])])])])]),t._v(" "),a("div",{staticClass:"rateRecoveryBar",attrs:{id:"rateRecoveryBar"}}),t._v(" "),a("div",{staticClass:"rateRecoveryLine",attrs:{id:"rateRecoveryLine"}}),t._v(" "),a("div",{staticClass:"table-wrap",staticStyle:{"margin-top":"10px"}},[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",label:"时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"indexName",label:"监测项目"}}),t._v(" "),a("el-table-column",{attrs:{prop:"value",label:"样品测定值(mg/L)"}}),t._v(" "),a("el-table-column",{attrs:{prop:"addValue",label:"加标后水样测定值(mg/L)"}}),t._v(" "),a("el-table-column",{attrs:{prop:"addConcentration",label:"加标样浓度(mg/L)"}}),t._v(" "),a("el-table-column",{attrs:{prop:"addVolume",label:"加标体积(ml)"}}),t._v(" "),a("el-table-column",{attrs:{prop:"waterSampleVolume",label:"加标后水样体积(ml)"}}),t._v(" "),a("el-table-column",{attrs:{prop:"recoveryValue",label:"加标回收率(%)"}})],1)],1)])],1)])},staticRenderFns:[]};var s=a("VU/8")(r,o,!1,function(t){a("G1b2")},"data-v-9d677e78",null);e.default=s.exports},G1b2:function(t,e){}});
//# sourceMappingURL=42.99f39b5f822e8e80a93f.js.map