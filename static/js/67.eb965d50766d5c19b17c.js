webpackJsonp([67],{WP4S:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("dwSH"),n={name:"",data:function(){return{dateRange:"",loading:!0,stateRadio:"1",value:["w01019","w21003","w21011","w21001"],optionData:[{value:"w01019",label:"高锰酸盐"},{value:"w21003",label:"氨氮"},{value:"w21011",label:"总磷"},{value:"w21001",label:"总氮"}],tableData:[],tableHead:[],stationId:"",stationName:"",currentPage:1,pageSize:10,totalRecords:0,pageList:[10,15,20],chartList:[],fieldList:[],headPropList:["value","standardSamplesValue","absoluteError","qualification","lastValue","spanValue","relativeError","lastQualification"],count:"",qualifiedCount:"",noQualifiedCount:""}},computed:{totalPage:function(){var t;return 0===(t=Math.ceil(this.totalRecords/this.pageSize))?1:t},stationInfo:{get:function(){return this.$store.state.stationInfo}}},methods:{createdChart:function(){for(var t=0;t<this.chartList.length;t++){var e=this.$echarts.init(document.getElementById("zeroDrift"+t)),a={title:{text:"24小时"+this.chartList[t].name+"零点漂移历史数据",x:"center",y:20},xAxis:{type:"category",name:"时间",data:this.chartList[t].xAxis},legend:{data:[this.chartList[t].name],bottom:0},yAxis:{type:"value",name:"相对误差(%)"},visualMap:{top:10,right:-100,pieces:[{gte:-5,lte:5,color:"#009966",label:"合格"},{gt:5,color:"#d68787",label:"不合格"}],outOfRange:{color:"#d68787"}},grid:{top:80,left:80,bottom:50,right:70},series:[{data:this.chartList[t].yAxis,name:this.chartList[t].name,type:"line",symbol:"triangle",symbolSize:20,lineStyle:{normal:{color:"#008000",width:4,type:"dashed"}},itemStyle:{normal:{borderWidth:3,color:"#0ec15a"}},markLine:{lineStyle:{color:"red",type:"solid"},data:[{yAxis:this.chartList[t].upper,name:"最大误差"},{yAxis:this.chartList[t].lower,name:"最小误差"}]}}]};e.setOption(a)}},toggleTab:function(t){var e=this;"2"===t&&setTimeout(function(){e.createdChart()},500)},paginationChange:function(t){this.currentPage=t,this.searchZeroDrift()},paginationSizeChange:function(t){this.pageSize=t,this.searchZeroDrift()},searchDate:function(){this.searchZeroDrift(),this.searchZeroDriftChart()},searchZeroDrift:function(){var t=this;this.$http.get("/Quality/testData/zeroDriftData",{params:{startTime:this.dateRange[0],endTime:this.dateRange[1],indexCodes:this.value.join(","),stationCodes:this.stationId,ifCurrentSection:!0,pageNumber:this.currentPage,pageSize:this.pageSize}}).then(function(e){t.tableHead=[],t.fieldList=["time"],0===e.data.code&&(t.value.forEach(function(e,a){for(var i=0;i<t.optionData.length;i++)if(e===t.optionData[i].value){t.tableHead.push(t.optionData[i]);break}t.headPropList.forEach(function(a,i){t.fieldList.push(e+a)})}),t.tableData=e.data.content.dataList,t.count=e.data.content.count,t.qualifiedCount=e.data.content.qualifiedCount,t.noQualifiedCount=e.data.content.noQualifiedCount,t.totalRecords=e.data.content.totalRecords,t.loading=!1)}).catch(function(t){})},searchZeroDriftChart:function(){var t=this;this.$http.get("/Quality/testData/zeroDriftChartData",{params:{startTime:this.dateRange[0],endTime:this.dateRange[1],ifCurrentSection:!0,indexCodes:this.value.join(","),stationCodes:this.stationId}}).then(function(e){0===e.data.code&&(t.chartList=e.data.content.dataList)}).catch(function(t){})},setChartId:function(t){return"zeroDrift"+t},setTableDate:function(t){for(var e in t)return t[e].time},exportExcel:function(){var t=this.$refs.table.$el.querySelector(".el-table__header"),e=this.stationName+"24小时零点漂移",a={headerProp:this.fieldList.join(","),startTime:this.dateRange[0],endTime:this.dateRange[1],indexCodes:this.value.join(","),stationCodes:this.stationId,tableType:"ZERO_DRIFT_DATA",ifCurrentSection:!0,pattern:"yyyy-MM-dd HH:mm:ss"};Object(i.a)(t,e,"","1","/Quality/exports/qualityControlExcel",a)}},mounted:function(){},created:function(){var t=(new Date).setDate((new Date).getDate()-3),e=new Date;this.dateRange=[new Date(t).format("yyyy-MM-dd hh:00:00"),e.format("yyyy-MM-dd hh:00:00")]},watch:{stationInfo:function(t){t.length>0&&(this.stationId=t[0].nodeId,this.stationName=t[0].nodeName,this.searchZeroDrift(),this.searchZeroDriftChart())}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"zero-drift tapStyle secondary-page-mode"},[a("div",{staticClass:"secondary-toolbar"},[a("span",[t._v("时间选择 : ")]),t._v(" "),a("div",{staticClass:"layoutBox",staticStyle:{width:"380px"}},[a("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"开始日期",format:"yyyy-MM-dd HH:00:00","value-format":"yyyy-MM-dd HH:00:00","end-placeholder":"结束日期"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),t._v("  \n    "),a("span",[t._v("监测项目 : ")]),t._v(" "),a("div",{staticClass:"layoutBox",staticStyle:{width:"190px"}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.optionData,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v("  \n    "),a("el-button",{on:{click:function(e){return t.searchDate()}}},[a("i",{staticClass:"iconfont icon-sousuo"}),t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"delet"},on:{click:function(e){return t.exportExcel()}}},[a("i",{staticClass:"iconfont icon-daochu"}),t._v("导出")])],1),t._v(" "),a("div",{staticClass:"currency-mode-wrap"},[a("div",{staticClass:"reminder-wrap"},[a("span",{staticClass:"reminder-title"},[t._v("温馨提示")]),t._v(" "),a("div",{staticClass:"reminder-content"},[a("div",{staticClass:"reminder-text"},[a("p",[t._v("所选时间段内共有”24小时零点漂移“"+t._s(t.count)+"次，共有合格项"+t._s(t.qualifiedCount)+"个，不合格项"+t._s(t.noQualifiedCount)+"个。")]),t._v(" "),a("div",[a("el-button",{attrs:{type:"noticonsecondBtn"}},[t._v(" 生成任务 ")])],1)])]),t._v(" "),a("div",{staticClass:"reminder-toolbar"},[t._m(0),t._v(" "),a("div",{staticClass:"state-radio-wrap"},[a("el-radio-group",{attrs:{size:"small"},on:{change:t.toggleTab},model:{value:t.stateRadio,callback:function(e){t.stateRadio=e},expression:"stateRadio"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("列表")]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[t._v("图表")])],1)],1)])]),t._v(" "),a("div",{staticClass:"currency-body-toggle"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===t.stateRadio,expression:"stateRadio === '1'"}],staticStyle:{height:"100%"}},[a("div",{staticClass:"tablebox",staticStyle:{height:"calc(100% - 34px)"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",attrs:{data:t.tableData,height:"100%"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",label:"日期",width:"182"}}),t._v(" "),t._l(t.tableHead,function(e,i){return a("el-table-column",{key:i,attrs:{label:e.label}},[a("el-table-column",{attrs:{prop:e.value+"value",label:"测试结果",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"零点核查"}},[a("el-table-column",{attrs:{prop:e.value+"standardSamplesValue",width:"90",label:"标准样浓度"}}),t._v(" "),a("el-table-column",{attrs:{prop:e.value+"absoluteError",label:"绝对误差"}}),t._v(" "),a("el-table-column",{attrs:{prop:e.value+"qualification",label:"合格情况"}})],1),t._v(" "),a("el-table-column",{attrs:{label:"24小时零点漂移"}},[a("el-table-column",{attrs:{prop:e.value+"lastValue",width:"118",label:"前一次测试结果"}}),t._v(" "),a("el-table-column",{attrs:{prop:e.value+"spanValue",label:"跨度值"}}),t._v(" "),a("el-table-column",{attrs:{prop:e.value+"relativeError",width:"108",label:"相对误差(%)"}}),t._v(" "),a("el-table-column",{attrs:{prop:e.value+"lastQualification",label:"合格情况"}})],1)],1)})],2)],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,background:"",small:!0,"popper-class":"select-common-option","page-sizes":t.pageList,layout:"total,sizes,slot,->,prev, pager, next, jumper",total:t.totalRecords},on:{"size-change":t.paginationSizeChange,"current-change":t.paginationChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}},[a("span",{staticClass:"el-pagination__current"},[t._v("当前第"+t._s(t.currentPage)+"/"+t._s(t.totalPage)+"页")])])],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"===t.stateRadio,expression:"stateRadio === '2'"}],staticClass:"chart-wrap",staticStyle:{height:"100%"}},[a("el-scrollbar",{staticStyle:{height:"100%"}},["2"===t.stateRadio?a("div",t._l(t.chartList,function(e,i){return a("div",{key:"k"+i,staticStyle:{height:"300px"},attrs:{id:t.setChartId(i)}})}),0):t._e()])],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-legend"},[e("span",[e("i",{staticClass:"qualified-icon"}),this._v(" 合格")]),this._v(" "),e("span",[e("i",{staticClass:"unqualified-icon"}),this._v(" 不合格")])])}]};var l=a("VU/8")(n,s,!1,function(t){a("vNAj")},"data-v-5d17cda0",null);e.default=l.exports},vNAj:function(t,e){}});
//# sourceMappingURL=67.eb965d50766d5c19b17c.js.map