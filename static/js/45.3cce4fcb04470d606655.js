webpackJsonp([45],{"8Qak":function(t,a){},KwRJ:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i,s=e("bOdI"),n=e.n(s),o=e("V+i5"),r={shortcuts:[{text:"最近一周",onClick:function(t){var a=new Date,e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",[e,a])}},{text:"最近一个月",onClick:function(t){var a=new Date,e=new Date;e.setTime(e.getTime()-2592e6),t.$emit("pick",[e,a])}},{text:"最近三个月",onClick:function(t){var a=new Date,e=new Date;e.setTime(e.getTime()-7776e6),t.$emit("pick",[e,a])}}]},l=[{name:"日",type:"day"},{name:"月",type:"month"},{name:"年",type:"year"},{name:"自定义",type:"custom"}],d=(i={name:"comparisonAnalysisRates",watch:{},data:function(){return{loadingOne:!0,loadingTwo:!0,loadingThree:!0,loadingFour:!0,pickerOptions:r,dataTypeList:l,dataType:0,dataValue:"",custom:!1,tableData:[],rankingHistogram:"",uploadRateYear:"",uploadRateRatio:"",uploadfiestdiscrib:"--",stationId:"",openPage:"",timeType:"day"}},methods:n()({dataTypeToggle:function(t,a){this.dataType=t,"custom"===a.type?(this.timeType="day",this.custom=!1):(this.custom=!0,this.dataValue="");var e=a.type;if("month"==e){this.timeType="month";var i=new Date,s=[],n=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();s.push(this.formatStrToDate(Object(o.a)(i,"yyyy-MM-01 00:00:00")),this.formatStrToDate(Object(o.a)(new Date(i.getTime()+864e5*n),"yyyy-MM-01 00:00:00"))),this.dataValue=s}else if("year"==e){this.timeType="year";i=new Date;(s=[]).push(this.formatStrToDate(Object(o.a)(i,"yyyy-01-01 00:00:00")),this.formatStrToDate(Object(o.a)(new Date(i.getTime()+31536e6),"yyyy-01-01 00:00:00"))),this.dataValue=s}else if("day"==e){this.timeType="day";i=new Date;(s=[]).push(this.formatStrToDate(Object(o.a)(i,"yyyy-MM-dd 00:00:00")),this.formatStrToDate(Object(o.a)(new Date(i.getTime()+864e5),"yyyy-MM-dd 00:00:00"))),this.dataValue=s}},formatStrToDate:function(t){if(t){var a=t.split(" ")[0].split("-");return new Date(a[0],a[1]-1,a[2])}},initTime:function(){var t=new Date,a=[];a.push(this.formatStrToDate(Object(o.a)(t,"yyyy-MM-dd 00:00:00")),this.formatStrToDate(Object(o.a)(new Date(t.getTime()+864e5),"yyyy-MM-dd 00:00:00"))),this.dataValue=a},setRankingCls:function(t){var a="";switch(parseInt(t)){case 1:a="first-ranking";break;case 2:a="second-ranking";break;case 3:a="third-ranking"}return a},searchData:function(){this.rateRankLoading=!0,this.rateRankNoDataState=!1,this.uploadRateLoading=!0,this.uploadRateNoDataState=!1,this.rateYearLoading=!0,this.rateYearNoDataState=!1,this.ringRatioLoading=!0,this.ringRatioNoDataState=!1,this.waterQualityGradeChart(),this.searchRanking(),this.uploadRateYearChart(),this.uploadRateRingRatio()},searchRanking:function(){var t=this;this.loadingTwo=!0;var a=Object(o.a)(this.dataValue[0],"yyyy-MM-dd hh:mm:ss"),e=Object(o.a)(this.dataValue[1],"yyyy-MM-dd hh:mm:ss"),i={};i.timeType=this.timeType,i.startTime=a,i.endTime=e,i.queryCode=this.stationId,i.queryType=this.openPage,this.$http.get("/StatisticsAndAlarm/twoRateComparison/uploadRateReports",{params:i}).then(function(a){t.loadingTwo=!1;var e=a.data;if(0===e.code){for(var i=e.content.dataList,s=[],n=0;n<i.length;n++)s.push({ranking:n+1+"",name:i[n].name,uploadRate:i[n].rate+"%"});t.uploadfiestdiscrib=e.content.info.message,t.tableData=s}}).catch(function(t){})},waterQualityGradeChart:function(){var t=this;this.loadingOne=!0;var a=Object(o.a)(this.dataValue[0],"yyyy-MM-dd hh:mm:ss"),e=Object(o.a)(this.dataValue[1],"yyyy-MM-dd hh:mm:ss"),i={};i.timeType=this.timeType,i.startTime=a,i.endTime=e,i.queryCode=this.stationId,i.queryType=this.openPage,this.$http.get("/StatisticsAndAlarm/twoRateComparison/uploadRateBars",{params:i}).then(function(a){t.loadingOne=!1;var e=a.data;if(0===e.code){var i=e.content.info;t.rankingHistogram=t.$echarts.init(document.getElementById("upload-rate-ranking"));var s={title:{text:"上传率排名柱状图",textStyle:{fontSize:16},x:"center",y:10},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:56,left:20,right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:i.xAxis,axisTick:{show:!1},axisLine:{lineStyle:{color:"#c6d1de"}},axisLabel:{color:"#999"},splitLine:{show:!0}}],yAxis:[{type:"value",splitNumber:5,max:100,axisTick:{show:!1},axisLine:{lineStyle:{color:"#c6d1de"}},axisLabel:{color:"#999"},splitLine:{show:!0}}],series:[{name:"上传率",type:"bar",data:i.series[0].data,barWidth:20,label:{show:!0,position:"top",formatter:"{c}%"},itemStyle:{color:function(t){return t.dataIndex<3?"#24c768":"#00a1e4"}}}]};t.rankingHistogram.setOption(s)}t.rateRankLoading=!1}).catch(function(t){})},uploadRateYearChart:function(){var t=this;this.loadingThree=!0;var a=Object(o.a)(this.dataValue[0],"yyyy-MM-dd hh:mm:ss"),e=Object(o.a)(this.dataValue[1],"yyyy-MM-dd hh:mm:ss"),i={};i.timeType=this.timeType,i.startTime=a,i.endTime=e,i.queryCode=this.stationId,i.queryType=this.openPage,i.compareType="H",this.$http.get("/StatisticsAndAlarm/twoRateComparison/uploadRateYoY",{params:i}).then(function(a){t.loadingThree=!1;var e=a.data;if(0===e.code){var i=e.content.info;t.uploadRateYear=t.$echarts.init(document.getElementById("upload-rate-year"));var s={color:["#00a1e4","#e5ce10","#ff0000"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:[{name:i.series[0].name,icon:"rect"},{name:i.series[1].name,icon:"rect"},"同比增长率"],bottom:10},grid:{top:26,left:20,right:"4%",bottom:40,containLabel:!0},xAxis:[{type:"category",data:i.xAxis,axisTick:{show:!1},axisLine:{lineStyle:{color:"#c6d1de"}},axisLabel:{color:"#999"},splitLine:{show:!0}}],yAxis:[{type:"value",splitNumber:5,axisTick:{show:!1},axisLine:{lineStyle:{color:"#c6d1de"}},axisLabel:{color:"#999"},splitLine:{show:!0}},{type:"value",splitNumber:5,axisTick:{show:!1},axisLine:{lineStyle:{color:"#c6d1de"}},axisLabel:{show:!1,color:"#999"},splitLine:{show:!0}}],series:[{name:i.series[0].name,type:"bar",data:i.series[0].data,barWidth:20},{name:i.series[1].name,type:"bar",data:i.series[1].data,barWidth:20},{name:"同比增长率",type:"line",yAxisIndex:1,symbolSize:10,data:i.series[2].data,label:{show:!0,formatter:"{c}%"}}]};t.uploadRateYear.setOption(s)}}).catch(function(t){})},uploadRateRingRatio:function(){var t=this;this.loadingFour=!0;var a=Object(o.a)(this.dataValue[0],"yyyy-MM-dd hh:mm:ss"),e=Object(o.a)(this.dataValue[1],"yyyy-MM-dd hh:mm:ss"),i={};i.timeType=this.timeType,i.startTime=a,i.endTime=e,i.queryCode=this.stationId,i.queryType=this.openPage,i.compareType="",this.$http.get("/StatisticsAndAlarm/twoRateComparison/uploadRateYoY",{params:i}).then(function(a){t.loadingFour=!1;var e=a.data;if(0===e.code){var i=e.content.info;t.uploadRateRatio=t.$echarts.init(document.getElementById("upload-rate-ring-ratio"));var s={color:["#00a1e4","#e5ce10","#ff0000"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:[{name:i.series[0].name,icon:"rect"},{name:i.series[1].name,icon:"rect"},"环比增长率"],bottom:10},grid:{top:26,left:20,right:"4%",bottom:40,containLabel:!0},xAxis:[{type:"category",data:i.xAxis,axisTick:{show:!1},axisLine:{lineStyle:{color:"#c6d1de"}},axisLabel:{color:"#999"},splitLine:{show:!0}}],yAxis:[{type:"value",splitNumber:5,axisTick:{show:!1},axisLine:{lineStyle:{color:"#c6d1de"}},axisLabel:{color:"#999"},splitLine:{show:!0}},{type:"value",splitNumber:5,axisTick:{show:!1},axisLine:{lineStyle:{color:"#c6d1de"}},axisLabel:{show:!1,color:"#999"},splitLine:{show:!0}}],series:[{name:i.series[0].name,type:"bar",data:i.series[0].data,barWidth:20},{name:i.series[1].name,type:"bar",data:i.series[1].data,barWidth:20},{name:"环比增长率",type:"line",yAxisIndex:1,symbolSize:10,data:i.series[2].data,label:{show:!0,formatter:"{c}%"}}]};t.uploadRateRatio.setOption(s)}}).catch(function(t){})}},"searchData",function(){this.waterQualityGradeChart(),this.searchRanking(),this.uploadRateYearChart(),this.uploadRateRingRatio()}),mounted:function(){},created:function(){this.initTime()}},n()(i,"watch",{stationInfo:function(t){t.length>0&&(this.stationId=t[0].nodeId,this.openPage=t[0].nodeType,this.searchData())}}),n()(i,"computed",{stationInfo:{get:function(){return this.$store.state.strictlyinfo}}}),i),c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"comparison-analysis-rates-page"},[e("div",{staticClass:"secondary-page-content"},[e("el-scrollbar",{staticClass:"page-content-scroll"},[e("div",{staticClass:"secondary-scroll-content clear"},[e("div",{staticClass:"secondary-toolbar"},[e("span",[t._v("时间段：")]),t._v(" "),e("el-button-group",t._l(t.dataTypeList,function(a,i){return e("el-button",{key:i,class:{active:t.dataType===i},attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){return t.dataTypeToggle(i,a)}}},[t._v(t._s(a.name))])}),1),t._v(" "),e("div",{staticClass:"layoutBox",staticStyle:{width:"242px"}},[e("el-date-picker",{attrs:{type:"daterange",align:"left","unlink-panels":"","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1,format:"yyyy-MM-dd","prefix-icon":"el-icon-date",disabled:t.custom,"picker-options":t.pickerOptions},model:{value:t.dataValue,callback:function(a){t.dataValue=a},expression:"dataValue"}})],1),t._v(" \n          "),e("el-button",{on:{click:t.searchData}},[e("i",{staticClass:"iconfont icon-sousuo"}),t._v("查询")])],1),t._v(" "),e("div",{staticClass:"currency-mode-wrap"},[e("h4",{staticClass:"currency-mode-title"},[e("i",{staticClass:"mode-title-icon"}),t._v(" 数据上传率\n            "),e("span",{staticClass:"mode-title-line"})]),t._v(" "),e("div",{staticClass:"secondary-mode-content clear"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingOne,expression:"loadingOne"}],staticClass:"data-upload-rate-chart",attrs:{"element-loading-text":"加载中","element-loading-spinner":"loading-type-a","element-loading-background":"rgba(255, 255, 255, 1)"}},[e("div",{attrs:{id:"upload-rate-ranking"}})]),t._v(" "),e("div",{staticClass:"data-upload-rate-table"},[e("h4",{staticClass:"contrast-title"},[t._v("上传率排名列表")]),t._v(" "),e("div",{staticClass:"upload-rate-table-wrap"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTwo,expression:"loadingTwo"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",height:"251px","element-loading-text":"加载中","element-loading-spinner":"loading-type-a","element-loading-background":"rgba(255, 255, 255, 1)"}},[e("el-table-column",{attrs:{prop:"ranking",label:"排名",align:"center",width:"50"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"ranking-icon",class:t.setRankingCls(a.row.ranking)},[t._v(t._s(a.row.ranking))])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"name",label:"站点名称"}}),t._v(" "),e("el-table-column",{attrs:{prop:"uploadRate",label:"上传率",width:"100"}})],1)],1)]),t._v(" "),e("p",{staticClass:"data-upload-analysis"},[e("span",{staticClass:"upload-analysis-text"},[t._v("经统计分析：")]),t._v(" "),e("span",[t._v(t._s(t.uploadfiestdiscrib))]),t._v("  \n            ")])])]),t._v(" "),e("div",{staticClass:"currency-mode-wrap year-on-year-modular"},[e("h4",{staticClass:"currency-mode-title"},[e("i",{staticClass:"mode-title-icon"}),t._v(" 上传率同比\n            "),e("span",{staticClass:"mode-title-line"})]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingThree,expression:"loadingThree"}],staticClass:"secondary-mode-content",attrs:{"element-loading-text":"加载中","element-loading-spinner":"loading-type-a","element-loading-background":"rgba(255, 255, 255, 1)"}},[e("div",{attrs:{id:"upload-rate-year"}})])]),t._v(" "),e("div",{staticClass:"currency-mode-wrap loop-ratio-module-modular"},[e("h4",{staticClass:"currency-mode-title"},[e("i",{staticClass:"mode-title-icon"}),t._v(" 上传率环比\n            "),e("span",{staticClass:"mode-title-line"})]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFour,expression:"loadingFour"}],staticClass:"secondary-mode-content",attrs:{"element-loading-text":"加载中","element-loading-spinner":"loading-type-a","element-loading-background":"rgba(255, 255, 255, 1)"}},[e("div",{attrs:{id:"upload-rate-ring-ratio"}})])])])])],1)])},staticRenderFns:[]};var p=e("VU/8")(d,c,!1,function(t){e("8Qak")},"data-v-913a6bc2",null);a.default=p.exports}});
//# sourceMappingURL=45.3cce4fcb04470d606655.js.map