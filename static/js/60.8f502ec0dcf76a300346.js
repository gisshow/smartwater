webpackJsonp([60],{"H/lU":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"",data:function(){return{value:"",searchModel:"",tableData:[],visiDialog:!1,vTitle:"用户新增",optionDataRole:[],formData:{userName:"",password:"",userAccount:"",role:"",email:"",phonenb:""},rules:{userName:[{required:!0,message:"请输入用户名称",trigger:"blur"}],userAccount:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:25,message:"长度在 3 到 25 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入用户密码",trigger:"blur"},{min:6,max:25,message:"长度在 6 到 25 个字符",trigger:"blur"}],role:[{required:!0,message:"请选择所属角色",trigger:"change"}]},isEditor:!1,currentPage:1,total:0,pageSize:10,pageList:[10,15,20],userId:"",loading:!0}},inject:["globelDelet"],created:function(){this.getRole(),this.getList()},mounted:function(){},methods:{selectChange:function(e,t){var a=e;for(var s in this.userId="",a)this.userId+=a[s].userId+",";this.userId=this.userId.substring(0,this.userId.length-1)},paginationSizeChange:function(e){this.pageSize=e,this.getList()},paginationChange:function(e){this.currentPage=e,this.getList()},add:function(){this.visiDialog=!0,this.isEditor=!1},delet:function(e){this.globelDelet("/AuthorityManagement/users/ids",e,this.getList)},allDelet:function(){this.globelDelet("/AuthorityManagement/users/ids",this.userId,this.getList)},submit:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;if(t.isEditor){var s=new FormData;s.append("userName",t.formData.userName),s.append("password",t.formData.password),s.append("userAccount",t.formData.userAccount),s.append("role.roleId",t.formData.role),s.append("email",t.formData.email),s.append("phonenb",t.formData.phonenb),s.append("userId",t.userId),s.append("sex",1),t.$http.put("AuthorityManagement/users/",s).then(function(a){0==a.data.code&&(t.resetForm(e),t.visiDialog=!1,t.getList(),t.$message({message:a.data.message,type:"success",duration:1e3}))})}else{var o=new FormData;o.append("userName",t.formData.userName),o.append("password",t.formData.password),o.append("userAccount",t.formData.userAccount),o.append("role.roleId",t.formData.role),o.append("email",t.formData.email),o.append("phonenb",t.formData.phonenb),o.append("sex",1),t.$http.post("AuthorityManagement/users",o).then(function(a){0==a.data.code&&(t.resetForm(e),t.visiDialog=!1,t.getList(),t.$message({message:a.data.message,type:"success",duration:1e3}))})}})},cancel:function(e){this.visiDialog=!1,this.resetForm(e)},closess:function(e){e(),this.resetForm("ruleForm")},revise:function(e){this.isEditor=!0,this.visiDialog=!0,this.formData.userName=e.userName,this.formData.password=e.password,this.formData.userAccount=e.userAccount,e.role&&(this.formData.role=e.role.roleId),this.formData.email=e.email,this.formData.phonenb=e.phonenb,this.userId=e.userId,console.log(this.userId)},resetForm:function(e){this.$refs[e].resetFields(),this.formData.userName="",this.formData.password="",this.formData.userAccount="",this.formData.role="",this.formData.email="",this.formData.phonenb="",this.userId=""},getRole:function(){var e=this;this.$http.get("AuthorityManagement/roles").then(function(t){e.optionDataRole=t.data.content.dataList})},getList:function(){var e=this;this.loading=!0,this.$http.get("AuthorityManagement/users",{params:{pageSize:this.pageSize,pageNo:this.currentPage,userName:this.searchModel}}).then(function(t){e.tableData=t.data.content.dataList,e.total=t.data.content.totalRecords,e.loading=!1})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"trafficpage secondary-page-mode"},[a("div",{staticClass:"secondary-toolbar"},[a("span",[e._v("关键字 : ")]),e._v(" "),a("div",{staticClass:"layoutBox",staticStyle:{width:"220px"}},[a("el-input",{attrs:{placeholder:"请输入用户名称"},model:{value:e.searchModel,callback:function(t){e.searchModel=t},expression:"searchModel"}})],1),e._v("  \n         "),a("el-button",{on:{click:e.getList}},[a("i",{staticClass:"iconfont icon-sousuo"}),e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.add}},[a("i",{staticClass:"iconfont icon-tianjia"}),e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"delet"},on:{click:e.allDelet}},[a("i",{staticClass:"iconfont icon-shanchu"}),e._v("批量删除")])],1),e._v(" "),a("div",{staticClass:"currency-mode-wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.tableData,height:"calc(100% - 30px)","element-loading-text":"加载中","element-loading-spinner":"loading-type-a","element-loading-background":"rgba(255, 255, 255, 1)"},on:{"selection-change":e.selectChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userAccount",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phonenb",label:"电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),e._v(" "),a("el-table-column",{attrs:{prop:"role",label:"所属角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.role?a("div",[e._v("\n                           "+e._s(t.row.role.roleName)+"\n                        ")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-button",{attrs:{type:"secondBtn"},on:{click:function(a){return e.revise(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"secondBtn"},on:{click:function(a){return e.delet(t.row.userId)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"table-pagination-wrap"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"popper-class":"select-pagination-option",background:"",small:!0,"page-sizes":e.pageList,layout:"total, sizes, slot,->,prev, pager, next, jumper",total:e.total},on:{"size-change":e.paginationSizeChange,"current-change":e.paginationChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}},scopedSlots:e._u([{key:"default",fn:function(){return[a("span",{staticClass:"el-pagination__current"},[e._v("当前第"+e._s(e.currentPage)+"/"+e._s(e.totalPageNumber)+"页")])]},proxy:!0}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.visiDialog,width:"920px",title:e.vTitle,"before-close":e.closess},on:{"update:visible":function(t){e.visiDialog=t}}},[a("div",{staticClass:"dialogcontent"},[a("el-form",{ref:"ruleForm",attrs:{model:e.formData,rules:e.rules}},[a("table",{staticClass:"whTable"},[a("tr",[a("td",{attrs:{width:"16.5%"}},[a("span",{staticClass:"rCode"},[e._v("账号名")])]),e._v(" "),a("td",[a("el-form-item",{attrs:{prop:"userAccount"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formData.userAccount,callback:function(t){e.$set(e.formData,"userAccount",t)},expression:"formData.userAccount"}})],1)],1),e._v(" "),a("td",{attrs:{width:"16.5%"}},[a("span",{staticClass:"rCode"},[e._v("用户密码")])]),e._v(" "),a("td",[a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1)],1)]),e._v(" "),a("tr",[a("td",{attrs:{width:"16.5%"}},[a("span",{staticClass:"rCode"},[e._v("用户名称")])]),e._v(" "),a("td",[a("el-form-item",{attrs:{prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formData.userName,callback:function(t){e.$set(e.formData,"userName",t)},expression:"formData.userName"}})],1)],1),e._v(" "),a("td",{attrs:{width:"16.5%"}},[a("span",[e._v("所属角色")])]),e._v(" "),a("td",[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-form-item",{attrs:{prop:"role"}},[a("el-select",{attrs:{"collapse-tags":"",placeholder:"请选择"},model:{value:e.formData.role,callback:function(t){e.$set(e.formData,"role",t)},expression:"formData.role"}},e._l(e.optionDataRole,function(e){return a("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})}),1)],1)],1)])]),e._v(" "),a("tr",[a("td",{attrs:{width:"16.5%"}},[a("span",[e._v("邮箱")])]),e._v(" "),a("td",[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}})],1)]),e._v(" "),a("td",{attrs:{width:"16.5%"}},[a("span",[e._v("电话")])]),e._v(" "),a("td",[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formData.phonenb,callback:function(t){e.$set(e.formData,"phonenb",t)},expression:"formData.phonenb"}})],1)])])])])],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.submit("ruleForm")}}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"noticonsecondBtn"},on:{click:function(t){return e.cancel("ruleForm")}}},[e._v("取消")])],1)])],1)},staticRenderFns:[]};var r=a("VU/8")(s,o,!1,function(e){a("mqU3")},"data-v-6a0f4e32",null);t.default=r.exports},mqU3:function(e,t){}});
//# sourceMappingURL=60.8f502ec0dcf76a300346.js.map