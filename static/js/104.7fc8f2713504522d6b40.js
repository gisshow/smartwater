webpackJsonp([104],{"19F2":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("dwSH"),s={name:"logParam",data:function(){return{dateRange:"",stateRadio:1,tabActive:1,logType:"",currentPage:1,pageSize:10,pageList:[5,10,15],totalRecords:0,currentPageB:1,pageSizeB:10,totalRecordsB:0,pageListB:[10,15,20],currentPageC:1,pageSizeC:10,totalRecordsC:0,pageListC:[10,15,20],tableData:[],tableData2:[],tableData3:[],stationId:"",stationName:""}},computed:{totalPage:function(){var t;return 0===(t=Math.ceil(this.totalRecords/this.pageSize))?1:t},totalPageB:function(){var t;return 0===(t=Math.ceil(this.totalRecordsB/this.pageSizeB))?1:t},totalPageC:function(){var t;return 0===(t=Math.ceil(this.totalRecordsC/this.pageSizeC))?1:t},stationInfo:{get:function(){return this.$store.state.stationInfo}}},methods:{toggleTab:function(t){this.setLogType()},setLogType:function(){var t=this.stateRadio,e=this.tabActive;1===e&&1===t?this.logType="ONLINE_MONITOR_LOG":1===e&&2===t?this.logType="ONLINE_MONITOR_STATUS":1===e&&3===t?this.logType="ONLINE_MONITOR_PARAM":2===e&&1===t?this.logType="DATA_GATHER_LOG":2===e&&2===t?this.logType="DATA_GATHER_STATUS":2===e&&3===t?this.logType="AS":3===e&&1===t?this.logType="AD":3===e&&2===t?this.logType="AF":3===e&&3===t&&(this.logType="AG"),this.getStatusData()},paginationChange:function(t){1===this.tabActive?this.currentPage=t:2===this.tabActive?this.currentPageB=t:3===this.tabActive&&(this.currentPageC=t),this.getStatusData()},paginationSizeChange:function(t){1===this.tabActive?this.pageSize=t:2===this.tabActive?this.pageSizeB=t:3===this.tabActive&&(this.pageSizeC=t),this.getStatusData()},getStatusData:function(){var t=this,e="",a="";1===this.tabActive?(e=this.currentPage,a=this.pageSize):2===this.tabActive?(e=this.currentPageB,a=this.pageSizeB):3===this.tabActive&&(e=this.currentPageC,a=this.pageSizeC),this.$http.get("/Quality/CQtestData/logStatusData",{params:{beginTime:this.dateRange[0].format("yyyy-MM-dd hh:mm:ss"),endTime:this.dateRange[1].format("yyyy-MM-dd hh:mm:ss"),logType:this.logType,mn:this.stationId,pageNumber:e,pageSize:a}}).then(function(e){0===e.data.code&&(1===t.tabActive?e.data.content?(t.tableData=e.data.content.dataList,t.totalRecords=e.data.content.totalRecords):(t.tableData=[],t.totalRecords=0):2===t.tabActive?e.data.content?(t.tableData2=e.data.content.dataList,t.totalRecordsB=e.data.content.totalRecords):(t.tableData2=[],t.totalRecordsB=0):3===t.tabActive&&(e.data.content?(t.tableData3=e.data.content.dataList,t.totalRecordsC=e.data.content.totalRecords):(t.tableData3=[],t.totalRecordsC=0)))}).catch(function(t){})},exportExcel:function(){var t="",e="",a="";switch(this.tabActive){case 1:t=this.$refs.tableA,e=this.stationName+"分析仪日志及状态量参数",a="dataTime,codeName,name,describe";break;case 2:t=this.$refs.tableB,e=this.stationName+" 工控机(数采仪) 日志及状态量参数",a="dataTime,name,describe";break;case 3:t=this.$refs.tableC,e=this.stationName+"辅助设备日志及状态量参数",a="date,name,describe"}var s=t.$el.querySelector(".el-table__header"),n={headerProp:a,startTime:this.dateRange[0].format("yyyy-MM-dd hh:mm:ss"),endTime:this.dateRange[1].format("yyyy-MM-dd hh:mm:ss"),logType:this.logType,stationCodes:this.stationId,tableType:"LOG_STATUS_DATA",pattern:"yyyy-MM-dd HH:mm:ss"};Object(i.a)(s,e,"","1","/Quality/exports/qualityControlExcel",n)}},mounted:function(){},created:function(){this.$store.commit("setShowlefttree",!0),this.dateRange=[new Date((new Date).setDate((new Date).getDate()-10)),new Date]},watch:{stationInfo:function(t){t.length>0&&(this.stationId=t[0].nodeId,this.stationName=t[0].nodeName,this.setLogType())},logType:function(t){}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"logParam tapStyle secondary-page-mode"},[a("div",{staticClass:"secondary-toolbar"},[a("span",[t._v("时间选择 : ")]),t._v(" "),a("div",{staticClass:"layoutBox",staticStyle:{width:"242px"}},[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),t._v(" \n    "),a("div",{staticClass:"state-radio-wrap"},[a("el-radio-group",{attrs:{size:"small"},on:{change:function(e){return t.setLogType()}},model:{value:t.stateRadio,callback:function(e){t.stateRadio=e},expression:"stateRadio"}},[a("el-radio-button",{attrs:{label:1}},[t._v("日志")]),t._v(" "),a("el-radio-button",{attrs:{label:2}},[t._v("状态")]),t._v(" "),a("el-radio-button",{attrs:{label:3}},[t._v("参数")])],1)],1),t._v(" \n    "),a("el-button",{on:{click:function(e){return t.setLogType()}}},[a("i",{staticClass:"iconfont icon-sousuo"}),t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"delet"},on:{click:function(e){return t.exportExcel()}}},[a("i",{staticClass:"iconfont icon-daochu"}),t._v("导出")])],1),t._v(" "),a("div",{staticClass:"currency-mode-wrap"},[a("yf-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.toggleTab},model:{value:t.tabActive,callback:function(e){t.tabActive=e},expression:"tabActive"}},[a("yf-tab-pane",{attrs:{name:1,label:"分析仪"}},[a("div",{staticClass:"tablebox",staticStyle:{height:"calc(100% - 35px)"}},[a("el-table",{ref:"tableA",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",height:"100%"}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dataTime",label:"时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"codeName",label:"因子名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"describe",label:"描述"}})],1)],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,background:"",small:!0,"popper-class":"select-common-option","page-sizes":t.pageList,layout:"total,sizes,slot,->,prev, pager, next, jumper",total:t.totalRecords},on:{"size-change":t.paginationSizeChange,"current-change":t.paginationChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}},[a("span",{staticClass:"el-pagination__current"},[t._v("当前第"+t._s(t.currentPage)+"/"+t._s(t.totalPage)+"页")])])],1)]),t._v(" "),a("yf-tab-pane",{attrs:{name:2,label:"工控机/数采仪"}},[a("div",{staticClass:"tablebox",staticStyle:{height:"calc(100% - 35px)"}},[a("el-table",{ref:"tableB",staticStyle:{width:"100%"},attrs:{data:t.tableData2,border:"",height:"100%"}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dataTime",label:"时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"describe",label:"描述"}})],1)],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("el-pagination",{attrs:{"current-page":t.currentPageB,"page-size":t.pageSizeB,background:"",small:!0,"popper-class":"select-common-option","page-sizes":t.pageListB,layout:"total,sizes,slot,->,prev, pager, next, jumper",total:t.totalRecordsB},on:{"size-change":t.paginationSizeChange,"current-change":t.paginationChange,"update:currentPage":function(e){t.currentPageB=e},"update:current-page":function(e){t.currentPageB=e}}},[a("span",{staticClass:"el-pagination__current"},[t._v("当前第"+t._s(t.currentPageB)+"/"+t._s(t.totalPageB)+"页")])])],1)]),t._v(" "),a("yf-tab-pane",{attrs:{name:3,label:"辅助设备"}},[a("div",{staticClass:"tablebox",staticStyle:{height:"calc(100% - 35px)"}},[a("el-table",{ref:"tableC",staticStyle:{width:"100%"},attrs:{data:t.tableData3,border:"",height:"100%"}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"describe",label:"描述"}})],1)],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("el-pagination",{attrs:{"current-page":t.currentPageC,"page-size":t.pageSizeC,background:"",small:!0,"popper-class":"select-common-option","page-sizes":t.pageListC,layout:"total,sizes,slot,->,prev, pager, next, jumper",total:t.totalRecordsC},on:{"size-change":t.paginationSizeChange,"current-change":t.paginationChange,"update:currentPage":function(e){t.currentPageC=e},"update:current-page":function(e){t.currentPageC=e}}},[a("span",{staticClass:"el-pagination__current"},[t._v("当前第"+t._s(t.currentPageC)+"/"+t._s(t.totalPageC)+"页")])])],1)])],1)],1)])},staticRenderFns:[]};var o=a("VU/8")(s,n,!1,function(t){a("LMa0")},"data-v-1cb17028",null);e.default=o.exports},LMa0:function(t,e){}});
//# sourceMappingURL=104.7fc8f2713504522d6b40.js.map