webpackJsonp([10],{"10Wr":function(t,e){},phke:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"",data:function(){return{dateRange:[],factorModel:[],factorData:[],loading:!0,colors:{w01010:"#e53ce6",w01009:"#297eff",w01003:"#1cad8b",w01014:"#00a3f5",w01019:"#1ebd1e",w21003:"#c2a100",w21011:"#e68320",w21001:"#ff4242",w01001:"#8e42ff",w01018:"#4258ff"},unit:{"水温":"℃","溶解氧":"mg/L","浑浊度":"NTU","电导率":"μs/cm","高锰酸盐指数":"mg/L","氨氮":"mg/L","总磷":"mg/L","总氮":"mg/L",PH:"无量纲",CODcr:"mg/L"},legendData:[],xAxisData:[],yAxisData:[],seriesData:[],dataStatus:""}},created:function(){this.initTime()},mounted:function(){},methods:{initEchart:function(t,e,a,n){var o=this,i={title:{text:"变化趋势分析图",x:"center"},tooltip:{trigger:"axis",formatter:function(t){for(var e=t[0].axisValue+"<br/>",a=0;a<t.length;a++)e+="<p>"+t[a].seriesName+" : "+t[a].value+o.unit[t[a].seriesName]+"</p>";return e}},legend:{data:t,y:"bottom"},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:a,series:n},s=this.$echarts.init(document.getElementById("echartbox"));s.setOption(i),s.on("click",function(t){console.log(t)})},selectChange:function(t){},initTime:function(){var t=(new Date).setDate((new Date).getDate()-3),e=new Date;this.dateRange=[new Date(t).format("yyyy-MM-dd hh:mm:ss"),e.format("yyyy-MM-dd hh:mm:ss")]},getFactor:function(){var t=this;this.$http.post("/SiteManagement/index/query").then(function(e){if(0==e.data.code){for(var a in t.factorModel=[],t.factorData=e.data.content.dataList,t.factorData)t.factorModel.push(t.factorData[a].projectCode);t.getEchartData()}})},getEchartData:function(){var t=this;this.loading=!0,this.dataStatus="",this.$http.get("/StatisticsAndAlarm/dataCharts/moreDatasCharts",{params:{stationCode:this.stationId,factorCode:this.factorModel.join(","),startTime:this.dateRange[0],endTime:this.dateRange[1],type:"hour"}}).then(function(e){if(t.loading=!1,!e.data.content)return t.$echarts.init(document.getElementById("echartbox")).clear(),t.dataStatus="no",!1;t.dataStatus="";var a=e.data.content.info;t.legendData=a.legend,t.xAxisData=a.xAxis;var n=e.data.content.info.series;if(n&&n.length>0){for(var o=0;o<n.length;o++)o<5?t.yAxisData.push({type:"value",name:"",position:"left",offset:35*o,axisLine:{lineStyle:{color:t.colors[n[o].code]}}}):t.yAxisData.push({type:"value",name:"",position:"right",offset:35*(o-5),axisLine:{lineStyle:{color:t.colors[n[o].code]}}}),t.seriesData.push({name:n[o].name,type:"line",data:n[o].data,yAxisIndex:o,itemStyle:{color:t.colors[n[o].code]},markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]}});t.initEchart(t.legendData,t.xAxisData,t.yAxisData,t.seriesData)}})}},computed:{stationInfo:{get:function(){return this.$store.state.stationInfo}},detailTree:{get:function(){return this.$store.state.detailTree}}},watch:{stationInfo:function(t){t.length>0&&(this.stationId=t[0].nodeId,this.getFactor())},detailTree:function(t){var e=this.$echarts.init(document.getElementById("echartbox"));setTimeout(function(){e.resize()},300)}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"singlePage secondary-page-mode"},[a("div",{staticClass:"secondary-toolbar"},[a("span",[t._v("时间选择 : ")]),t._v(" \n        "),a("div",{staticClass:"layoutBox",staticStyle:{width:"380px"}},[a("el-date-picker",{attrs:{type:"datetimerange",align:"left",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),t._v("  \n        "),a("span",[t._v("监测项目 : ")]),t._v(" \n        "),a("div",{staticClass:"layoutBox",staticStyle:{width:"187px"}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.selectChange},model:{value:t.factorModel,callback:function(e){t.factorModel=e},expression:"factorModel"}},t._l(t.factorData,function(t){return a("el-option",{key:t.projectCode,attrs:{label:t.projectName,value:t.projectCode}})}),1)],1),t._v("  \n        "),a("el-button",{on:{click:t.getEchartData}},[a("i",{staticClass:"iconfont icon-sousuo"}),t._v("查询")])],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"currency-mode-wrap",staticStyle:{position:"relative"},attrs:{"element-loading-text":"加载中","element-loading-spinner":"loading-type-a","element-loading-background":"rgba(255, 255, 255, 1)"}},[a("div",{staticClass:"echartbox",attrs:{id:"echartbox"}}),t._v(" "),"no"==t.dataStatus?a("yf-Datastatus",{attrs:{dataStatus:t.dataStatus}}):t._e()],1)])},staticRenderFns:[]};var i=a("VU/8")(n,o,!1,function(t){a("10Wr")},null,null);e.default=i.exports}});
//# sourceMappingURL=10.55bb67bbfc95e084d0dc.js.map